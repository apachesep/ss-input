(function(e,b){var a={},d=0;this.Ss_input=function(a,b){this.ssi_excludeList={};this.options=e.extend(!0,{plugins:[],modalOptions:{sizeClass:"large",fixedHeight:!0,fitScreen:!0,buttons:[]},permissions:["all"],excludePlugin:[],language:"en",mode:"selection",storageType:"fileSystem",showTo:"modalWindow",responseValidation:!1},b);this.requireAfter=["scan"];this.uniqueId=d;this.readOnlyMode=!1;this.plugins=[];this.pluginNames=[];this.handlersGroup="handlers";this.corePlugins=[];this.initializedButtons=
{};this.readyState=!1;this.language=Ss_input.locale[this.options.language];this.$element=e(a);d++;this.init()};Ss_input.prototype.buttonSelectors={menu:"#ssi-menuButtons",contextMenu:"#ssi-contextMenuUl",options:"#ssi-TasksBtn+ul",actions:"#ssi-actionsBtn+ul",items:".ssi-optionsDiv",bottom:"#ssi-rightButtons",openWith:"#ssi-openWithBtn ul",editWith:"#ssi-editWithBtn ul"};Ss_input.prototype.init=function(){var a=Ss_input.tools.keyExists(this.options.storageType,Ss_input.storageTypes),a=a.concat("manager"!=
this.options.mode?Ss_input.tools.keyExists(this.options.mode,Ss_input.modePlugins):[],Ss_input.tools.keyExists(this.require,Ss_input.plugins));if(0!=a.length)console.log("Some requirements are missing: "+a.toString());else{if(0<this.options.plugins.length){if(this.pluginNames=this.options.plugins,a=Ss_input.tools.arrayValuesInArray(this.require,this.pluginNames))this.pluginNames=this.pluginNames.concat(a)}else for(var b in Ss_input.plugins)this.pluginNames.push(b);this.pluginInit(this.options.storageType,
Ss_input.storageTypes);this[this.options.storageType]=this.corePlugins[this.options.storageType];"manager"!=this.options.mode?(this.pluginInit(this.options.mode,Ss_input.modePlugins),this[this.options.mode]=this.corePlugins[this.options.mode]):("modalWindow"!=this.options.showTo&&(this.options.showTo=this.$element),this.$element.addClass("ss-input"));if("modalWindow"===this.options.showTo)this.setModal();else if(a=e(this.options.showTo),a.is("div")){if(this.$element.trigger("earlyShowAction"),b=this.setContent())a.first().addClass("ssi-mainModal").html(b),
this.setHeight()}else console.log("Use a div.")}};Ss_input.prototype.setModal=function(){var a=this;e.extend(this.options.modalOptions,{className:"ssi-mainModal",onClose:function(){a.$element.trigger("resetAction.ssi").trigger("closeAction.ssi")}});this.$element.on("click",function(b){b.preventDefault();a.$element.trigger("earlyShowAction");if(e(b.target).hasClass("ss-input")){b=a.createWindow(a.options.modalOptions);var d=a.setContent();d?(b.setContent(d),a.setHeight()):b.close()}})};Ss_input.prototype.setAfterEvents=
function(){var a,d=this;e(window).bind("beforeunload",function(){d.$element.trigger("resetAction.ssi").trigger("closeAction.ssi").off(".ssi")});this.$content.on({"mouseenter.ssi":function(b){b.preventDefault();a=e(this).find(".ssi-optionsDiv");a.fadeIn(200)},"mouseleave.ssi":function(){!1===a.hasClass("selected")&&a.fadeOut(200)}},".ssi-displayDiv");this.$element.on("closeAction.ssi",function(){b.removeAll();d.currentCollection={};d.initializedButtons=[];d.readOnlyMode="";e(this).off(".ssi");e("body").off(".ssi")});
this.$content.on("click",function(a){e(a.target).is("input")||e(this).focus()})};Ss_input.prototype.setContent=function(){var a=Ss_input.tools.keyExists(this.requireAfter,Ss_input.plugins),b=Ss_input.tools.arrayValuesInArray(this.requireAfter,this.pluginNames);this.pluginNames=this.pluginNames.concat(b);if(0!=a.length)return console.log("Some requirements are missing: "+a.toString()),!1;this.$content=e(Ss_input.templates.mainContent);"modalWindow"!==this.options.showTo&&this.$content.append(Ss_input.templates.bottomButtons);
e.isEmptyObject(this.plugins)?this.pluginInit(this.pluginNames):this.resetPlugins(this.plugins);this.$element.trigger("showAction");this.buttonsInit();this.setAfterEvents();return this.$content};Ss_input.prototype.destroy=function(){this.$element.trigger("closeAction.ssi");this.$content.remove()};Ss_input.prototype.checkPermissions=function(a,b){return("read"===a||"all"===this.options.permissions[0]||0===Ss_input.tools.arrayValuesInArray(a,this.options.permissions).length||-1!==e.inArray(b,this.options.permissions))&&
(-1===e.inArray(b,this.options.excludePlugin)||-1!==e.inArray(b,this.require)||-1!==e.inArray(b,this.requireAfter))};Ss_input.prototype.handlerInit=function(a,b,d){new Ss_input[d][a](this,b,a)};Ss_input.prototype.pluginInit=function(a,b){a=Ss_input.tools.toArray(a);for(var d=0,h=a.length;d<h;d++)try{b=b||Ss_input.plugins;if(0!=Ss_input.tools.keyExists(a[d],b).length)throw"did not load";if(a[d]){var k=new b[a[d]](this,this.options[a[d]]);if(this.checkPermissions(k.permissions,a[d])&&!e.isEmptyObject(k)&&
0!==Ss_input.tools.keyExists(a[d],this[k.type]).length){var l=Ss_input.tools.keyExists(k.require,b);if(0===l.length){var m=Ss_input.tools.keyExists(k.require,this[k.type]);this.pluginInit(m);if(0===Ss_input.tools.keyExists(m,this.plugins).length||0===Ss_input.tools.keyExists(m,this.corePlugins).length)this[k.type][a[d]]=k,Ss_input[this.handlersGroup].hasOwnProperty(a[d])?this.handlerInit(a[d],k,this.handlersGroup):Ss_input.handlers.hasOwnProperty(a[d])&&this.handlerInit(a[d],k,"handlers"),k.init();
else throw"requires "+m.toString()+".";}else throw"requires "+l.toString()+".";}}}catch(n){console.log(a[d]+" "+n)}};Ss_input.prototype.resetPlugins=function(a){for(var b in a){var d=a[b];Ss_input[this.handlersGroup].hasOwnProperty(b)?this.handlerInit(b,d,this.handlersGroup):Ss_input.handlers.hasOwnProperty(b)&&this.handlerInit(b,d,"handlers");d.init()}};Ss_input.prototype.coreButtonsInit=function(a){switch(Ss_input.tools.findKey(a,this.buttonSelectors)){case "actions":this.$content.find(this.buttonSelectors.menu).append(this.addButton({id:"ssi-actionsBtn",
title:this.language.actions,label:'<div class="icon ssi-actionsIcon"></div>',dropDown:!0,selectionRequired:!0},"menuButton",!1));break;case "options":this.$content.find(this.buttonSelectors.menu).append(this.addButton({id:"ssi-TasksBtn",title:this.language.options,label:'<div class="icon ssi-optionsIcon"></div>',dropDown:!0},"menuButton",!1));break;case "openWith":this.$content.find(this.buttonSelectors.contextMenu).append(this.addButton({id:"ssi-openWithBtn",title:"openWith",label:'<span class="icon ssi-openWithIcon"></span>openWith',
selectionRequired:!0,subMenu:!0},"listButton",!1));break;case "editWith":this.$content.find(this.buttonSelectors.contextMenu).append(this.addButton({id:"ssi-editWithBtn",title:"editWith",label:'<span class="icon ssi-editWithIcon"></span>editWith',subMenu:!0,selectionRequired:!0},"listButton",!1))}};Ss_input.prototype.buttonsInit=function(){var b=this.buttonSelectors;this.$content.find(b.menu).append(a[b.menu]);delete a[b.menu];for(var d in a)try{var e=d.split(","),h;if(0!=(h=Ss_input.tools.keyExists(e,
this.initializedButtons)).length)for(var b=0,k=h.length;b<k;b++)this.initializedButtons[h[b]]=!0,this.coreButtonsInit(h[b]);this.$content.find(d).append(a[d])}catch(l){}a={}};Ss_input.prototype.addButton=function(b,d,g,h){b=Ss_input.tools.toArray(b);d=d||"menuButton";for(var k=[],l=0,m=b.length;l<m;l++)if("bottom"==g&&"modalWindow"===this.options.showTo)this.options.modalOptions.buttons.push(b[l]);else{var n=new Ss_input.Button(b[l],d,this.$content);if(g)if(g instanceof e)g.append(n);else if("itemButton"!=
g){for(var p=[],q=0,r=g.length;q<r;q++)p.push(this.buttonSelectors[g[q]]);a.hasOwnProperty(p.toString())?a[p.toString()].push(n):a[p.toString()]=[n];h&&b[l].selectionRequired&&(this.ssi_excludeList[b[l].className]=h)}k.push(n)}return 1==k.length?k[0]:k};Ss_input.prototype.notify=function(a,d){b.notify(a,{overrideOther:!0,content:d})};Ss_input.prototype.checkExcludedButtons=function(a){var b=this.ssi_excludeList,d=this.get$selectedItems(),h=this.$content.find(".ssi-mustSelect").removeClass("ssi-hidden disabled"),
k;for(k in b)d.each(function(){e(this).data("info");if("false"==eval(Ss_input.tools.dataReplace(b[k],"info"))){var d=h.filter("."+k).addClass("ssi-hidden");"function"===typeof a&&a(d);return!1}})};Ss_input.prototype.createWindow=function(a,d){return b.show(a,d)};Ss_input.prototype.get$mainElementById=function(a,b){b=b||this.$content;return b.find(".ssi-mainElement[data-ID='"+a+"']")};Ss_input.prototype.get$mainElement=function(a){return a.hasClass("ssi-mainElement")?a:a.parents(".ssi-itemWrapper").find(".ssi-mainElement")};
Ss_input.prototype.getId=function(a){if(a)return"string"===typeof a?this.get$mainElementById(a).attr("data-ID"):this.get$mainElement(a).attr("data-ID");var b=[];this.get$selectedItems().each(function(){b.push(e(this).attr("data-ID"))});return b};Ss_input.prototype.get$itemWrapper=function(a){return a.parents(".ssi-itemWrapper")};Ss_input.prototype.get$selectedItems=function(a){try{var b=this.plugins.select;return a?this.get$mainElement(a):0<b.selectionList.length?e(".ssi-mActive"):this.plugins.contextMenu.rightClickItem||
e()}catch(d){return e()}};Ss_input.prototype.getSelectedData=function(a){try{var b=[];this.get$selectedItems(a).each(function(){b.push(e(this).data("info"))});return b}catch(d){return[]}};Ss_input.prototype.getSelectedField=function(a,b){for(var d=this.getSelectedData(b),e=[],k=0,l=d.length;k<l;k++)try{e.push(d[k][a])}catch(m){}return e};Ss_input.prototype.getPageData=function(a){var b=this.plugins.cache,d=[];if(b)d=b.getCachedPage(a).data;else{if(a&&a!=this.currentCollection.id)return[];this.$content.find(".ssi-selectable").each(function(){d.push(e(this).data("info"))})}return d};
Ss_input.prototype.getItemData=function(a,b,d){return Ss_input.tools.findByKey(this.getPageData(d),a,b)};Ss_input.prototype.getUrlList=function(){try{var a=this.plugins.select;return 0<a.selectionList.length?a.selectionList:[this.plugins.contextMenu.rightClickItem.attr("data-ID")]}catch(b){return[]}};Ss_input.prototype.ajaxCall=function(a,b,d){a=a||{};var h=this.$content.find("#ssi-progressBar"),k=this;a=e.extend({},{xhr:function(){var a=new window.XMLHttpRequest;a.addEventListener("progress",function(a){a.lengthComputable?
h.css({width:a.loaded/a.total*100+"%"}):h.css("width","100%")},!1);return a},type:"POST",beforeSend:function(){k.$content.find("#ssi-loader").removeClass("ssi-hidden");h.removeClass("ssi-hidden")}},a);a.stringifyData&&(a.data=JSON.stringify(a.data));h.removeClass("hide");this.$element.trigger("sendRequestAction.ssi");e.ajax(a).done(function(a,d,c){k.$element.trigger("responseAction.ssi");if(b){var g;try{g=e.parseJSON(a)}catch(h){g=a}a=g;if(k.options.responseValidation)if(g=k.options.responseValidation,
"object"===typeof g.validationKey&&"validationKey"==g.resultKey)if(a.hasOwnProperty(g.validationKey.success))b(a[g.validationKey.success],d,c);else throw{type:"error",msg:a[g.validationKey.error]};else if(a[g.validationKey]==g.success)b(a[g.resultKey],d,c);else throw{type:"error",msg:a[g.resultKey]};else b(a,d,c)}}).fail(function(a,b){d&&d();console.log(arguments);console.log(" Ajax error: "+b)}).complete(function(){k.reloadProgressbar()})};Ss_input.prototype.setHeight=function(a){a=a||(this.$content.hasClass("ssi-multiPickMode")&&
"modalWindow"!=this.options.showTo?115:70);a=parseInt(this.$content.parent().height())-a;this.$content.find("#ssi-mainContent").css("height",a)};Ss_input.prototype.openCollection=function(a,b,d){this.$element.trigger("changeCollectionAction.ssi");this.plugins.scan.scanCollection(a,b,d)};Ss_input.prototype.reloadProgressbar=function(){this.$content.find("#ssi-loading").html("");var a=this;setTimeout(function(){a.$content.find("#ssi-loader").addClass("ssi-hidden");a.$content.find("#ssi-progressBar").addClass("ssi-hidden").css("width",
"0%")},500)};e.fn.ss_input=function(a){return this.each(function(){new Ss_input(this,a)})};return Ss_input})(jQuery,ssi_modal);
var Button=function(e,b,a,d){this.options=$.extend({},{label:"",title:"",dropDown:!1,id:"",attributes:"",selectionRequired:!1,stopPropagation:!0,keyPress:"",subMenu:!1,method:function(){},className:"",$element:a,$input:d},e);var c=this;e=Ss_input.tools.template(Ss_input.templates.buttons[b],this.options);this.$element=$(e).click(function(a){a.preventDefault();c.options.stopPropagation&&a.stopPropagation();$(this).hasClass("disabled")||"function"!==typeof c.options.method||(a=[a],c.options.$input&&
a.push(Ss_input.tools.sanitizeInput(d.val())),c.options.method.apply(this,a))});this.options.attributes&&this.$element.attr(this.options.attributes);this.options.keyPress&&this.setKeyEvents();this.options.input?this.getInput():this.options.dropDown?this.setDropDown():this.options.subMenu&&this.setSubMenu();return this.$element};Ss_input.Button=Button;
Button.prototype={setSubMenu:function(){for(var e=[],b=0,a=this.options.subMenu.length;b<a;b++)e.push(new Button(this.options.subMenu[b],"listButton",this.options.$element));this.$element.addClass("parent").append($("<ul>").html(e))},setDropDown:function(){for(var e=$('<div class="ssi-dropDownWrapper">'),b=[],a=0,d=this.options.dropDown.length;a<d;a++)b.push(new Button(this.options.dropDown[a],"listButton",this.options.$element));this.$element=e.append(this.$element.addClass("ssi-dropDown"),$('<ul class="ssi-dropdown">').html(b))},
setKeyEvents:function(){var e=this,b="e.which == thisS.options.keyPress.keyCode &&!$(e.target).is('input')";this.options.keyPress.ctrl&&(b+="&&e.ctrlKey");this.options.keyPress.shift&&(b+="&&e.shiftKey");$(this.options.$element||"body").on("keydown.ssi",function(a){e.$element.hasClass("disabled")||1!=eval(b)||(a.stopPropagation(),a.preventDefault(),e.$element.eq(0).trigger("click"))})},getInput:function(){var e=new Ss_input.Input(this.options.input),b=this,a=$('<div class="ssi-btnContainer '+this.options.input.containerClass+
'">').append(e),d=$("<div>").append(this.$element,a);this.options.input.enterKey&&e.keyup(function(a){13==a.keyCode&&$(this).next().trigger("click")});this.$element.click(function(d){d.preventDefault();d.stopPropagation();var c=$(this).addClass("disabled");$(".ssi-btnContainer").not("."+b.options.input.containerClass).hide(500);a.toggle(500,function(){c.removeClass("disabled");e.focus()})});if(this.options.input.buttons)for(var c=0,f=this.options.input.buttons.length;c<f;c++)a.append(new Button(this.options.input.buttons[c],
"menuButton",this.options.$element,e));return this.$element=d}};
(function(e){Ss_input.handlers=[];var b=function(a,b,c){this.ssi=a;this.plugin=b;this.pluginName=c;this.storage=a.corePlugins[a.options.storageType];this.init();this.setDefaults(this.defaults);this.extendPlugin(this.extend)};Ss_input.Handler=b;b.prototype={locale:{},group:"fileSystem",template:{},extend:{},defaults:{},require:[],init:function(){},extendPlugin:function(a){e.extend(Object.getPrototypeOf(this.plugin),a)},setDefaults:function(a){e.extend(this.plugin.options,a,this.ssi.options[this.pluginName]||
{})},unload:function(a){this.ssi.pluginNames[this.ssi.pluginNames.indexOf(a)]=null;Ss_input.tools.removeByKey(this.ssi[this.type],a)}};b.extend=function(a,b){var c=b?Ss_input.handlers[b]:this,f;if(c)return f=a.hasOwnProperty("constructor")?a.constructor:function(){return c.apply(this,arguments)},e.extend(f.prototype,c.prototype,a),f;console.log("The handler "+b+" hasn't initialize!")}})(jQuery);
var Input=function(e,b){this.options=$.extend({},{checked:!0,className:"",id:"",name:"",type:"text",value:""},e);this.defaultValue=b||this.options.value;if(this[this.options.type])this[this.options.type]();else this.setInput();return $(this.$element)};Ss_input.Input=Input;
Input.prototype={select:function(){this.options.select=this.options.select||[];this.options.multiple=this.options.multiple||"";var e={value:"",label:"",selected:!1},b="";this.options.multiple=this.options.multiple?"multiple":"";for(var a=0,d=this.options.options.length;a<d;a++){var c=$.extend({},e,this.options.options[a]);"undefined"!==typeof this.defaultValue&&(this.defaultValue=Ss_input.tools.toArray(this.defaultValue),c.selected=-1!==$.inArray(c.value,this.defaultValue));c.selected=c.selected?
"selected":"";b+=Ss_input.tools.template(Ss_input.templates.input.selectItem,{options:c})}this.$element=Ss_input.tools.template(Ss_input.templates.input.select,{options:this.options,selectItems:b})},radio:function(){for(var e="",b={value:"",label:"",name:this.options.name,checked:!1,type:"radio"},a=0;a<this.options.radio.length;a++){var d=$.extend({},b,this.options.radio[a]);d.checked="undefined"!==typeof this.defaultValue?d.value==this.defaultValue:d.checked;e+=Ss_input.tools.template(Ss_input.templates.input.radio,
{options:d})}this.$element=Ss_input.tools.template(Ss_input.templates.input.radioGroup,{options:this.options,radioGroupItems:e})},checkbox:function(){this.options.checked="undefined"!==typeof this.defaultValue?this.defaultValue:this.options.checked;this.$element=Ss_input.tools.template(Ss_input.templates.input.radio,{options:this.options})},setInput:function(){this.options.value=this.defaultValue;var e=Ss_input.templates.input;this.$element=Ss_input.tools.template(e[this.options.type]||e.text,{options:this.options})}};
Ss_input.locale={en:{extError:"$1 files are not supported",existError:"This file already exists!",existInListError:"This file is already in the list.",uploadImg:"Upload image",replaceMsg:'"File with name $1 already exists in this folder.Do you want to replace it?',"continue":"Continue",replace:"Replace",uploadSuccess:"The file uploaded successfully!",pickSuccess:"The remote file was selected successfully!",successCreated:"The folder created successfully!",fileSuccessCreated:"The file created successfully!",
mkdirSuccess:"The folder created successfully!",icons:"Icons",insert:"Insert",home:"Home",options:"Options",defaultValues:"Default values",date:"Date",size:"Size",type:"Type",dimensions:"Dimensions",name:"Name",ok:"Ok",cleanCache:"Clean cache",cut:"Cut",copy:"Copy",paste:"Paste",createCopy:"Create copy",skip:"Skip","delete":"Delete",deleteMsg:"Are you sure that you want to permanently delete the selected files?",delSuccess:"The file deleted successfully!",cancel:"Cancel",loadTime:"Load time",location:"Location",
info:"Info",details:"Details",preview:"Preview",small:"Small",medium:"Medium",large:"large",iconSize:"Icon size",createFolder:"Create folder",newFile:"New file",folderExistError:"The folder with name $1 already exists!",previewType:"Preview",refresh:"Refresh",rename:"Rename",search:"Search",newDocument:"New document",editDocument:"Edit document",saveAsNew:"Save as new",saveAndNew:"Save and new",save:"Save",select:"Select",folders:"Folders",files:"Files",all:"All",sort:"Sort by",uploadFiles:"Upload files",
url:"Url",addSuccess:"The file added to your list!",invalidUrlError:"The url you entered is not valid!",upload:"Upload",limitError:"You have reached the limit of $1 files.",selectedTooltip:"Selected files",selectedBtn:"Clear selected files",checkedTooltip:"Checked files",checkedBtn:"Clear checked files",addUrl:"Add a url",noItems:"Nothing in the list...",images:"Images",textFiles:"Text files",path:"Path",ext:"Extension",mimeType:"Media type"},gr:{extError:"\u03a4\u03b1 $1 \u03b1\u03c1\u03c7\u03b5\u03af\u03b1 \u03b4\u03b5\u03bd \u03c5\u03c0\u03bf\u03c3\u03c4\u03b7\u03c1\u03af\u03b6\u03bf\u03bd\u03c4\u03b1\u03b9",
existError:"\u0391\u03c5\u03c4\u03cc \u03c4\u03bf \u03b1\u03c1\u03c7\u03b5\u03af\u03bf \u03c5\u03c0\u03ac\u03c1\u03c7\u03b5\u03b9 \u03ae\u03b4\u03b7!",existInListError:"\u0391\u03c5\u03c4\u03cc \u03c4\u03bf \u03b1\u03c1\u03c7\u03b5\u03af\u03bf \u03c5\u03c0\u03ac\u03c1\u03c7\u03b5\u03b9 \u03ae\u03b4\u03b7 \u03c3\u03c4\u03b7 \u03bb\u03af\u03c3\u03c4\u03b1!",uploadImg:"\u039c\u03b5\u03c4\u03b1\u03c6\u03cc\u03c1\u03c4\u03c9\u03c3\u03b7 \u03b5\u03b9\u03ba\u03cc\u03bd\u03b1\u03c2",upload:"\u039c\u03b5\u03c4\u03b1\u03c6\u03cc\u03c1\u03c4\u03c9\u03c3\u03b7",
replaceMsg:"T\u03bf \u03b1\u03c1\u03c7\u03b5\u03af\u03bf \u03bc\u03b5 \u03cc\u03bd\u03bf\u03bc\u03b1 $1 \u03c5\u03c0\u03ac\u03c1\u03c7\u03b5\u03b9 \u03ae\u03b4\u03b7 \u03c3\u03b5 \u03b1\u03c5\u03c4\u03cc\u03bd \u03c4\u03bf\u03bd \u03c0\u03c1\u03bf\u03bf\u03c1\u03b9\u03c3\u03bc\u03cc. \u0398\u03ad\u03bb\u03b5\u03c4\u03b5 \u03bd\u03b1 \u03c4\u03bf \u03b1\u03bd\u03c4\u03b9\u03ba\u03b1\u03c4\u03b1\u03c3\u03c4\u03ae\u03c3\u03b5\u03c4\u03b5;","continue":"\u03a3\u03c5\u03bd\u03ad\u03c7\u03b5\u03b9\u03b1",
successCreated:"\u039f \u03c6\u03ac\u03ba\u03b5\u03bb\u03bf\u03c2 \u03b4\u03b7\u03bc\u03b9\u03bf\u03c5\u03c1\u03b3\u03ae\u03b8\u03b7\u03ba\u03b5 \u03bc\u03b5 \u03b5\u03c0\u03b9\u03c4\u03c5\u03c7\u03af\u03b1!",fileSuccessCreated:"\u03a4\u03bf \u03b1\u03c1\u03c7\u03b5\u03af\u03bf \u03b4\u03b7\u03bc\u03b9\u03bf\u03c5\u03c1\u03b3\u03ae\u03b8\u03b7\u03ba\u03b5 \u03bc\u03b5 \u03b5\u03c0\u03b9\u03c4\u03c5\u03c7\u03af\u03b1!",replace:"\u0391\u03bd\u03c4\u03b9\u03ba\u03b1\u03c4\u03ac\u03c3\u03c4\u03b1\u03c3\u03b7",
uploadSuccess:"\u03bf \u03b1\u03c1\u03c7\u03b5\u03af\u03bf \u03c6\u03bf\u03c1\u03c4\u03ce\u03b8\u03b7\u03ba\u03b5 \u03b5\u03c0\u03b9\u03c4\u03c5\u03c7\u03ce\u03c2!",pickSuccess:"\u03a4\u03bf \u03b1\u03c0\u03bf\u03bc\u03b1\u03ba\u03c1\u03c5\u03c3\u03bc\u03ad\u03bd\u03bf \u03b1\u03c1\u03c7\u03b5\u03af\u03bf \u03b5\u03c0\u03b9\u03bb\u03ad\u03c7\u03b8\u03b7\u03ba\u03b5 \u03bc\u03b5 \u03b5\u03c0\u03b9\u03c4\u03c5\u03c7\u03af\u03b1!",mkdirSuccess:"\u039f \u03c6\u03ac\u03ba\u03b5\u03bb\u03bf\u03c2 \u03b4\u03b7\u03bc\u03b9\u03bf\u03c5\u03c1\u03b3\u03ae\u03b8\u03b7\u03ba\u03b5 \u03bc\u03b5 \u03b5\u03c0\u03b9\u03c4\u03c5\u03c7\u03af\u03b1!",
icons:"\u0395\u03b9\u03ba\u03bf\u03bd\u03af\u03b4\u03b9\u03b1",insert:"\u03a0\u03c1\u03bf\u03c3\u03b8\u03ae\u03ba\u03b7",home:"\u0391\u03c1\u03c7\u03b9\u03ba\u03ae",options:"\u0395\u03c0\u03b9\u03bb\u03bf\u03b3\u03ad\u03c2",defaultValues:"\u03a0\u03c1\u03bf\u03b5\u03c0\u03b9\u03bb\u03b5\u03b3\u03bc\u03ad\u03bd\u03b1",date:"\u0397\u03bc/\u03bd\u03b9\u03b1",size:"\u039c\u03ad\u03b3\u03b5\u03b8\u03bf\u03c2",type:"\u03a4\u03cd\u03c0\u03bf\u03c2",name:"\u038c\u03bd\u03bf\u03bc\u03b1",path:"\u0394\u03b9\u03b1\u03b4\u03c1\u03bf\u03bc\u03ae",
dimensions:"\u0394\u03b9\u03b1\u03c3\u03c4\u03ac\u03c3\u03b5\u03b9\u03c2",ok:"Ok",cleanCache:"\u0395\u03ba\u03ba\u03b1\u03b8\u03ac\u03c1\u03b9\u03c3\u03b7 cache",cut:"\u0391\u03c0\u03bf\u03ba\u03bf\u03c0\u03ae",copy:"\u0391\u03bd\u03c4\u03b9\u03b3\u03c1\u03b1\u03c6\u03ae",paste:"\u0395\u03c0\u03b9\u03ba\u03cc\u03bb\u03bb\u03b7\u03c3\u03b7",preview:"\u03a0\u03c1\u03bf\u03b5\u03c0\u03b9\u03c3\u03ba\u03cc\u03c0\u03b7\u03c3\u03b7",images:"\u0395\u03b9\u03ba\u03cc\u03bd\u03b5\u03c2",textFiles:"\u0391\u03c1\u03c7\u03b5\u03af\u03b1 \u03ba\u03b5\u03b9\u03bc\u03ad\u03bd\u03bf\u03c5",
createCopy:"\u0394\u03b7\u03bc\u03b9\u03bf\u03c5\u03c1\u03b3\u03af\u03b1 \u03b1\u03bd\u03c4\u03b9\u03b3\u03c1\u03ac\u03c6\u03bf\u03c5",skip:"\u03a0\u03b1\u03c1\u03ac\u03b2\u03bb\u03b5\u03c8\u03b7",deleteMsg:"\u0395\u03af\u03c3\u03c4\u03b5 \u03c3\u03af\u03b3\u03bf\u03c5\u03c1\u03bf\u03c2 \u03cc\u03c4\u03b9 \u03b8\u03ad\u03bb\u03b5\u03c4\u03b5 \u03bd\u03b1 \u03b4\u03b9\u03b1\u03b3\u03c1\u03ac\u03c8\u03b5\u03c4\u03b5 \u03bf\u03c1\u03b9\u03c3\u03c4\u03b9\u03ba\u03ac \u03c4\u03b1 \u03b5\u03c0\u03b9\u03bb\u03b5\u03b3\u03bc\u03ad\u03bd\u03b1 \u03b1\u03c1\u03c7\u03b5\u03af\u03b1;",
"delete":"\u0394\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae",delSuccess:"\u03a4\u03bf \u03b1\u03c1\u03c7\u03b5\u03af\u03bf \u03b4\u03b9\u03b1\u03b3\u03c1\u03ac\u03c6\u03b7\u03ba\u03b5 \u03bc\u03b5 \u03b5\u03c0\u03b9\u03c4\u03c5\u03c7\u03af\u03b1!",cancel:"\u0391\u03ba\u03cd\u03c1\u03c9\u03c3\u03b7",loadTime:"\u03a7\u03c1\u03cc\u03bd\u03bf\u03c2 \u03c6\u03cc\u03c1\u03c4\u03c9\u03c3\u03b7\u03c2",location:"\u03a4\u03bf\u03c0\u03bf\u03b8\u03b5\u03c3\u03af\u03b1",previewType:"\u03a0\u03c1\u03bf\u03b2\u03bf\u03bb\u03ae",
info:"\u03a0\u03bb\u03b7\u03c1\u03bf\u03c6\u03bf\u03c1\u03af\u03b5\u03c2",details:"\u039b\u03b5\u03c0\u03c4\u03bf\u03bc\u03ad\u03c1\u03b5\u03b9\u03b5\u03c2",ext:"\u0395\u03c0\u03ad\u03ba\u03c4\u03b1\u03c3\u03b7",small:"\u039c\u03b9\u03ba\u03c1\u03cc",medium:"\u039c\u03b5\u03c3\u03b1\u03af\u03bf",large:"\u039c\u03b5\u03b3\u03ac\u03bb\u03bf",iconSize:"\u039c\u03ad\u03b3\u03b5\u03b8\u03bf\u03c2 \u03b5\u03b9\u03ba\u03bf\u03bd\u03b9\u03b4\u03af\u03c9\u03bd",createFolder:"\u0394\u03b7\u03bc\u03b9\u03bf\u03c5\u03c1\u03b3\u03af\u03b1 \u03c6\u03b1\u03ba\u03ad\u03bb\u03bf\u03c5",
newFile:"\u039d\u03ad\u03bf \u03b1\u03c1\u03c7\u03b5\u03af\u03bf",folderExistError:"\u039f \u03c6\u03ac\u03ba\u03b5\u03bb\u03bf\u03c2 \u03bc\u03b5 \u03cc\u03bd\u03bf\u03bc\u03b1 $1 \u03c5\u03c0\u03ac\u03c1\u03c7\u03b5\u03b9 \u03ae\u03b4\u03b7",refresh:"\u0391\u03bd\u03b1\u03bd\u03ad\u03c9\u03c3\u03b7",rename:"\u039c\u03b5\u03c4\u03bf\u03bd\u03bf\u03bc\u03b1\u03c3\u03af\u03b1",search:"\u0391\u03bd\u03b1\u03b6\u03ae\u03c4\u03b7\u03c3\u03b7",select:"\u0395\u03c0\u03b9\u03bb\u03bf\u03b3\u03ae",folders:"\u03a6\u03b1\u03ba\u03ad\u03bb\u03c9\u03bd",
files:"\u0391\u03c1\u03c7\u03b5\u03af\u03c9\u03bd",all:"\u038c\u03bb\u03c9\u03bd",newDocument:"\u039d\u03ad\u03b1 \u03ba\u03b1\u03c4\u03bf\u03c7\u03cd\u03c1\u03c9\u03c3\u03b7",editDocument:"\u0394\u03b9\u03b1\u03bc\u03cc\u03c1\u03c6\u03c9\u03c3\u03b7",saveAsNew:"\u0391\u03c0\u03bf\u03b8\u03ae\u03ba\u03b5\u03c5\u03c3\u03b7 \u03c9\u03c2 \u03ba\u03b1\u03b9\u03bd\u03bf\u03cd\u03c1\u03b9\u03bf",saveAndNew:"\u0391\u03c0\u03bf\u03b8\u03ae\u03ba\u03b5\u03c5\u03c3\u03b7 \u03ba\u03b1\u03b9 \u03ba\u03b1\u03b9\u03bd\u03bf\u03cd\u03c1\u03b9\u03bf",
save:"\u0391\u03c0\u03bf\u03b8\u03ae\u03ba\u03b5\u03c5\u03c3\u03b7",sort:"\u03a4\u03b1\u03be\u03b9\u03bd\u03cc\u03bc\u03b7\u03c3\u03b7",url:"\u0394\u03b9\u03b5\u03cd\u03b8\u03c5\u03bd\u03c3\u03b7 url",addSuccess:"\u03a4\u03bf \u03b1\u03c1\u03c7\u03b5\u03af\u03bf \u03c0\u03c1\u03bf\u03c3\u03c4\u03ad\u03b8\u03b7\u03ba\u03b5 \u03c3\u03c4\u03b7 \u03bb\u03af\u03c3\u03c4\u03b1 !",invalidUrlError:"\u0397 \u03b4\u03b9\u03b5\u03cd\u03b8\u03c5\u03bd\u03c3\u03b7 URL \u03c0\u03bf\u03c5 \u03b5\u03b9\u03c3\u03ac\u03b3\u03b1\u03c4\u03b5 \u03b4\u03b5\u03bd \u03b5\u03af\u03bd\u03b1\u03b9 \u03ad\u03b3\u03ba\u03c5\u03c1\u03b7!",
uploadFiles:"\u039c\u03b5\u03c4\u03b1\u03c6\u03cc\u03c1\u03c4\u03c9\u03c3\u03b7 \u03b1\u03c1\u03c7\u03b5\u03af\u03c9\u03bd",limitError:"\u0388\u03c7\u03b5\u03b9\u03c2 \u03c6\u03c4\u03b1\u03c3\u03b7 \u03c3\u03c4\u03bf \u03cc\u03c1\u03b9\u03bf \u03c4\u03c9\u03bd $1 \u03b1\u03c1\u03c7\u03b5\u03af\u03c9\u03bd.",selectedTooltip:"\u0395\u03c0\u03b9\u03bb\u03b5\u03b3\u03bc\u03ad\u03bd\u03b1 \u03b1\u03c1\u03c7\u03b5\u03af\u03b1",selectedBtn:"\u0395\u03ba\u03ba\u03b1\u03b8\u03ac\u03c1\u03b9\u03c3\u03b7 \u03b5\u03c0\u03b9\u03bb\u03b5\u03b3\u03bc\u03ad\u03bd\u03c9\u03bd \u03b1\u03c1\u03c7\u03b5\u03af\u03c9\u03bd",
checkedTooltip:"\u03a3\u03c4\u03b9\u03b3\u03bc\u03b1\u03c4\u03b9\u03c3\u03bc\u03ad\u03bd\u03b1 \u03b1\u03c1\u03c7\u03b5\u03af\u03b1",checkedBtn:"\u0395\u03ba\u03ba\u03b1\u03b8\u03ac\u03c1\u03b9\u03c3\u03b7 \u03c3\u03c4\u03b9\u03b3\u03bc\u03b1\u03c4\u03b9\u03c3\u03bc\u03ad\u03bd\u03b1 \u03b1\u03c1\u03c7\u03b5\u03af\u03c9\u03bd",addUrl:"\u03a0\u03c1\u03bf\u03c3\u03b8\u03ae\u03ba\u03b7 \u03c3\u03c5\u03bd\u03b4\u03ad\u03c3\u03bc\u03bf\u03c5",noItems:"\u0394\u03b5\u03bd \u03c5\u03c0\u03b1\u03c1\u03c7\u03b5\u03b9 \u03ba\u03ac\u03c4\u03b9...",
mimeType:"\u03a4\u03cd\u03c0\u03bf\u03c2"}};
(function(e){Ss_input.plugins=[];Ss_input.storageTypes=[];Ss_input.modePlugins=[];var b=function(a,b){for(var c=0,f=this.externalResources.length;c<f;c++)try{var g=this.externalResources[c];eval(g)}catch(h){return console.log("A required external resource not found:"+g),{}}this.ssi=a;this.options=e.extend({},this.defaults,b)};Ss_input.Plugin=b;b.prototype={permissions:"read",locale:{},defaults:{},template:{},externalResources:[],type:"plugins",defaultLanguage:"en",require:[],translate:function(a,
b){var c;if(0==b)return a;try{c=this.locale[this.ssi.options.language][a];if(!c)throw"error";return c}catch(f){try{c=Ss_input.locale[this.ssi.options.language][a];if(!c)throw"error";return c}catch(e){try{c=Ss_input.locale[this.defaultLanguage][a];if(!c)throw"error";return c}catch(h){return a}}}},init:function(){},unload:function(a){this.ssi.pluginNames[this.ssi.pluginNames.indexOf(a)]=null;Ss_input.tools.removeByKey(this.ssi[this.type],a)}};b.extend=function(a,b,c){c=c||Ss_input.plugins;var f=b?c[b]:
this;if(!f)return console.log("The plugin "+b+" hasn't initialize!"),function(){};b=a.hasOwnProperty("constructor")?a.constructor:function(){return f.apply(this,arguments)};e.extend(!0,b.prototype,f.prototype,a);return b}})(jQuery);
(function(e){Ss_input.templates={buttons:{menuButton:'<# if(selectionRequired) className+=" ssi-selectionRequired ssi-hidden";  #><button id="<#= id #>" data-title="<#= title #>" class="ssi-tooltip <#= className #> ssi-mBtn"> <#= label #> </button>',listButton:'<# var LiClassName; if(selectionRequired){className+=" ssi-mustSelect disabled";} #><li id="<#= id #>" class="<#= className #> "><a href="#" > <#= label #> </a></li>',itemButton:'<a href="#" id="<#= id #>" class="<#= className #> ssi-optionBtn"><#= label #></a>'},
input:{select:'<select <#= options.multiple#> id = "<#=options.id#>" name ="<#=options.name#>" class="<#=options.className#>" ><#= selectItems#></select >',selectItem:'<option <#=options.selected#> value="<#=options.value#>"><#=options.label#></option>',textarea:'<textarea  id = "<#=options.id#>"  name = "<#=options.name#>" class= "<#=options.className#>"  <#=options.readOnly#> ><#=options.value#></textarea>',text:'<input type = "<#=options.type#>" placeholder="<#= options.placeholder#>" id = "<#=options.id#>"  name = "<#=options.name#>" class= "<#=options.className#>" value = "<#=options.value#>"/ >',
radioGroup:'<div class="ssi-radioGroup <#=options.className#>" id="<#=options.id#>" ><#=radioGroupItems#></div>',radio:'<div class="ssi-radioItem"><label><#=options.label#></label><input type="<#=options.type#>"<#=options.checked?"checked":""#>  name="<#=options.name#>"  value="<#=options.value#>"/></div>'},mainContent:'<div id="ssi-content" tabindex="1"><div id="ssi-menuButtons" class="ssi-menuButtons"></div><div id="ssi-topBarWrapper" class="ssi-topBarWrapper"> <div class="ssi-topBarButtonArea"></div><div id="ssi-topBar" class="ssi-topBar"> <div id="ssi-loader" class="ssi-hidden ssi-loadingIcon ssi-pathLoader"></div><div id="ssi-progressBar" class="ssi-progress"></div></div></div><div id="ssi-mainContent" class="ssi-mainContent"><div id="ssi-items" class="ssi-items"><div id="ssi-contentFiles"></div></div></div></div>',
bottomButtons:'<div id="ssi-bottomButtons" class="ssi-bottomButtons"><div id="ssi-leftButtons" class="ssi-leftButtons"></div><div id="ssi-rightButtons" class="ssi-rightButtons"></div></div>'}})(jQuery);
(function(e){var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};Ss_input.tools={dirname:function(a){return a.replace(/\\/g,"/").replace(/\/[^\/]*\/?$/,"")},getExtension:function(a){return a.split(".").pop().toLowerCase()},basename:function(a){return a.replace(/\\/g,"/").replace(/.*\//,"")},parseDate:function(a){a=a.match(/(\d+)/g);return new Date(a[0],a[1]-1,a[2],a[3],a[4])},template:function(a,b){var c;try{return c="var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+
a.replace(/[\r\t\n]/g," ").replace(/'(?=[^#]*#>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<#=(.+?)#>/g,"',$1,'").split("<#").join("');").split("#>").join("p.push('")+"');}return p.join('');",(new Function("obj",c))(b)}catch(f){c=f.message,console.log("< # ERROR: "+c+" # >"),console.log(f)}},dataReplace:function(a,b){b=b||"data";return'"'+a.replace(/field:\((\w+)\)/g,-1<a.indexOf("condition:(")?""+b+'["$1"]':'"+'+b+'["$1"]+"').replace(/condition:(\(.*\))/g,'"+$1+"')+'"'},getField:function(a){return a.replace(/[\s\S]*field:\((\w+)\)[\s\S]*/,
"$1")},objReplace:function(a,b){return a.replace(/field:\((\w+)\)/g,((b||"data")+'["$1"]').replace(/condition:(\(.*\))/g,'"+$1+"'))},fieldReplace:function(a,b){return a.replace(/field:\((\w+)\)/g,(b||"data")+'["$1"]')},arrayValuesInArray:function(a,b){a=this.toArray(a);for(var c=[],f=0,g=a.length;f<g;f++)a[f]&&-1===e.inArray(a[f],b)&&c.push(a[f]);return c},arrayValueInArray:function(a,b){for(var c=0,f=a.length;c<f;c++)if(a[c]&&-1!==e.inArray(a[c],b))return!0;return!1},keyExists:function(a,b){a=this.toArray(a);
for(var c=[],f=0,e=a.length;f<e;f++)a[f]&&!b.hasOwnProperty(a[f])&&c.push(a[f]);return c},getDate:function(){var a=new Date,b=a.getMonth()+1,c=a.getDate();return a.getFullYear()+"-"+(2>(""+b).length?"0":"")+b+"-"+(2>(""+c).length?"0":"")+c},urlUnion:function(a,b){var c=a.length-1;"/"!=a[c]&&"/"!=b[0]?a+="/":"/"===a[c]&&"/"===b[0]&&(b=b.substr(1));return a+b},cachedImage:function(a){var b=document.createElement("img");b.src=a;return b.complete||0<b.width+b.height},cutFileName:function(a,b,c){"undefined"===
typeof b&&(b="");"undefined"===typeof c&&(c=10);if(!(4>c)){var f=b.length;return a.length-2>c?(a=a.substring(0,c),a=a.substring(0,a.length-f),a+"..."+b):a}},toArray:function(a){a instanceof Array||(a=[a]);return a},findKey:function(a,b){for(var c in b)try{if(b[c]===a)return c}catch(f){}},findByKey:function(a,b,c){for(var f=0,e=a.length;f<e;f++)if(a[f][b]==c)return a[f];return!1},editUrl:function(a,b,c){if(""===b)return a.replace(c,"");0>a.indexOf(b)&&(a=this.urlUnion(b,a));return a},removeMirrorValues:function(a){var b;
do{b=!1;for(var c=0;c<a.length;c++)a[c]===a[c+1]&&(a.splice(c,1),b=!0)}while(1==b)},arraySum:function(a){for(var b=0,c=0;c<a.length;c++)b+=a[c];return b},loadImage:function(a,b,c){a=a||e();if(b&&"undefined"!=b)if(Ss_input.tools.cachedImage(b))a.css("background-image",'url("'+b+'")');else{var f=e('<div class="ssi-loadingIcon ssi-itemLoader"></div>');a.append(f);e("<img/>").attr("src",b).load(function(){e(this).remove();f.remove();"function"===typeof c?c(!0):a.css("background-image",'url("'+b+'")')}).error(function(){e(this).remove();
f.remove();"function"===typeof c?c(!1):a.css("background-image",'url("'+b+'")');a.parents(".ssi-itemWrapper").addClass("ssi-empty")})}else a.parents(".ssi-itemWrapper").addClass("ssi-empty")},escape:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},escapeHtml:function(a){return String(a).replace(/[&<>"'\/]/g,function(a){return b[a]})},removeObjFromArray:function(a,b,c){for(var f=0;f<a.length;f++)if(a[f][b]===c){a.splice(f,1);break}},getFirstKey:function(a){for(var b in a)return b},
sanitizeInput:function(a){a=a.replace(/[^a-z0-9\u00e1\u00e9\u00ed\u00f3\u00fa\u00f1\u00fc \.,_-]/gim,"");return a.trim()},removeFromArray:function(a,b){b=this.toArray(b);for(var c=0,f=b.length;c<f;c++)for(var e=0,h=a.length;e<h;e++)a[e]===b[c]&&a.splice(e,1)},removeByKey:function(a,b){b=this.toArray(b);for(var c=0;c<b.length;c++)delete a[b[c]]},tooltip:function(a,b,c){a=e(a);(b=b||a.data("title"))||(b=a.attr("title"));if(b){var f=e('<div class="ssi-fadeOut ssi-fade ssi-tooltipText">'+b+"</div>").insertBefore(a);
a.one("mouseleave",function(){f.remove()});if(c)return f;f.css({top:a.position().top-f.height()-12,left:a.position().left}).removeClass("ssi-fadeOut");return f}},getDataUri:function(a,b){var c=new Image;c.setAttribute("crossOrigin","anonymous");c.onload=function(){var a=document.createElement("canvas");a.width=this.naturalWidth;a.height=this.naturalHeight;a.getContext("2d").drawImage(this,0,0);b(a.toDataURL("image/png"))};c.src=a}};String.prototype.isFile=function(a){return a?-1<a.indexOf(this.split("/").pop().split(".").pop()):
1<this.split("/").pop().split(".").length};String.prototype.fixUrl=function(){var a=this;"/"!==a[this.length-1]&&(a+="/");return a};String.prototype.replaceText=function(){for(var a=Array.apply(null,arguments),b=this,c=0;c<a.length;c++)b=b.replace("$"+(c+1),a[c]);return b};e("body").on("mouseenter",".ssi-tooltip",function(a){Ss_input.tools.tooltip(a.currentTarget)}).on("mouseover","div.ssi-dropDownWrapper .parent",function(a){e(a.currentTarget).children("ul").addClass("ssi-show");e(a.currentTarget).closest("ul").css("overflow",
"visible")}).on("mouseout","div.ssi-dropDownWrapper .parent,.ssi-dropOptions li>a",function(a){e(a.currentTarget).children("ul").removeClass("ssi-show");e(a.currentTarget).closest("ul").css("overflow","")})})(jQuery);
(function(e){Ss_input.selectionMode=[];Ss_input.selection=[];Ss_input.modePlugins.selection=Ss_input.Plugin.extend({type:"corePlugins",defaults:{selectionMode:"singleSelection",excludeItems:"",defaultValue:"",inputName:"",template:"",selectionField:"",modeOptions:{}},init:function(){this.selectionMode=new Ss_input.selectionMode[this.options.selectionMode](this.ssi,this.setModeOptions());this.selectionMode.selection=this;this.pluginNames=[];for(var b in Ss_input.selection)this.pluginNames.push(b);
this.selectionMode.init();this.setEvents().setHandlers()},setEvents:function(){var b=this.ssi,a=this;b.$element.on("showAction",function(){b.pluginInit(a.pluginNames,Ss_input.selection);b.$content.on("click.ssi",".ssi-canSelect",function(d){d.preventDefault();if(!d.ctrlKey){var c=e(d.target);c.is("a")||c.parent().is("a")||a.selectItem("",b.get$mainElement(e(d.currentTarget)))}});a.ssi.$element.on("appendItemAction.ssi",function(b,c){a.options.excludeItems&&"false"!=eval(Ss_input.tools.dataReplace(a.options.excludeItems,
"item.data"))||c.$element.find(".ssi-selectable").addClass("ssi-canSelect")}).on("infoShowAction.ssi",function(d,c){c.find(".ssi-selectable").click(function(d){a.selectItem("",b.get$mainElement(e(d.currentTarget)))})})});return this},setModeOptions:function(){var b={};this.options.defaultValue&&(b.defaultValue=this.options.defaultValue);this.options.selectionField&&(b.selectionField=this.options.selectionField);this.options.inputName&&(b.inputName=this.options.inputName);this.options.template&&(b.template=
this.options.template);return e.extend({},this.options.modeOptions,b)},setHandlers:function(){this.infoHandler();return this},selectItem:function(b,a,d){this.selectionMode.pickData(b,a,d);return this},infoHandler:function(){Ss_input.handlers.info=Ss_input.Handler.extend({template:{imagePreview:'<div class="ssi-imagePreview"></div>'},defaults:{excludeItems:'condition:(field:(mimeType)=="directory")'},extend:{handleData:function(b){for(var a=0,d=b.length;a<d;a++){var c=this.ssi.plugins.templateManager.getTemplate(b[a],
" ",eval(Ss_input.tools.dataReplace(this.ssi.plugins.scan.options.displayImage,"dataList[i]")),"icons");b[a]=e.extend({preview:c},b[a])}}}});return this},getSelectedInfo:function(b,a,d){try{var c=this.ssi,f;if(d)return f={displayImage:b,selection:b,displayName:Ss_input.tools.basename(b)},c.$element.trigger("silentSelectionAction.ssi",[f]),f;b=b||a.attr("data-ID");a=a||c.get$mainElementById(b);var e=c.plugins.scan,h,k,l,m=a.data("info");m||(m=c.get$mainElementById(b).data("info"));e&&(h=m[e.options.titleField],
l=eval(Ss_input.tools.dataReplace(e.options.displayImage,"info")));k=this.options.selectionField?m[this.options.selectionField]:b;f={displayName:h?Ss_input.tools.escapeHtml(h):Ss_input.tools.basename(b),selection:k,displayImage:l};c.$element.trigger("selectionAction.ssi",[f]);return f}catch(n){return{displayName:h?Ss_input.tools.escapeHtml(h):Ss_input.tools.basename(b),selection:k||b,displayImage:l||b}}}})})(jQuery);
(function(e){function b(a){var b=e(a.options.content).eq(0).find(".ssi-radioGroup");a=0;for(var c=b.length;a<c;a++)(function(a){b.eq(a).find("input").attr("name",function(b,d){e(this).attr("name",d.replace(/\[[0-9]*]/,"["+a+"]"))})})(a)}Ss_input.selectionMode.multiSelection=Ss_input.Plugin.extend({template:{inputField:"<td><#=input#></td>",vertical:{wrapper:'<table class="ssi-selectedItemWrapper  <#=className#> ssi-multiTable"><tr><th></th><# for (var i = 0, inputLength = inputs.length; i<inputLength; i++) { var input=inputs[i]; #><th><#= input.label #></th><#  } #><th></th></tr></table>',
item:'<tr data-ID="<#=id#>" <#=(dataCollection?"data-collection="+dataCollection:"")#>  class="ssi-removable  ssi-pickItem ssi-vertical <#=className#>"><td class="ssi-imgPosition"><div class="ssi-selectionPreview" style="background-image:url(\'<#=displayImage#>\')"></div><div class="ssi-itemName"><#=displayName#></div></td><#=inputs#><td class="ssi-btnPosition">\x3c!--<#if(!className){#><a href="<#= displayImage #>" data-ssi_imgGroup="selectedImages<#=uniqueId#>" class="ssi-imgPreview ssi-imgBox"><div class="icon ssi-imgBoxIcon"></div></a><#}#>--\x3e<a href="#" class="ssi-removeChoice"><div class="icon ssi-removeIcon"></div></a></td><input type="hidden" name="<#=inputName#>" value="<#= selectionField #>"/></tr>'},
displayFiles:'<div id="ssi-displayFilesWrapper"><button id="ssi-clearSelected" data-title="<#=selectedBtn#>" class="ssi-clearBtn ssi-mBtn ssi-tooltip"><div class="icon ssi-cleanBtn"></div></button><div data-title="<#=selectedTooltip#>" class="ssi-tooltip ssi-displayFiles"><#=selected#></div><button id="ssi-clearChecked" data-title="<#=checkedBtn#>" class="ssi-mBtn ssi-clearBtn ssi-tooltip"><div class="icon ssi-cleanBtn"></div></button><div id="ssi-displayCheckedFiles" data-title="<#=checkedTooltip#>" class="ssi-displayFiles ssi-tooltip"><#=checked#></div></div>'},
defaults:{template:"vertical",className:"",duplicate:!0,inputName:"files[]",selectionField:"id",maxItems:0,content:"",input:[],defaultValue:""},init:function(){this.checkedItems=[];this.selected=[];this.silentItems=[];this.checkedFilesCount=this.selectedFilesCount=0;this.ssi.$element.addClass("ss-input ssi-multiPickMode");e(this.options.content).eq(0).html(Ss_input.tools.template(this.template[this.options.template].wrapper,{className:this.options.className,inputs:this.options.input}));if(this.options.defaultValue){var a=
this.options.defaultValue.length;0!==this.options.maxItems&&a>this.options.maxItems&&(a-=this.options.maxItems);for(var b=0;b<a;b++)this.checkedItems.push(this.options.defaultValue[b].value);this.selectItems(this.options.defaultValue)}this.options.maxItems&&3<(Math.log(this.options.maxItems)*Math.LOG10E+1|0)&&(this.options.maxItems=9999);this.setButtons();this.setEvents();return this},setButtons:function(){var a=this;this.ssi.addButton([{label:this.translate("insert"),className:"ssi-mBtn ssi-insertBtn disabled",
closeAfter:!0,enableAfter:!0,method:function(){a.selectItems();"modalWindow"!=a.ssi.options.showTo&&a.reset()}},{closeAfter:!0,label:this.translate("cancel"),className:"ssi-mBtn ssi-cancel"}],"menuButton",["bottom"])},setEvents:function(){var a=this,b=this.ssi;b.$element.on("showAction",function(){a.options.duplicate||(a.checkItem(a.selected),a.checkedFilesCount=a.selected.length);b.$content.find("#ssi-menuButtons").after(Ss_input.tools.template(a.template.displayFiles,{selected:a.options.maxItems?
'<span id="ssi-displaySelectedFiles">'+a.selectedFilesCount+"</span>/"+a.options.maxItems:'<span id="ssi-displaySelectedFiles">'+a.selectedFilesCount+"</span>",checked:a.checkedFilesCount,selectedTooltip:a.translate("selectedTooltip"),checkedTooltip:a.translate("checkedTooltip"),checkedBtn:a.translate("checkedBtn"),selectedBtn:a.translate("selectedBtn")}));b.$content.on("click","#ssi-clearChecked",function(){a.clearChecked();return!1}).on("click","#ssi-clearSelected",function(){a.clearSelected();
return!1});b.$element.on("echoItemsAction.ssi silentEchoItemsAction.ssi",function(){a.setMChecked()}).on("closeAction.ssi",function(){a.checkedFilesCount=0;a.checkedItems=[]}).on("appendItemAction.ssi",function(b,d){-1!==e.inArray(d.data.path,a.checkedItems)&&a.addCheck("",d.$element.find(".ssi-canSelect"))}).on("infoCloseAction.ssi",function(){a.setMChecked()}).on("infoShowAction.ssi",function(b,d){a.setMChecked(d)}).on("beforeChangeCollectionAction.ssi",function(){a.selectItems();a.reset()}).on("removeItemAction.ssi",
function(a,b){e.inArray(b,"thisS.checkedItems")})});e(this.options.content).eq(0).on("click",".ssi-removeChoice",function(b){try{a.removeSelectedImage(b),a.selectedFilesCount--,a.ssi.$content.find("#ssi-displaySelectedFiles").html(a.selectedFilesCount)}catch(d){}return!1})},reset:function(){this.checkedFilesCount=0;this.checkedItems=[];this.options.duplicate?(this.ssi.$content.find("#ssi-displayCheckedFiles").html("0"),this.ssi.$content.find(".ssi-checked").removeClass("ssi-checked").find(".ssi-checkItem").remove()):
(this.checkItem(this.selected),this.checkedFilesCount=this.selected.length);this.ssi.$content.find("#ssi-displaySelectedFiles").html(this.selectedFilesCount)},selectItems:function(a){var b=e(this.options.content).eq(0),c,f=[],g="";this.options.duplicate||this.duplicate();for(var h=this.checkedItems.length,k=0;k<h;k++){a&&(g=a[k].input||[]);c=this.checkedItems[k];if("undefined"===typeof this.radioButtons||this.radioButtons)for(var l=0,m=this.options.input.length;l<m;l++)"radio"===this.options.input[l].type&&
(this.radioButtons=!0,this.options.input[l].name=this.options.input[l].name.replace(/\[[0-9]*]/,"["+this.selectedFilesCount+"]")),this.radioButtons||(this.radioButtons=!1);if(c=this.getTemplate(c,g,!!this.silentItems[k]))f.push(c),this.selectedFilesCount++}b.children(".ssi-selectedItemWrapper").append(f);this.checkedItems=[]},getTemplate:function(a,b,c){var e="",g="",h=a.split(/:(.+)?/,2);c=c||!!b;a=h[1]||a;for(var k=0,l=this.options.input.length;k<l;k++)e+=Ss_input.tools.template(this.template.inputField,
{input:(new Ss_input.Input(this.options.input[k],b[k]))[0].outerHTML});b=this.selection.getSelectedInfo(a,"",c);b.displayImage||(g="ssi-empty");return Ss_input.tools.template(this.template[this.options.template].item,{inputName:this.options.inputName,selectionField:b.selection,id:a,className:g,displayImage:b.displayImage,uniqueId:this.ssi.uniqueId,inputs:e,displayName:b.displayName,dataCollection:h[1]?h[0]:""})},pickData:function(a,b,c){if(!this.options.duplicate&&c&&-1<e.inArray("/:"+a,this.checkedItems))return this.ssi.notify("error",
this.translate("existInListError")),this;var f;f=b?e(b):this.ssi.get$mainElementById(a);a=this.ssi.currentCollection.id+":"+(a||b.attr("data-ID"));if(!a)return console.log("Cant't find the id."),this;if(f.hasClass("ssi-checked"))this.checkedFilesCount--,this.removeCheck("",f),this.unCheckItem(a);else{if(0!==this.options.maxItems&&(this.options.duplicate?this.selectedFilesCount+this.checkedFilesCount:this.checkedFilesCount)===this.options.maxItems){this.ssi.notify("error",this.translate("limitError").replaceText(this.options.maxItems.toString()));
return}this.checkedFilesCount++;this.addCheck("",f);this.checkItem(a,c)}this.ssi.$content.find("#ssi-displayCheckedFiles").html(this.checkedFilesCount);return this},setMChecked:function(a){var b=this.ssi,c,e;a=a||b.$content;var g=this.checkedItems.filter(function(a){e=a.split(/:(.+)?/,2);return e[0]==b.currentCollection.id||!e[1]});a.find("span.ssi-checkItem").remove();for(var h=0,k=g.length;h<k;h++)e=g[h].split(/:(.+)?/,2),c=e[1]||e[0],this.addCheck(c,"",a)},removeCheck:function(a,b){var c;c=b?e(b):
this.ssi.get$mainElementById(a);c.removeClass("ssi-checked");c.find(".ssi-checkItem").remove()},removeSelectedImage:function(a){a=e(a.target).parents(".ssi-pickItem");if(!this.options.duplicate){var d=a.attr("data-ID"),c=a.attr("data-collection");Ss_input.tools.removeFromArray(this.selected,c?c+":"+d:d)}a.remove();this.radioButtons&&b(this)},addCheck:function(a,b,c){(b?e(b):this.ssi.get$mainElementById(a,c)).append('<span class="icon ssi-checkItem"></span>').addClass("ssi-checked")},checkItem:function(a,
b){a instanceof Array?this.checkedItems=this.checkedItems.concat(a):(b&&(this.options.duplicate?this.silentItems[this.checkedItems.length]=b:this.silentItems[Ss_input.tools.arrayValuesInArray(this.checkedItems,this.selected).length]=b),this.checkedItems.push(a));this.ssi.$content.parents(".ssi-mainModal").find(".ssi-insertBtn").removeClass("disabled").prop("disabled",!1)},unCheckItem:function(a){a=a.split(/:(.+)?/,2);a=a[1]||a[0];Ss_input.tools.removeFromArray(this.checkedItems,a);0===this.checkedItems.length&&
e(".ssi-insertBtn").addClass("disabled").prop("disabled",!0)},duplicate:function(){var a=Ss_input.tools.arrayValuesInArray(this.checkedItems,this.selected),b=Ss_input.tools.arrayValuesInArray(this.selected,this.checkedItems),c,f;this.selected=this.checkedItems.slice();for(var g=e(this.options.content).eq(0).children(".ssi-selectedItemWrapper"),h=0;h<b.length;h++)c=b[h].split(/:(.+)?/,2),f=c[1]||c[0],g.find('.ssi-pickItem[data-ID="'+f+'"]').each(function(){var a=e(this),b=a.attr("data-collection");
b&&b!=c[0]||a.remove()}),this.selectedFilesCount--;this.checkedItems=a},clearChecked:function(){var a=this.ssi.$content;a.find(".ssi-checkItem").remove();a.find(".ssi-checked").removeClass("ssi-checked");a.find("#ssi-displayCheckedFiles").html(0);this.duplicate||a.find("#ssi-displaySelectedFiles").html(this.selectedFilesCount-this.checkedFilesCount);this.checkedFilesCount=0;this.checkedItems=[];a.parents(".ssi-mainModal").find(".ssi-insertBtn").addClass("disabled").prop("disabled",!0)},clearSelected:function(){e(this.options.content).eq(0).find(".ssi-pickItem").remove();
this.ssi.$content.find("#ssi-displaySelectedFiles").html(this.duplicate?0:this.checkedFilesCount);this.selectedFilesCount=0;this.selected=[]}})})(jQuery);
(function(e){Ss_input.selectionMode.singleSelection=Ss_input.Plugin.extend({template:{imgHolder:'<table class="ssi-pickItem ssi-selectedItemWrapper ssi-itemWrapper"><tr><td class="ssi-imgHolder"><div class="ssi-selectionPreview"><div id="ssi-actions">\x3c!--<a href="#" id="ssi-pickedImg" class="ssi-imgBox ssi-imgPreview ssi-hidden"><div class="icon ssi-imgBoxIcon"></div></a>--\x3e<a href="#" class="ssi-removeChoice ssi-hidden"><div class="icon ssi-removeIcon"></div></a></div><div id="ssi-imgChoose" class="ss-input ssi-pick ssi-selectionPreview"></div></div></td></tr><tr><td><div class="ssi-itemName"></div></td></tr><#=input#></table>',textHolder:'<div class="ssi-pickItem ssi-selectedItemWrapper ssi-itemWrapper"><span class="ssi-textPreview"></span><#= input #></div><a href="#" class="ssi-removeChoice"><div class="icon ssi-removeIcon"></div></a>',
input:'<input type="<#=(type||"text")#>" placeholder="<#=placeholder#>" class="ssi-dataUrlName" value="<#=value#>" name="<#=name#>" />',mainInput:'<input type="hidden" class="ssi-mainInput" name="<#=name#>"/>'},defaults:{template:"imgHolder",defaultValue:"",selectionField:"",inputName:""},init:function(){var b=this.ssi;if(b.$element.is("div"))return b.$element.addClass("ssi-"+this.options.template),b.$element.append(Ss_input.tools.template(this.template[this.options.template],{input:'<input type="hidden" class="ssi-mainInput" name="'+
this.options.inputName+'"/>'})),this.options.defaultValue&&this.pickData(this.options.defaultValue,"",!0),this.setEvents(),this;console.log("The targeted element is not a div.")},setEvents:function(){var b=this;this.ssi.$element.on("click",".ssi-removeChoice",function(a){a.preventDefault();b.removeSelectedImage();return!1}).on({mouseenter:function(){e(this).find("#ssi-actions").fadeIn(200)},mouseleave:function(){e(this).find("#ssi-actions").fadeOut(200)}},".ssi-selectionPreview");return this},pickData:function(b,
a,d){var c=e(a);b=b||c.attr("data-ID");if(!b)return console.log("Cant't find the id."),this;b=this.selection.getSelectedInfo(b,a,d);a=this.ssi;ssi_modal.closeAll();a.$element.find("a").removeClass("ssi-hidden");a.$element.find(".ssi-itemName").html(b.displayName);a.$element.find(".ssi-itemWrapper").removeClass("ssi-empty");Ss_input.tools.loadImage(a.$element.find("#ssi-imgChoose"),b.displayImage);a.$element.find(".ssi-mainInput").val(b.selection);return this},removeSelectedImage:function(){var b=
this.ssi;b.$element.find(".ssi-itemWrapper").removeClass("ssi-empty");b.$element.find("#ssi-imgChoose").css("background-image","");b.$element.find("a").addClass("ssi-hidden");b.$element.find(".ssi-itemName").html("");b.$element.find("#"+b.options.inputName).val("");return this}})})(jQuery);
(function(e){Ss_input.selectionMode.textEditorSelection=Ss_input.Plugin.extend({defaults:{method:function(){}},init:function(){this.ssi.mode="textEditorSelect";this.ssi.$element.addClass("ss-input");return this},pickData:function(b,a){var d=this.selection.getSelectedInfo(b,a).selection;"function"===typeof this.options.method&&this.options.method(d);ssi_modal.closeAll();return this}})})(jQuery);
(function(e){Ss_input.fileSystem=[];Ss_input.fileSystemHandlers=[];Ss_input.storageTypes.fileSystem=Ss_input.Plugin.extend({type:"corePlugins",defaults:{allowed:["jpg","jpeg","png"],scriptsPath:"",rootPath:"",responseValidation:{validationKey:"type",resultKey:"msg",success:"success",error:"error"}},constructor:function(b,a){this.options=e.extend({},this.defaults,a);this.ssi=b;b.handlersGroup="fileSystemHandlers";this.pluginNames=[];b.options.responseValidation=this.options.responseValidation;for(var d in Ss_input.fileSystem)this.pluginNames.push(d);
this.setEvents()},setEvents:function(){var b=this,a=this.ssi;this.ssi.$element.on("showAction",function(){b.scanDir(b.options.rootPath+"/");b.ssi.pluginInit(b.pluginNames,Ss_input.fileSystem);b.ssi.$content.on("click.ssi",".directory",function(d){var c=e(d.target);if(!(d.ctrlKey||c.is("a")||c.parent().is("a")))return d=a.getId(c),b.scanDir(d),!1})}).on("removeItemAction.ssi",function(a,c){c.isFile(b.options.allowed)||e(this).trigger("removeCollectionAction.ssi",[c.replace(b.options.rootPath,"")])});
return this},getPath:function(b,a){a=a||"relative";var d=Ss_input.tools.urlUnion(this.options.rootPath+(this.ssi.currentCollection.id||"/"),b||"");return"relative"===a?d:Ss_input.tools.urlUnion(d=document.location.protocol+"//"+window.location.hostname,d)},scanDir:function(b){b=b.replace(this.options.rootPath,"");this.ssi.openCollection(b,this.options.scriptsPath+"/scanAction.php",{currentDir:this.options.rootPath+b})}})})(jQuery);
(function(e){var b=!1;Ss_input.fileSystem.history=Ss_input.Plugin.extend({template:{back:'<a href="#" id="ssi-backHistory" class="disabled ssi-historyBack"><div class="icon ssi-backIcon"></div></a>',fw:'<a href="#" id="ssi-fwHistory" class="ssi-historyFw disabled"><div class="icon ssi-fwIcon"></div></a>',up:'<a href="#" id="ssi-historyUp" class="ssi-historyUp disabled"><div class="icon ssi-upIcon"></div></a>'},init:function(){this.backHistory=[];this.fwHistory=[];this.setButtons();this.setEvents()},
setButtons:function(){var a=this,b=e(this.template.back),c=e(this.template.fw),f=e(this.template.up),g=this.ssi;b.on("click",function(b){a.historyBack(e(this));return!1});c.on("click",function(b){0<a.fwHistory.length&&a.historyFw(e(this));return!1});f.on("click.ssi",function(b){g.readOnlyMode?a.historyBack():a.ssi.fileSystem.scanDir(Ss_input.tools.dirname(g.currentCollection.id));return!1});g.$content.find(".ssi-topBarButtonArea").append(b,c,f)},setEvents:function(){var a=this,d=this.ssi;d.$element.on("echoItemsAction.ssi",
function(){"/"!==d.currentCollection.id?a.ssi.$content.find("#ssi-historyUp").removeClass("disabled"):a.ssi.$content.find("#ssi-historyUp").addClass("disabled");if(b)b=!1;else{var c=a.backHistory.length;0<c&&"/"!==d.currentCollection.id&&a.ssi.$content.find("#ssi-backHistory").removeClass("disabled");a.backHistory[c-1]===d.currentCollection.id||d.readOnlyMode||(20<=c&&a.backHistory.shift(),a.backHistory.push(d.currentCollection.id),a.fwHistory=[],d.$content.find("#ssi-fwHistory").addClass("disabled"))}}).on("closeAction.ssi",
function(){a.backHistory=["/"];a.fwHistory=[];b=!1}).on("removeCollectionAction.ssi",function(b,d){a.removeFromHistory(d)})},historyFw:function(a){b=!0;a=a||this.ssi.$content.find("#ssi-fwHistory");var d=this.fwHistory.length;this.ssi.$content.find("#ssi-backHistory").removeClass("disabled");1===d&&a.addClass("disabled");a=this.fwHistory[d-1];this.ssi.fileSystem.scanDir(a);this.backHistory.push(a);this.fwHistory.splice(d-1,1)},historyBack:function(a){a=a||this.ssi.$content.find("#ssi-backHistory");
b=!0;var d=this.ssi,c=this.backHistory.length;1>c||(2==c&&a.addClass("disabled"),d.readOnlyMode?(d.fileSystem.scanDir(this.backHistory[c-1]),1===c&&a.addClass("disabled")):2>c?a.addClass("disabled"):(d.fileSystem.scanDir(this.backHistory[c-2]),this.fwHistory.push(this.backHistory[c-1]),this.backHistory.splice(c-1,1),d.$content.find("#ssi-fwHistory").removeClass("disabled")))},removeFromHistory:function(a){0<this.backHistory.length&&(Ss_input.tools.removeFromArray(this.backHistory,a),Ss_input.tools.removeMirrorValues(this.backHistory),
2>this.backHistory.length&&this.ssi.$content.find("#ssi-backHistory").addClass("disabled"));0<this.fwHistory.length&&(Ss_input.tools.removeFromArray(this.fwHistory,a),Ss_input.tools.removeMirrorValues(this.fwHistory),1>this.fwHistory.length?this.ssi.$content.find("#ssi-fwHistory").addClass("disabled"):1==this.fwHistory.length&&this.fwHistory[0]==this.ssi.currentCollection.id&&(this.fwHistory=[],this.ssi.$content.find("#ssi-fwHistory").addClass("disabled")))},cleanHistory:function(){this.fwHistory=
[];this.backHistory=[]}})})(jQuery);
(function(e){Ss_input.fileSystem.path=Ss_input.Plugin.extend({template:{pathBar:'<div style="float:left" id="ssi-loading"></div><div class="ssi-homePath" style="float:left"><a href="#" data-ID="/" class="<#=className#> ssi-path"><div class="icon ssi-rootIcon"></div><#=rootName#></a></div><div class="ssi-currentPath"></div>',pathItem:'<div class="ssi-pathItemWrapper"><div class="icon ssi-breadcrumbsIcon"></div><a href="#" data-ID="<#=dataHref#>" class="<#=className#> ssi-path"><#=pathName#></a></div>'},defaults:{className:"",
rootName:"root"},init:function(){this.ssi.$content.find("#ssi-topBar").append(Ss_input.tools.template(this.template.pathBar,{className:this.options.className,rootName:this.options.rootName}));this.setEvents()},setEvents:function(){var b=this;this.ssi.$content.on("click.ssi",".ssi-path",function(){var a=e(this);if(a.hasClass("ssi-alias"))return!1;b.ssi.fileSystem.scanDir(a.attr("data-ID"));return!1});this.ssi.$element.on("beforeEchoItemsAction.ssi",function(a){a=b.ssi.currentCollection;a.id&&b.setPath(a.alias||
b.ssi.currentCollection.id,a.href)})},setPath:function(b,a){var d=this.ssi.$content.find(".ssi-currentPath");if(a)d.html(Ss_input.tools.template(this.template.pathItem,{dataHref:a,className:"ssi-alias",pathName:b}));else{var c=b.split("/"),f="",g=[],h=c.length,k=d.outerWidth()-100,l=0;d.html("");for(var m=0;m<h;m++)if(f!=b&&(f=Ss_input.tools.urlUnion(f,c[m])),"/"!=c[m]&&""!=c[m]){var n=Ss_input.tools.template(this.template.pathItem,{dataHref:f,className:this.options.className,pathName:c[m]});g.push(n);
n=e(n);l+=n.hide().appendTo(d).outerWidth();n.remove()}for(m=0;l>k&&0<k&&m<c.length;)g.shift(),n=e(Ss_input.tools.template(this.template.pathItem,{dataHref:f,className:this.options.className,pathName:c[m+1]})),l-=n.hide().appendTo(d).outerWidth(),n.remove(),m++;g.length&&d.html(g)}}})})(jQuery);
(function(e){Ss_input.database=[];Ss_input.databaseHandlers=[];Ss_input.storageTypes.database=Ss_input.Plugin.extend({type:"corePlugins",template:{title:'<h4 id="ssi-collectionTitle"></h4>',topBar:'<div class="ssi-topButtonsWrapper"><div id="ssi-topButtons" class="ssi-topButtons"></div></div>',form:'<form id="ssi-formData"><table><#=formItem#></table></form>',formItem:'<tr><th><label for="<#=inputId#>" class="<#=labelClass#>"><#=label#></label></th><td><#=input#></td></tr>'},defaults:{translateFields:!1,
sendNullValues:!1,responseValidation:!1,baseCollection:"",collections:{}},init:function(){this.ssi.options.translateFields=this.options.translateFields;this.ssi.options.responseValidation=this.options.responseValidation;this.ssi.handlersGroup="databaseHandlers";this.currentCollection="";this.pluginNames=[];for(var b in Ss_input.database)this.pluginNames.push(b);this.setCurrentCollection();this.setEvent()},setEvent:function(){var b=this,a=this.ssi;a.$element.on("earlyShowAction",function(){b.setStaticHandlers().setSchema()}).on("showAction",
function(){a.$content.find("#ssi-topBar").append(b.template.title);a.pluginInit(b.pluginNames,Ss_input.database);!1!==b.options.baseCollection&&b.scanCollection(b.currentCollection.title);a.$content.on("click.ssi",".ssi-collectionScan .ssi-listAnchor",function(d){if(0==a.readyState)return!1;d=e(d.currentTarget).text();if(b.currentCollection.title==d)return!1;b.scanCollection(d);return!1});a.$element.on("beforeScanAction.ssi",function(a,c){e.isEmptyObject(b.currentCollection.schema)&&(b.schemaAutoGenerator(c.data).currentCollection.schema=
b.options.collections[b.currentCollection.title].schema,b.setSchema().changeSchema())})}).on("silentSelectionAction.ssi",function(a,b){b.displayImage.isFile(["jpg","png","jpeg"])||(b.displayImage="")});return this},setCurrentCollection:function(){try{this.options.baseCollection&&(this.currentCollection=this.options.collections[this.options.baseCollection]);if(!this.currentCollection){var b=Ss_input.tools.getFirstKey(this.options.collections);this.currentCollection=this.options.collections[b]||{}}this.currentCollection.title=
this.options.baseCollection||b}catch(a){}},scanCollection:function(b){this.currentCollection=this.options.collections[b];this.currentCollection.title=b;this.ssi.$element.trigger("beforeChangeCollectionAction.ssi");this.setTitle(this.currentCollection.title);this.currentCollection.schema&&(this.currentCollection.isSet||this.setSchema(),this.changeSchema());this.ssi.plugins.scan.scanCollection(b,this.currentCollection.baseUrl.replace("/:id",""))},setTitle:function(b){try{this.ssi.$content.find("#ssi-collectionTitle").html(b)}catch(a){}},
setSchema:function(){var b=this.currentCollection,a=b.schema;b.search||(b.search=[]);b.sort||(b.sort=[]);b.details||(b.details=[]);var d=b.search.length,c=b.sort.length,f=b.details.length;if(a&&!e.isEmptyObject(a)){for(var g in a){var h=a[g];!b.displayName&&h.displayName&&(b.displayName=g);!b.displayImage&&h.displayImage&&(b.displayImage="field:("+g+")");!b.selectionField&&h.selectionField&&(b.selectionField=g);!b.id&&h.id&&(b.id=g);f||0!=h.details||b.details.push(g);!d&&h.search&&b.search.push(g);
!c&&h.sort&&b.sort.push(g)}b.sort.length||(b.sort=[Ss_input.tools.getFirstKey(a)]);b.isSet=!0}this.setHandlers();return this},changeSchema:function(){var b=this.currentCollection;this.ssi.$element.trigger("changeSchemaAction.ssi",{displayName:b.displayName,id:b.id,displayImage:b.displayImage||"",url:b.baseUrl,sort:b.sort,search:b.search,details:b.details});return this},schemaAutoGenerator:function(b){b=b[0];if(!b)return console.log("Cannot create schema from empty collection"),this;var a=-1,d,c=this.currentCollection,
e=this.options.collections[c.title].schema={},g;for(g in b)if(b.hasOwnProperty(g)){a++;d=typeof b[g];e[g]={type:d};"object"==d&&b[g]instanceof Array&&(e[g].type="array");"string"==d&&10<b[g].split(" ").length&&(e[g].inputType="textarea");3>a&&(e[g].search=!0,e[g].sort=!0);if(!c.id&&(d=/(?:[a-z]*(?:_id|id_|Id|-id|id-)[a-z]*)|^(?:id|ID)(?:$|[A-Z]+.*)/,d.test(g))){e[g].id=!0;continue}if(!c.displayName&&(d=/(?:[a-z]*(?:_title|title_|Title|-title|title-|_name|name_|Name|-name|name-)[a-z]*)|^(?:title|name|username|login)(?:$|[A-Z]+.*)/,
d.test(g))){e[g].displayName=!0;continue}c.displayImage||(d=/(?:[a-z]*(?:_image|image_|Image|-image|image-|_img|img_|Img|-img|img-|_avatar|avatar_|Avatar|-avatar|avatar-)[a-z]*)|^(?:image|img|avatar)(?:$|[A-Z]+.*)/,d.test(g)&&(e[g].displayImage=!0))}return this},setHandlers:function(){this.scanHandler().imgBoxHandler().searchHandler().sortHandler().infoBubbleHandler().deleteHandler().selectionHandler().templateManagerHandler();return this},setStaticHandlers:function(){this.sidebarHandler();return this},
templateManagerHandler:function(){Ss_input.databaseHandlers.templateManager=Ss_input.Handler.extend({defaults:{template:"details",excludeFields:this.currentCollection.details}});return this},scanHandler:function(){Ss_input.databaseHandlers.scan=Ss_input.Handler.extend({defaults:{titleField:this.currentCollection.displayName,idField:this.currentCollection.id,displayImage:this.currentCollection.displayImage||""}});return this},selectionHandler:function(){var b=this.ssi.corePlugins.selection;b&&(b.options.selectionField=
this.currentCollection.selectionField);return this},imgBoxHandler:function(){Ss_input.databaseHandlers.imgBox=Ss_input.Handler.extend({defaults:{imageField:this.currentCollection.displayImage}});return this},deleteHandler:function(){Ss_input.databaseHandlers["delete"]=Ss_input.Handler.extend({defaults:{sendId:"inUrl",ajaxOptions:{url:this.currentCollection.baseUrl}}});return this},searchHandler:function(){Ss_input.databaseHandlers.search=Ss_input.Handler.extend({defaults:{deepSearch:!1,searchFields:this.currentCollection.search}});
return this},sidebarHandler:function(){var b=[],a=this.options.collections;if(2>Object.keys(a).length)this.ssi.options.excludePlugin.push("sidebar");else{for(var d in a)a[d].baseUrl&&b.push({name:d,url:a[d].baseUrl,className:"ssi-collectionScan"});Ss_input.databaseHandlers.sidebar=Ss_input.Handler.extend({defaults:{data:b,className:"",resizable:!1,mode:"dropDown"}});return this}},sortHandler:function(){Ss_input.databaseHandlers.sort=Ss_input.Handler.extend({defaults:{sortableFields:this.currentCollection.sort}});
return this},infoBubbleHandler:function(){Ss_input.databaseHandlers.infoBubble=Ss_input.Handler.extend({defaults:{excludeFields:this.currentCollection.details,translateFields:this.options.translateFields}});return this},getForm:function(b){b=b||{};var a={number:"text",string:"text",date:"text","enum":"select","boolean":"select",object:"textarea"},d=this.currentCollection.schema,c,e="",g;for(g in d){var h=d[g];if(0!=h.edit){"undefined"!==typeof b[g]&&(b[g]=b[g].toString());var k=b[g]||h["default"]||
"";c=h.required?" ssi-required":"";"array"==h.type?c+=" ssi-arrayInput":"object"==h.type&&(c+=" ssi-objectInput","object"===typeof k&&(k=JSON.stringify(k)));var l={name:g,id:g,value:k,className:"ssi-inputField"+c,type:h.inputType||a[h.type]},m=l.type;if("date"==h.type&&"now"==h["default"])l.value=Ss_input.tools.getDate();else if("select"==m&&"boolean"==h.type)l.options=[{label:"true",value:"true"},{label:"false",value:"false"}];else if("select"==m)if(h.options){for(var n=[],p=0,q=h.options.length;p<
q;p++){var r=h.options[p];n.push({label:r,value:r})}h.multiple&&(l.multiple=h.multiple);l.options=n}else l.type="text";"text"==m&&100<k.length&&(l.type="textarea");e+=Ss_input.tools.template(this.template.formItem,{label:this.translate(g,this.options.translateFields),labelClass:c,inputId:g,input:(new Ss_input.Input(l))[0].outerHTML})}}return Ss_input.tools.template(this.template.form,{formItem:e})},resetForm:function(){e("#ssi-formData").replaceWith(this.getForm())},getFormData:function(){var b={},
a=this,d=0;e(".ssi-formWindow"+this.ssi.uniqueId).find("#ssi-formData").find(".ssi-inputField").each(function(){var c=e(this);a.checkRequiredFields(c)&&d++;var f=c.val();if(!f&&!a.options.sendNullValues)return!0;c.hasClass("ssi-arrayInput")?f=f.split(","):c.hasClass("ssi-objectInput")&&(f=JSON.parse(f));b[c.attr("name")]=f});return d?!1:b},checkRequiredFields:function(b){var a;try{a=b.val().replace(/ /g,"")}catch(d){a=b.val()}return b.hasClass("ssi-required")&&!a?(b.addClass("ssi-requiredError"),
b.off("focus.ssi"),b.one("focus.ssi",function(){b.removeClass("ssi-requiredError")}),!0):!1},createWindow:function(b,a){var d=this.ssi.addButton(a,"menuButton");b=e.extend({},{content:"",onShow:function(a){a.get$content().find("#ssi-topButtons").append(d)},buttons:[],className:"ssi-formWindow ssi-formWindow"+this.ssi.uniqueId,sizeClass:"auto"},b);b.content=this.template.topBar+b.content;b.buttons.push({label:this.translate("cancel"),className:"ssi-mBtn ssi-cancel",closeAfter:!0});this.ssi.createWindow(b)}})})(jQuery);
(function(e){Ss_input.plugins.search=Ss_input.Plugin.extend({defaults:{deepSearch:{multiple:!1,data:{},ajaxOptions:{}},searchFields:[]},init:function(){this.options.deepSearch&&(this.options.deepSearch=e.extend({},this.defaults,this.options.deepSearch));this.searchKeywords={};this.currentItems="";this.setButtons().setEvents()},resetUi:function(){this.searchKeywords={};this.currentItems="";this.setButtons(this.ssi.$content.find("#ssi-searchButton").parent().empty())},setButtons:function(b){var a=this,
d=this.ssi,c=[],f;0!=this.options.deepSearch&&c.push({label:'<div class="icon ssi-searchMiniIcon"></div>',className:"ssi-inBtn ssi-inSearchBtn",method:function(){a.deepSearch(d.$content.find("#ssi-searchInput").val(),e(this).parent().find("input").hasClass("disabled"))}});var g=[],h=this.options.searchFields.length;1<h&&c.unshift({label:"\u25bc",className:"ssi-inBtn ssi-inSearchBtn ssi-moreInputs",method:function(){var a=e(this),b=a.siblings(".ssi-extraWrapper"),a=a.prev("#ssi-searchInput");a.trigger("input.ssi");
b.hasClass("ssi-slide")?(a.removeClass("disabled"),b.removeClass("ssi-slide")):(a.addClass("disabled").val(""),b.addClass("ssi-slide"));b.children().val("").trigger("change.ssi")}});for(var k=0;k<h;k++)this.searchKeywords[this.options.searchFields[k]]="",g.push(new Ss_input.Input({className:"ssi-searchInput ssi-menuInput ssi-extraInput",placeholder:this.translate(this.options.searchFields[k]),type:"search"})),g[k].data("field",this.options.searchFields[k]).on("input.ssi",function(b){clearTimeout(f);
var c=e(this);13==b.which&&e(this).next().next().trigger("click");a.searchKeywords[c.data("field")]=c.val();f=setTimeout(function(){a.searchDir(Object.keys(a.searchKeywords).map(function(b){return a.searchKeywords[b]}))},300)});d.addButton({label:'<div class="icon ssi-searchIcon"></div>',title:this.translate("search"),id:"ssi-searchButton",keyCode:"",input:{containerClass:"ssi-searchcont",className:"ssi-searchInput ssi-menuInput",placeholder:this.translate("search"),id:"ssi-searchInput",type:"search",
buttons:c},className:"ssi-searchSwitch"},"menuButton",b||["menu"]).find(".ssi-btnContainer").append(e('<div class="ssi-extraWrapper">').append(g));return this},setEvents:function(){var b=this.ssi,a=this,d;b.$content.on("input.ssi","#ssi-searchInput",function(b){clearTimeout(d);13==b.which&&e(this).next().next().trigger("click");var f=e(this);d=setTimeout(function(){a.searchDir(f.val())},300)});b.$element.on("resetAction.ssi changeCollectionAction.ssi",function(){a.searchInProgress&&(a.currentItems=
"",a.searchInProgress=!1,b.$element.find("#ssi-searchButton").next().hide(500),b.$element.find("#ssi-searchInput").val(""))}).on("echoItemsAction.ssi",function(){a.searchInProgress&&a.searchDir(b.$content.find("#ssi-searchInput").val())}).on("beforeEchoItemsAction.ssi",function(b,d){if(!a.options.searchFields.length)for(var e in d.data[0])a.options.searchFields.push(e)}).on("changeSchemaAction.ssi",function(b,d){a.options.searchFields=d.search;a.options.deepSearch&&(a.options.deepSearch.ajaxOptions.url=
d.url.replace("/id"));a.resetUi()});return this},deepSearch:function(b,a){if(a&&0!=this.options.deepSearch.multiple){b={};for(var d in this.searchKeywords)this.searchKeywords[d]&&(b[d]=this.searchKeywords[d])}if(b){var c=this.ssi,f=this;this.prev=c.currentCollection.id;d=e.extend({},this.options.deepSearch.data,"object"===typeof b?b:{keyword:b});d=e.extend({},{data:d,type:"GET"},this.options.deepSearch.ajaxOptions);c.ajaxCall(d,function(a){f.currentItems=[];c.$element.trigger("removeCollectionAction.ssi",
"search540123x");a={alias:f.translate("search"),href:"#",readOnly:!0,id:"search540123x",data:a};c.currentCollection=a;c.$element.trigger("scanAction.ssi",a);c.plugins.scan.echoFiles(a,!0)});return this}},getSearchCondition:function(b,a){a=a||"||";b=Ss_input.tools.toArray(b);for(var d=b.length,c="new RegExp('.*"+b[0]+".*','i')",e=c+".test(field:("+this.options.searchFields[0]+"))",g=1,h=this.options.searchFields.length;g<h;g++)1<d&&(c="new RegExp('.*"+b[g]+".*','i')"),e+=a+c+".test(field:("+this.options.searchFields[g]+
"))";return Ss_input.tools.fieldReplace(e)},searchDir:function(b){var a=this.ssi,d=[],c="||";this.searchInProgress=!!b;if(!b)return this.currentItems.length&&a.plugins.scan.echoFiles({id:a.currentCollection.id,data:this.currentItems}),this.currentItems=[],this;this.currentItems.length||(this.currentItems=a.getPageData());b instanceof Array?c="&&":b=b.toLowerCase();b=this.getSearchCondition(b,c);for(var c=0,e,g=this.currentItems.length;c<g;c++)e=this.currentItems[c],eval(b)&&d.push(e);a.plugins.scan.echoFiles({id:a.currentCollection.id,
data:d},"",!0);return this}})})(jQuery);
(function(e){Ss_input.fileSystem.mkdir=Ss_input.Plugin.extend({permissions:"write",defaults:{data:{},ajaxOptions:{}},init:function(){this.setButtons()},setButtons:function(){var b=this.ssi,a=this;b.addButton({label:'<div class="icon ssi-mkdirIcon"></div>',title:this.translate("createFolder"),id:"",keyPress:{keyCode:"76",ctrl:!0,shift:!0},input:{enterKey:!0,containerClass:"ssi-foldercont",className:"ssi-folderInput ssi-menuInput",placeholder:this.translate("name"),id:"ssi-nameFolder",buttons:[{label:'<div class="icon ssi-checkIcon"></div>',
className:"ssi-inBtn ssi-inFolderBtn",method:function(){a.mkdir(b.$content.find("#ssi-nameFolder").val())}}]},className:"ssi-folderSwitch"},"menuButton",["menu"])},mkdir:function(b){var a=this.ssi,d=this,c=a.fileSystem;if((b=(b||a.$content.find("#ssi-nameFolder").val()).replace(/[\[\]/#<$+%>!`&*'|{?"=}\/:\\@\{]/g,""))&&!a.readOnlyMode){var f=a.fileSystem.getPath(b);if(a.getItemData("name",b))a.notify("error",this.translate("folderExistError").replaceText(b));else{var g=e.extend({},this.options.data,
{dirname:b,currentDir:c.options.rootPath+a.currentCollection.id}),g=e.extend({},{data:g,url:c.options.scriptsPath+"/mkdirAction.php"},this.options.ajaxOptions);a.ajaxCall(g,function(){a.notify("success",d.translate("successCreated"));var e={name:b,mimeType:"directory",date:Ss_input.tools.getDate(),path:c.getPath(b),size:0,type:"zzzzfolder"};a.plugins.scan.appendItems(e);(e=a.plugins.sidebar)&&e.addTree({name:b,url:f},c.options.rootPath+a.currentCollection.id);a.$content.find("#ssi-nameFolder").val("");
a.$content.find(".ssi-foldercont").hide(500);a.$element.trigger("resetAction.ssi")})}}}})})(jQuery);
(function(e){Ss_input.fileSystem.newFile=Ss_input.Plugin.extend({permissions:"write",defaults:{ajaxOptions:{},data:{},theme:"monokai",language:"javascript",onShow:function(){}},init:function(){this.setButtons()},setButtons:function(){var b=this;this.ssi.addButton({label:'<div class="icon ssi-newFileIcon"></div>',title:this.translate("newFile"),id:"",input:{enterKey:!0,containerClass:"ssi-newFileContainer",className:"ssi-FileInput ssi-menuInput",placeholder:this.translate("name"),id:"ssi-fileName",
buttons:[{label:'<div class="icon ssi-checkIcon"></div>',className:"ssi-inBtn ssi-inFolderBtn",method:function(a,d){b.newFile(d)}}]},className:"ssi-folderSwitch"},"menuButton",["menu"]);return this},newFile:function(b){var a=this.ssi,d=this;if(b&&!a.readOnlyMode){var c=a.fileSystem,f=a.getItemData("name",b);if(f&&"directory"!=f.mimeType)a.notify("error",this.translate("existError"));else if(f=Ss_input.tools.getExtension(b),-1==e.inArray(f,a.fileSystem.options.allowed))a.notify("error",this.translate("extError").replaceText(f));
else return this.sendRequest(c.getPath(b),function(){a.notify("success",d.translate("fileSuccessCreated"));a.$content.find("#ssi-fileName").val("");a.$content.find(".ssi-newFileContainer").hide(500);var e={name:b,mimeType:"text/plain",date:Ss_input.tools.getDate(),path:c.getPath(b),size:"1 B",type:Ss_input.tools.getExtension(b)};a.plugins.scan.appendItems(e)}),this}},sendRequest:function(b,a){var d=this.ssi,c=e.extend({},this.options.data,{filePath:b,fileContent:" "}),c=e.extend({},{data:c,url:d.fileSystem.options.scriptsPath+
"newFileAction.php"},this.options.ajaxOptions);d.ajaxCall(c,a);return this},da:function(){}})})(jQuery);
(function(e){Ss_input.fileSystem.upload=Ss_input.Plugin.extend({permissions:"write",externalResources:["$().ssi_uploader()"],defaults:{data:{},uploadOptions:{},modalOptions:{}},init:function(){this.setModal();this.setUploader();this.setButtons()},setButtons:function(){var b=this;this.ssi.addButton({label:'<div class="icon ssi-uploadIcon"></div>',title:this.translate("upload"),id:"ssi-uploadBtn",keyCode:"",className:"ssi-folderSwitch",method:function(){b.uploadFiles()}},"menuButton",["menu"])},setModal:function(){var b=
this.ssi,a=this;this.modalOptions=e.extend({},{sizeClass:"mediumToLarge",content:'<input type="file" multiple id="ssi-upload" />',title:this.translate("uploadFiles"),className:"ssi-uploadModal",keepContent:!0},this.options.modalOptions);this.modalOptions.onShow=function(d){a.ssi.$element.trigger("uploadShowAction.ssi");var c=d.get$content().find("#ssi-upload").data("ssi_upload");c&&(c.options.data.currentDir=b.fileSystem.options.rootPath+b.currentCollection.id);if("function"===typeof a.options.modalOptions.onShow)a.options.modalOptions.onShow(d)};
this.modalOptions.onClose=function(b){if("function"===typeof a.options.modalOptions.onClose)a.options.modalOptions.onClose(b);a.ssi.$element.trigger("uploadCloseAction.ssi")}},setUploader:function(){var b=this.ssi,a=this;this.uploaderOptions=e.extend({},{url:b.fileSystem.options.scriptsPath+"/uploadAction.php",locale:b.options.language,responseValidation:b.fileSystem.options.responseValidation,dropZone:!0,multiple:!0,preview:!0,errorHandler:{method:function(a,c){b.notify(c,a)},success:"success",error:"error"},
beforeEachUpload:function(d,c){if(b.getItemData("name",d.name))return c.abort(),a.translate("existError")},onEachUpload:function(b){a.onEachUpload(b)},maxFileSize:3,allowed:b.fileSystem.options.allowed},this.options.uploadOptions)},onEachUpload:function(b){},uploadFiles:function(){var b=this.ssi;if(!b.readOnlyMode){var a=b.createWindow(this.modalOptions,"#ssi-uploadBtn");this.uploaderOptions.data=e.extend({},{currentDir:b.fileSystem.options.rootPath+b.currentCollection.id},this.options.data);a.get$content().find("#ssi-upload").ssi_uploader(this.uploaderOptions)}}})})(jQuery);
(function(e){function b(a){return!!a.match(b.regex)}Ss_input.fileSystem.url=Ss_input.Plugin.extend({defaults:{ajaxOptions:{},data:{}},init:function(){"selection"==this.ssi.options.mode&&this.setButtons()},setButtons:function(){var a=this;this.ssi.addButton({label:'<div class="icon ssi-urlIcon"></div>',title:this.translate("addUrl"),id:"",keyCode:"",input:{enterKey:!0,containerClass:"ssi-urlcont",className:"ssi-urlInput ssi-menuInput",placeholder:this.translate("url"),id:"ssi-url",tooltip:this.translate("uploadImg"),
buttons:[{label:'<div class="icon ssi-checkIcon"></div>',className:"ssi-inBtn ssi-inUrlBtn",method:function(){a.addUrl()}}]},className:"ssi-urlSwitch"},"menuButton",["menu"])},addUrl:function(){var a=this.ssi,b=a.$content.find("#ssi-url").val();if(""!=b){var c=this;this.testUrl(b)&&this.IsValidImageUrl(b,function(){console.log();"multiSelection"===a.corePlugins.selection.options.selectionMode&&a.notify("success",c.translate("addSuccess"));a.corePlugins.selection.selectItem(b,"",!0)})}},testUrl:function(a){var d=
!1,c=!1,f,g=this.ssi;/^(http|https|ftp):\/\/[a-z0-9]+([\-\.][a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)+\.[a-z0-9]+$/i.test(a)&&(f=Ss_input.tools.getExtension(a),c=!0);!c&&b(a)&&(d=!0,f=(new RegExp(/^(data:)([\w\/\+]+);(charset=[\w-]+|base64).*,(.*)/gi)).exec(a)[2].split("/")[1]);return c||d?0>e.inArray(f,g.fileSystem.options.allowed)&&!d?(g.notify("error",this.translate("extError").replaceText(f)),!1):d?"dataUrl":!0:(g.notify("error",this.translate("invalidUrlError")),!1)},IsValidImageUrl:function(a,
b){var c=this,f=this.ssi;e("<img>",{src:a,error:function(){f.notify("error",c.translate("invalidUrlError"))},load:function(){b()}})}});b.regex=/^\s*data:([a-z]+\/[a-z0-9\-\+]+(;[a-z\-]+\=[a-z0-9\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i})(jQuery);
(function(e){Ss_input.database.newRecord=Ss_input.Plugin.extend({permissions:"write",defaults:{ajaxOptions:{stringifyData:!0,contentType:"application/json"},data:{}},init:function(){this.database=this.ssi.corePlugins.database;this.setButtons()},setButtons:function(){var b=this;this.ssi.addButton({label:'<div class="icon ssi-newDocumentIcon"></div>',title:this.translate("newDocument"),method:function(){b.addNew()}},"menuButton",["menu"])},addNew:function(){var b=this.ssi,a=this,d=this.database.getForm(),
c=[{title:this.translate("saveAndNew"),label:'<div class="icon ssi-saveIcon"></div>+',method:function(){a.save(function(c,d,e){201==e.status&&(a.database.resetForm(),b.notify("success",a.translate("successSave")))})}}],d={content:d,buttons:[{label:'<div class="icon ssi-saveIcon"></div>&nbsp;'+this.translate("save"),closeAfter:!1,className:"ssi-mBtn",method:function(c,d){a.save(function(c,e,f){if(201==f.status||200==f.status)d&&d.close(),b.notify("success",a.translate("successSave"))})}}]};this.database.createWindow(d,
c)},save:function(b){var a=this.database.getFormData();if(a){var d=this.ssi,c=this,f=e.extend({},this.options.data,a),f=e.extend({},{data:f,url:this.database.currentCollection.baseUrl.replace("/:id","")},this.options.ajaxOptions);d.ajaxCall(f,function(e,f,k){201!=k.status&&200!=k.status||d.plugins.scan.appendItems("object"===typeof e&&e.hasOwnProperty(c.database.currentCollection.id)?e:a);"function"===typeof b&&b(e,f,k,a)});return this}}})})(jQuery);
(function(){Ss_input.plugins.refresh=Ss_input.Plugin.extend({init:function(){var e=this.ssi,b=this;e.addButton({label:'<div class="icon ssi-refreshIcon"></div>',title:this.translate("refresh"),id:"ssi-refresh",keyCode:"r",className:"ssi-urlSwitch",method:function(){b.refresh(e.currentCollection.id)}},"menuButton",["menu"])},refresh:function(){if(!this.ssi.readOnlyMode){var e=this.ssi,b=e.plugins.cache;b&&b.removeCachedPage(e.currentCollection.id);e.$element.trigger("resetAction.ssi");e.plugins.scan.scanCollection(e.currentCollection.id,
e.currentCollection.url,e.currentCollection.data)}}})})();
(function(e){Ss_input.plugins.imgBox=Ss_input.Plugin.extend({defaults:{excludeItems:"",imageField:""},init:function(){this.setEvents()},setEvents:function(){var b=this.getButton("","contentImages"+this.ssi.uniqueId),a=this;this.ssi.$element.on("appendItemAction.ssi",function(d,c){!a.options.imageField||!c.data[a.options.imageField]||a.options.excludeItems&&"false"!=eval(Ss_input.tools.dataReplace(a.options.excludeItems,"item.data"))||c.$element.find("div.ssi-optionsDiv").append(b.clone(!0).attr("href",c.data[a.options.imageField]))}).on("changeSchemaAction.ssi",
function(b,c){c.displayImage&&-1<c.displayImage.indexOf("field:(")&&-1==c.displayImage.indexOf("condition:(")&&(a.options.imageField=c.displayImage.replace(/field:\((.*)\)/,"$1"))})},getButton:function(b,a){return this.ssi.addButton({label:'<div class="icon ssi-imgBoxIcon"></div>',id:"",stopPropagation:!1,className:"ssi-imgBox",attributes:{"data-ssi_imgGroup":a,href:b}},"itemButton",!1)}})})(jQuery);
(function(e){Ss_input.plugins.scan=Ss_input.Plugin.extend({require:["templateManager"],defaults:{titleField:"title",idField:"id",displayImage:"",itemClass:"",data:{},ajaxOptions:{}},init:function(){this.ssi.plugins.templateManager.scan=this;this.selectedTemplate={};this.setEvents()},scanCollection:function(b,a,d){if(a){b=b||"/";var c=this.ssi,f=this;c.currentCollection={id:b,url:a,data:d};var g=c.plugins.cache;if(g)var h=g.getCachedPage(b);h?this.echoFiles(h):(c.readyState=!1,d=e.extend({},f.options.data,
d),d=e.extend({},{data:d,type:"GET"},this.options.ajaxOptions),d.url=a||d.url,c.ajaxCall(d,function(a){a={id:b,data:a};c.$element.trigger("beforeScanAction.ssi",a);c.abort||f.echoFiles(a);c.$element.trigger("scanAction.ssi",a);c.abort=!1;c.readyState=!0},function(){c.readyState=!0}));return this}},echoFiles:function(b,a,d){if(b){var c=this.ssi;c.readOnlyMode=!!a||!!c.currentCollection.readOnly;if(a=b.data){c.$element.trigger("beforeEchoItemsAction.ssi",b);b=0;for(var f=[],g=a.length;b<g;++b)f.push(this.filesToDOM(a[b]));
a=e(this.selectedTemplate.wrapper).append(f);c.$content.find("#ssi-contentFiles").html(a);d?c.$element.trigger("silentEchoItemsAction.ssi"):c.$element.trigger("echoItemsAction.ssi")}}},reEchoItems:function(){var b=this.ssi;this.echoFiles({id:b.currentCollection.id,data:b.getPageData()})},setEvents:function(){var b=this;this.ssi.$element.on("changeSchemaAction.ssi",function(a,d){b.options.titleField=d.displayName;b.options.idField=d.id;b.options.displayImage=d.displayImage})},filesToDOM:function(b,
a){var d=this.ssi,c={},f=eval(Ss_input.tools.dataReplace(this.options.displayImage));c.$element=e(d.plugins.templateManager.getTemplate(b,a));var g=c.$element.find("div.ssi-displayDiv");Ss_input.tools.loadImage(g,f);c.$element.find(".ssi-mainElement").data("info",b);c.data=b;d.$element.trigger("appendItemAction.ssi",c);return c.$element},appendItems:function(b,a,d){d=d||this.ssi.$content.find("#ssi-itemsWrapper");a=a||"append";b=Ss_input.tools.toArray(b);for(var c=0,e=[],g=b.length;c<g;++c)e.push(this.filesToDOM(b[c]));
"html"==a&&this.emptyPage(d);d[a](e);this.ssi.$element.trigger("appendItemSetAction.ssi",[b])},emptyPage:function(b){b=b||this.ssi.$content.find("#ssi-contentFiles");b.empty();this.ssi.$element.trigger("emptyPageAction.ssi")},resetItem:function(b,a){a=e.extend({},this.ssi.get$mainElementById(b).data("info"),a);this.removeItems(b);this.appendItems(a)},removeItems:function(b){var a=this.ssi;b=Ss_input.tools.toArray(b);for(var d=0,c=b.length;d<c;d++){var e=b[d];a.get$itemWrapper(a.get$mainElementById(e)).remove();
a.$element.trigger("removeItemAction",[e])}}})})(jQuery);
(function(e){Ss_input.plugins.templateManager=Ss_input.Plugin.extend({template:{details:{wrapper:'<table id="ssi-itemsWrapper" class="ssi-details"><thead><tr class="header"><th></th><#=header#><th></th></tr></thead></table>',item:'<tbody class="ssi-itemWrapper <#= previewClass #>"><tr class="ssi-selectable ssi-mainElement" data-ID="<#= id #>"><td><div style=\'background-image:url("<#=displayImage#>");\'" class="ssi-displayDiv"></td><#=items#><td><div class="ssi-optionsDiv"></div></td></tr></tbody>',header:"<th><#=name#></th>"},
icons:{wrapper:'<div id="ssi-itemsWrapper" class="ssi-icons"></div>',item:'<table class="ssi-itemWrapper <#= previewClass #>"><tr><td><div style=\'background-image:url("<#=displayImage#>");\' data-ID="<#= id #>" class="ssi-mainElement ssi-selectable ssi-displayDiv"><div class="ssi-optionsDiv"></div></div></td></tr><tr><td><div class="ssi-itemName"><#= displayName||"" #></div></td></tr></table>'}},defaults:{template:"icons",excludeFields:[],limit:3,translateFields:""},init:function(){this.options.translateFields=
this.options.translateFields||this.ssi.options.translateFields;this.headerArray=[];this.header="";this.setEvents().setButtons()},setButtons:function(){var b=this;this.ssi.addButton({label:'<span class="icon ssi-previewIcon"></span> '+this.translate("previewType"),id:"",className:"",subMenu:[{label:'<span class="icon ssi-detailsPreviewIcon"></span> '+this.translate("details"),method:function(){"details"!=b.options.template&&(b.options.template="details",b.scan.reEchoItems())}},{label:'<span class="icon ssi-iconsPreviewIcon"></span> '+
this.translate("icons"),method:function(){"icons"!=b.options.template&&(b.options.template="icons",b.scan.reEchoItems())}}]},"listButton",["options"])},setEvents:function(){var b=this;this.ssi.$element.on("beforeEchoItemsAction.ssi",function(a,d){b.scan.selectedTemplate=e.extend({},b.template[b.options.template]);b.setTemplate(d.data)}).on("appendItemSetAction.ssi",function(){b.header||"details"!=b.options.template||b.scan.reEchoItems()}).on("changeSchemaAction.ssi",function(a,d){b.header="";b.headerArray=
[];b.options.excludeFields=d.details});return this},setTemplate:function(b){"details"==this.options.template&&this.setHeader(b[0])},setHeader:function(b){var a=0;if(!this.header)for(var d in b)if(!(-1<e.inArray(d,this.options.excludeFields))&&(this.headerArray.push(d),this.header+=Ss_input.tools.template(this.template.details.header,{name:this.translate(d,this.options.translateFields)}),a++,a==this.options.limit))break;this.scan.selectedTemplate.wrapper=Ss_input.tools.template(this.template.details.wrapper,
{header:this.header})},getTemplate:function(b,a,d,c){var e=this.scan.options,g,h=eval(Ss_input.tools.dataReplace(e.itemClass)),k="",l=b[e.idField];"object"===typeof l&&(l=b[e.idField]=l[Ss_input.tools.getFirstKey(l)]);c=c||this.options.template;a=a||b[e.titleField]||l;d=d||"";if("details"==c)for(var m=0,n=this.headerArray.length;m<n;m++){g="object"!==typeof b[this.headerArray[m]]||b[this.headerArray[m]]instanceof Array?Ss_input.tools.escapeHtml(b[this.headerArray[m]]):b[this.headerArray[m]]=JSON.stringify(b[this.headerArray[m]]);
if(200<g.length||30<g.split(" ").length)g='<div class="ssi-longText">'+g+"</div>";k+="<td"+(this.headerArray[m]==e.titleField?' class="ssi-itemName"':"")+">"+g+"</td>"}b={id:l,displayName:Ss_input.tools.escapeHtml(a),previewClass:h,displayImage:d,items:k};return Ss_input.tools.template(this.template[c].item,b)}})})(jQuery);
(function(e){Ss_input.plugins.iconSize=Ss_input.Plugin.extend({defaults:{defaultSize:"small"},init:function(){this.sizeClass={large:"ssi-mImgL",medium:"",small:"ssi-mImgS"};this.setButtons().setEvents()},setButtons:function(){var b=this;this.ssi.addButton({label:'<span class="icon ssi-sizeIcon"></span> '+this.translate("iconSize"),id:"",className:"",subMenu:[{label:'<span class="ssi-letterIcon">S</span> '+this.translate("small"),method:function(){b.options.defaultSize="small";b.setIcons()}},{label:'<span class="ssi-letterIcon">M</span> '+
this.translate("medium"),method:function(){b.options.defaultSize="medium";b.setIcons()}},{label:'<span class="ssi-letterIcon">L</span> '+this.translate("large"),method:function(){b.options.defaultSize="large";b.setIcons()}}]},"listButton",["options"]);return this},setEvents:function(){var b=this;this.ssi.$element.on("appendItemAction.ssi",function(a,d){d.$element.addClass(b.sizeClass[b.options.defaultSize])});return this},setIcons:function(b){b=b||this.options.defaultSize;this.ssi.$content.find(".ssi-itemWrapper").removeClass("ssi-mImgL ssi-mImgS").addClass(this.sizeClass[b]);
return this}})})(jQuery);
(function(e){Ss_input.plugins.sort=Ss_input.Plugin.extend({defaults:{sortType:"asc",sortBy:"",sortableFields:[],translateFields:""},template:{reverse:'<a id="ssi-reverse" href="#" class="ssi-reverse"><span class="icon ssi-reverseIcon"></span></a>'},init:function(){var b=this.ssi,a=this;this.options.translateFields=this.options.translateFields||b.options.translateFields;b.$element.on("changeSchemaAction.ssi",function(b,c){a.options.sortableFields=c.sort;a.options.sortBy=c.sort[0];a.resetUi()});0!=
this.options.sortableFields.length&&(this.options.sortBy=this.options.sortBy||this.options.sortableFields[0],this.setButtons().setEvents())},setEvents:function(){var b=this;this.ssi.$element.on("beforeEchoItemsAction.ssi",function(a,d){b.sort(d.data)})},setButtons:function(b){var a=this.ssi,d=this,c=[];e(this.template.reverse).appendTo(a.$content.find("#ssi-topBarWrapper")).on("click.ssi",function(){d.options.sortType="asc"===d.options.sortType?"desc":"asc";a.plugins.scan.reEchoItems();return!1});
for(var f=0,g=this.options.sortableFields.length;f<g;f++){var h=this.options.sortableFields[f];c.push({label:'<span class="ssi-letterIcon">'+h[0].toUpperCase()+"</span> "+this.translate(h,this.options.translateFields),attributes:{"data-ssi_title":h},method:function(){d.options.sortBy=e(this).attr("data-ssi_title");a.plugins.scan.echoFiles({id:a.currentCollection.id,data:a.getPageData()})}})}if(2>c.length)return this;this.ssi.addButton({label:'<span class="icon ssi-sortIcon"></span> '+this.translate("sort"),
id:"ssi-sortButton",className:"",subMenu:c},"listButton",b||["options"]);return this},resetUi:function(){var b=this.ssi.$content.find("#ssi-sortButton").remove();this.ssi.$content.find("#ssi-reverse").remove();this.options.sortableFields.length&&(this.options.sortBy=this.options.sortBy||this.options.sortableFields[0],this.setButtons(this.ssi.$content.find("#ssi-TasksBtn").next()),b.length||this.setEvents())},sort:function(b){try{var a=this,d=this.options.sortBy,c=this.options.sortType;c&&b.sort(function(b,
e){var h,k;/(?:[a-z]*(?:_date|date_|Date|-date|date-)[a-z]*)|^(?:date)(?:$|[A-Z]+.*)/.test(d)?(h=Ss_input.tools.parseDate(b[d]),k=Ss_input.tools.parseDate(e[d])):(h=b[d],k=e[d]);if("desc"===c){var l=h;h=k;k=l}if(d!==a.options.sortableFields[0])var m=b[a.options.sortableFields[0]],n=e[a.options.sortableFields[0]];if(h<k)return-1;if(h>k)return 1;if(m<n)return-1;if(m>n)return 1})}catch(e){}}})})(jQuery);
(function(e){Ss_input.plugins.info=Ss_input.Plugin.extend({template:{table:'<table class = "ssi-infoTable ssi-infoCompare"><#=rows#></table>',item:"<td><#=fieldData#></td>",row:"<tr><th><#=header#></th><#=items#></tr>"},defaults:{excludeItems:"",excludeFields:[],translateFields:""},init:function(){this.options.translateFields=this.options.translateFields||this.ssi.options.translateFields;this.$content="";this.setButtons()},setButtons:function(){var b=this;this.ssi.addButton({label:'<span class="icon ssi-infoIcon"></span>'+
this.translate("info")+'<span class="ssi-keyShort">ctrl + i</span>',id:"",keyPress:{keyCode:"73",ctrl:!0},className:"ssi-detailsButton",method:function(){b.getFilesInfo()},selectionRequired:!0},"listButton",["contextMenu","actions"])},handleData:function(b){},getTemplate:function(b){var a=0,d=b.length,c,f="",g,h;for(h in b[0])if(!this.options.excludeFields.length||-1!=e.inArray(h,this.options.excludeItems)){var k=d;6<k&&(k=6);c="";for(var l=0;l<k;l++)this.options.excludeItems&&"false"!=eval(Ss_input.tools.dataReplace(this.options.excludeItems,
"data[i]"))?d>k&&k++:("preview"==h?g=b[l][h]:(g=Ss_input.tools.escapeHtml(b[l][h]),5<g.split(" ").length&&(g='<div class="ssi-longText">'+g+"</div>")),c+=Ss_input.tools.template(this.template.item,{fieldData:g}),a++);f+=Ss_input.tools.template(this.template.row,{header:this.translate(h,this.options.translateFields),items:c});if(0==a)return!1}return Ss_input.tools.template(this.template.table,{rows:f})},getFilesInfo:function(){var b=this.ssi,a=b.getSelectedData();if(a.length&&(this.handleData(a),a=
this.getTemplate(a))){var d=e(a);b.createWindow({title:this.translate("details"),sizeClass:"auto",className:"ssi-infoModal",outSideClose:!1,content:d,buttons:{className:"ssi-mBtn",label:this.translate("ok"),closeAfter:!0},onClose:function(){b.$element.trigger("infoCloseAction.ssi")},onShow:function(){b.$element.trigger("infoShowAction.ssi",[d])}}).get$content()}}})})(jQuery);
(function(e){var b=[],a=[],d=[];Ss_input.fileSystem.copy=Ss_input.Plugin.extend({permissions:"write",defaults:{copy:{data:{},ajaxOptions:{}},cut:{data:{},ajaxOptions:{}}},init:function(){this.setEvents().setButtons()},setEvents:function(){var c=this.ssi,e=this;c.$element.on("resetAction.ssi",function(){b=[];a=[];d=[];c.$content.find(".ssi-pasteButton").addClass("disabled")}).on("echoItemsAction.ssi",function(){e.setCut();0<b.length||0<a.length?c.$content.find(".ssi-pasteButton").removeClass("disabled"):
c.$content.find(".ssi-pasteButton").addClass("disabled")}).on("removeCollectionAction.ssi",function(b,d){a.length&&Ss_input.tools.removeFromArray(a,c.fileSystem.options.rootPath+d)});return this},setButtons:function(){var a=this.ssi,b=this;a.addButton({label:'<span class="icon ssi-copyIcon"></span> '+this.translate("copy")+' <span class="ssi-keyShort">ctrl + c</span>',className:"",method:function(){b.copy()},keyPress:{keyCode:"67",ctrl:!0},selectionRequired:!0},"listButton",["contextMenu","actions"]);
a.checkPermissions(this.permissions,"cut")&&a.addButton({label:'<span class="icon ssi-cutIcon"></span> '+this.translate("cut")+' <span class="ssi-keyShort">ctrl + x</span>',className:"",method:function(){b.cut()},keyPress:{keyCode:"88",ctrl:!0},selectionRequired:!0},"listButton",["contextMenu","actions"]);a.addButton({label:'<span class="icon ssi-pasteIcon"></span> '+this.translate("paste")+' <span class="ssi-keyShort">ctrl + v</span>',className:"ssi-pasteButton",method:function(){b.paste()},keyPress:{keyCode:"86",
ctrl:!0},selectionRequired:!1},"listButton",["contextMenu","options"]);return this},cut:function(c){try{var d=this.ssi;this.cutEffect("remove");b=c?Ss_input.tools.toArray(c):d.getUrlList();this.toPaste=d.getSelectedData();this.cutEffect("add");a=[];d.$content.find(".ssi-pasteButton").removeClass("disabled")}catch(e){}},copy:function(c){var d=this.ssi;c?Ss_input.tools.toArray(c):a=d.getUrlList();this.toPaste=d.getSelectedData();0<b.length&&(this.cutEffect("remove"),b=[]);d.$content.find(".ssi-pasteButton").removeClass("disabled")},
cutEffect:function(a){"add"===a?e(".ssi-mActive").addClass("ssi-cutItem").length||e(this.ssi.plugins.contextMenu.rightClickItem).addClass("ssi-cutItem"):e(".ssi-cutItem").removeClass("ssi-cutItem")},setCut:function(){for(var a=0;a<b.length;a++)this.ssi.$content.find(".ssi-selectable[data-ID='"+b[a]+"']").addClass("ssi-cutItem")},paste:function(){function c(a,b){var c;b=b||"";d.push(0);p.success=function(a){try{try{a=e.parseJSON(a)}catch(d){console.log("Probably data is not json formatted."),console.log(a)}if("success"===
a.type){var f;f=-1<a.msg.indexOf("continue")?a.msg.replace(" continue",""):Ss_input.tools.basename(p.data.newUrl);var g=q[u],l=r,m=b,n=Ss_input.tools.basename(g),A=Ss_input.tools.dirname(g).replace(w.options.rootPath,"")||"/";if("cutAction"!==l||"continue"!==m){var v=e.extend({},Ss_input.tools.findByKey(x.toPaste,"name",n));"replace"===m?(t.$element.trigger("removeItemAction.ssi",v.path),"directory"===v.mimeType&&t.$element.trigger("removeCollectionAction.ssi",v.path.replace(t.fileSystem.rootPath))):
"continue"===m&&"cutAction"!=l&&(v.name=f);v.path=w.getPath(f);var z=t.plugins.sidebar,y=t.plugins.cache;"directory"===v.mimeType&&(n=!1,"cutAction"===l&&(n=!0,y&&1<y.options.cacheLimit&&y.removeCachedPage(Ss_input.tools.urlUnion(A,f))),z&&z.copyTree(g,w.getPath(f),!0,n));"replace"!=m&&t.plugins.scan.appendItems(v);"cutAction"===l&&y&&1<y.options.cacheLimit&&y.removeCachedItem("path",g,A)}k();t.checkedItems&&Ss_input.tools.removeFromArray(t.checkedItems,q[u])}else if("error"===a.type)if(-1<a.msg.indexOf("already_exists"))c=
w.getPath(Ss_input.tools.basename(q[u])),l=a.msg.replace("already_exists",""),30<l.length&&(l=Ss_input.tools.cutFileName(l,"",28)),h(c,q[u],l);else throw{type:a.type,msg:a.msg};else throw{type:a.type,msg:a.msg};}catch(d){k(),"error"===d.type?t.notify("error",d.msg):(console.log(a),console.log(d.msg),console.log(d.message))}};p.data=a;t.ajaxCall(p)}function f(a,b,c){a=g(b,a.type);b=new RegExp(Ss_input.tools.escape(b)+"$");return c.replace(b,a)}function g(a,b,c){var d=[],f;for(f=0;f<z.length;f++)d[f]=
z[f].name;if("inArray"===c)return-1!==e.inArray(a,d);f="";c=a;"zzzzfolder"!==b&&(f="."+Ss_input.tools.getExtension(a),c=a.replace(f,""));if(-1!==e.inArray(c+"-copy"+f,d))if("zzzzfolder"===b)for(f=1;50>f;f++){if(b=a+"-copy("+f+")",-1===e.inArray(b,d)){a=b;break}}else for(f=1;50>f;f++){if(b=a.replace(/(.[a-zA-Z]{1,5})$/,"-copy("+f+")$1"),-1===e.inArray(b,d)){a=b;break}}else a=c+"-copy"+f;return a}function h(a,b,d,g){var h=e.extend({},n,{newUrl:a,oldUrl:b});b=function(){"cutAction"!==r&&(a=f(g,d,a),
h.newUrl=a,h.action="continue",c(h,"continue"))};var l=[{label:x.translate("replace"),closeAfter:!0,className:"ssi-mBtn",method:function(){h.action=!0;c(h,"replace")}},{label:x.translate("skip"),className:"ssi-mBtn",closeAfter:!0,method:function(){u++;k(q[u])}},{label:x.translate("cancel"),className:"ssi-mBtn ssi-cancel",closeAfter:!0}];"copyAction"===r&&l.splice(0,0,{label:x.translate("createCopy"),closeAfter:!0,className:"ssi-mBtn",method:b});t.createWindow({sizeClass:"small",className:"ssi-confirmModal",
fixedHeight:!1,content:x.translate("replaceMsg").replaceText(d),buttons:l})}function k(){u++;u<q.length?l():(t.reloadProgressbar(),u=0,"cutAction"==r&&(t.$content.find(".ssi-pasteButton").addClass("disabled"),b=[]))}function l(){var a=Ss_input.tools.basename(q[u]),b=w.getPath(a);if("cutAction"!=r||b!==q[u]){var d=e.extend({},n,{newUrl:b,oldUrl:q[u]}),k=Ss_input.tools.findByKey(x.toPaste,"name",a);b==q[u]?(b=f(k,a,b),d.newUrl=b,v="continue",c(d,v)):g(a,k.type,"inArray")?h(b,q[u],a,k):c(d,v)}}var m,
n,p,q,r,v="",t=this.ssi,x=this,w=t.fileSystem;if(0<a.length)r="copyAction",m=w.options.scriptsPath+"/copyAction.php",n=this.options.copy.data||{},q=a,p=this.options.copy.ajaxOptions||{};else if(0<b.length)r="cutAction",m=w.options.scriptsPath+"/cutAction.php",n=this.options.cut.data||{},q=b,p=this.options.cut.ajaxOptions||{},this.cutEffect("remove"),b=[];else return;var z=t.getPageData(),u=0;p=e.extend({},{url:m,xhr:function(){var a=new window.XMLHttpRequest;a.addEventListener("progress",function(a){if(a.lengthComputable){var b=
t.$content.find("#ssi-progressBar");b.removeClass("hide");d[u]=a.loaded/a.total*100;a=Ss_input.tools.arraySum(d)/q.length;b.css({width:a+"%"})}},!1);return a}},p);l()}})})(jQuery);
(function(e){Ss_input.plugins["delete"]=Ss_input.Plugin.extend({permissions:"edit",defaults:{sendId:"inForm",ajaxOptions:{},onDelete:function(){},data:{}},init:function(){this.setEvents();this.setButtons();this.baseurl=this.options.ajaxOptions.url},setEvents:function(){var b=this;this.ssi.$element.on("resetAction.ssi",function(){});this.ssi.$element.on("changeSchemaAction.ssi",function(a,d){b.baseurl=d.url})},setButtons:function(){var b=this;this.ssi.addButton({label:'<span class="icon ssi-deleteIcon"></span> '+
this.translate("delete")+' <span class="ssi-keyShort">del</span>',id:"",keyPress:{keyCode:"46"},className:"",method:function(){b.deleteFiles()},selectionRequired:!0},"listButton",["contextMenu","actions"])},idInUrl:function(b){for(var a=0,d=b.length;a<d;a++)b[a]?(this.options.ajaxOptions.url=-1==this.baseurl.indexOf("/:id")?this.baseurl+"/"+b[a]:this.baseurl.replace(":id",b[a]),this.sendRequest("",this.deleteCallback(b[a]))):console.log("Id is required. Try to refresh the data!")},deleteCallback:function(b){var a=
this;return function(d,c,e){a.ssi.plugins.scan.removeItems(b);a.ssi.$element.trigger("resetAction.ssi");a.ssi.$element.trigger("deleteAction.ssi",b);if("function"===typeof a.options.onDelete)a.options.onDelete(d,c,e,b)}},sendRequest:function(b,a){b=b||{};b=e.extend({},this.options.data,b);var d=e.extend({},{data:b,type:"DELETE",url:""},this.options.ajaxOptions);this.ssi.ajaxCall(d,a)},idInForm:function(b){this.sendRequest({id:b},this.deleteCallback(b))},deleteDir:function(b){b.length&&("inUrl"==this.options.sendId?
this.idInUrl(b):this.idInForm(b))},deleteFiles:function(){var b=this.ssi,a=this,d=b.getUrlList();d&&0!==d.length&&b.createWindow({sizeClass:"dialog",fixedHeight:!1,className:"ssi-confirmModal",content:this.translate("deleteMsg"),buttons:[{label:this.translate("cancel"),className:"ssi-mBtn ssi-cancel",closeAfter:!0},{label:this.translate("ok"),className:"ssi-mBtn",closeAfter:!0,focused:!0,method:function(){a.deleteDir(d)}}]})}})})(jQuery);
(function(e){Ss_input.fileSystem.textEditor=Ss_input.Plugin.extend({defaults:{ajaxOptions:{},data:{},pathField:"path",modalOptions:{preview:{icon:!0,state:"normal",hideIcons:!0}},readOnly:""},init:function(){this.modalOptions={className:"ssi-filePreview",fixedHeight:!0,buttons:[],outSideClose:!1,sizeClass:"large",fitScreen:!0};this.path="";this.setModal();this.setButtons()},setButtons:function(){var b=this;this.ssi.addButton({label:'<span class="icon ssi-editFileIcon"></span> '+this.translate("textEditor"),
id:"",className:"ssi-editFile",method:function(a){b.path=b.ssi.getSelectedField("path")[0];b.openFile(b.path)},selectionRequired:!0},"listButton",["openWith"],'condition:(field:(mimeType)=="text/plain")')},setModal:function(){var b=this;e.extend(this.modalOptions,this.options.modalOptions);this.ssi.checkPermissions("edit","editFiles")?this.modalOptions.buttons.push({label:this.translate("save"),method:function(){b.saveFile(b.getPath(),b.getContent())}},{label:b.translate("cancel"),closeAfter:!0}):
this.options.readOnly=this.options.readOnly||!0},openFile:function(b,a){var d=this;this.sendRequest(b,"",function(c){c=e('<textarea id="ssi-textArea" class="ssi-textArea" '+(d.options.readOnly?"readonly":"")+">"+c+"</textarea>");d.createWindow(c,Ss_input.tools.basename(b));"function"==typeof a&&a(c)},"GET")},saveFile:function(b,a){var d=this;this.sendRequest(b,a,function(a){d.ssi.notify("success",a)},"UPDATE");return this},createWindow:function(b,a){this.modalOptions.content=b;this.modalOptions.title=
a;this.uniqueId="ssi-normalModal"+this.ssi.createWindow(this.modalOptions).numberId;return this},sendRequest:function(b,a,d,c){var f=this.ssi;b=e.extend({},this.options.data,{filePath:b,fileContent:a});c=e.extend({},{data:b,type:c,url:f.fileSystem.options.scriptsPath+"/editFileAction.php"},this.options.ajaxOptions);f.ajaxCall(c,d);return this},getContent:function(){return e("#"+this.uniqueId).find("#ssi-textArea").val()},getPath:function(){return this.path}})})(jQuery);
(function(e){Ss_input.fileSystem.aceEditor=Ss_input.Plugin.extend({externalResources:["ace",'ace.require("ace/ext/modelist")'],defaults:{theme:"monokai",config:function(){}},setButtons:function(){var b=this;this.ssi.addButton({label:'<span class="icon ssi-aceEditorIcon"></span> '+this.translate("aceEditor"),id:"",className:"ssi-editFile",method:function(){b.path=b.ssi.getSelectedField("path")[0];b.openFile(b.path)},selectionRequired:!0},"listButton",["openWith","actions"],'condition:(field:(mimeType)=="text/plain")');
this.modalOptions.className+=" ssi-aceEditor"},openFile:function(b,a){var d=this;this.sendRequest(b,"",function(c){c='<div class="ssi-textArea" id="ssi-aceEditor">'+c+"</div>";d.createWindow(c,Ss_input.tools.basename(b));d.setEditor(b);"function"==typeof a&&a(c)},"GET")},setEditor:function(b){this.editor=editor=ace.edit("ssi-aceEditor");this.options.readOnly&&editor.setReadOnly(!0);editor.setTheme("ace/theme/"+this.options.theme);editor.$blockScrolling="Infinity";editor.session.setMode(ace.require("ace/ext/modelist").getModeForPath(b).mode);
editor.resize();"function"===typeof this.options.config&&this.options.config(editor)},getContent:function(){return this.editor.getValue()},getPath:function(){return this.path}},"textEditor",Ss_input.fileSystem)})(jQuery);
(function(e){Ss_input.fileSystem.rename=Ss_input.Plugin.extend({permissions:"edit",template:'<div id="ssi-editField" class="ssi-editField"><input type="text" id="ssi-renameInput" value="<#=value#>" /></br><button class="ssi-mBtn" id="ssi-renameConfirm"><#=okLabel#></button><button class="ssi-mBtn ssi-cancel" id="ssi-renameCancel"><#=cancelLabel#></button></div>',defaults:{ajaxOptions:{},data:{}},init:function(){this.setButtons();this.setEvents()},setEvents:function(){var b=this.ssi;b.$element.on("appendItemAction.ssi",
function(a,b){});b.$content.on("mousedown.ssi",function(a){var b=e(".ssi-itemWrapper"),c=b.is(a.target),b=0===b.has(a.target).length;a=e(a.target).hasClass("ssi-selectionRequired");c||!b||a||(e(".ssi-editField").remove(),e(".ssi-itemName").show())})},setButtons:function(){var b=this;this.ssi.addButton({label:'<span class="icon ssi-renameIcon"></span> '+this.translate("rename")+' <span class="ssi-keyShort">F2</span>',id:"",className:"ssi-rename",keyPress:{keyCode:"113",ctrl:!1},method:function(){b.rename()},
selectionRequired:!0},"listButton",["contextMenu","actions"])},rename:function(b){this.ssi.$content.find("#ssi-renameCancel").trigger("click");var a=this.ssi,d=this,c=a.fileSystem;b=b||a.getUrlList()[0];var f=a.get$mainElementById(b),g=f.parents(".ssi-itemWrapper").find(".ssi-itemName"),h=Ss_input.tools.basename(b),k=e(Ss_input.tools.template(this.template,{value:h,okLabel:this.translate("ok"),cancelLabel:this.translate("cancel")}));k.find("#ssi-renameCancel").click(function(){k.remove();g.show();
return!1});b=k.find("#ssi-renameConfirm");var l=k.find("#ssi-renameInput");g.after(k).hide();l.focus().click(function(){return!1});b.click(function(){var b=l.val().replace(/[\[\]/#<$+%>!`&*'|{?"=}\/:\\@\{]/g,""),n="";if(""!=b&&b!==h){if(a.getItemData("name",b)){a.notify("error",d.translate("existError").replaceText(b));return}var p=a.getItemData("name",h);if("zzzzfolder"!==p.type&&(n=Ss_input.tools.getExtension(b),-1===e.inArray(n.toLowerCase(),a.fileSystem.options.allowed))){a.notify("error",d.translate("extError").replaceText(n));
return}var q=c.getPath(h),r=c.getPath(b),n=e.extend({},d.options.data,{newUrl:r,oldUrl:q}),n=e.extend({},{data:n,language:a.options.language,url:c.options.scriptsPath+"/renameAction.php"},d.options.ajaxOptions);a.ajaxCall(n,function(c){f.attr("data-ID",r);g.text(b);k.remove();g.show();c=f.data("info");c.name=b;c.path=Ss_input.tools.urlUnion(a.currentCollection.id,r);var d=a.plugins.cache;if(d){var e=d.getCache();if(p=d.getCachedItem("name",h,"",e))p.name=b,p.path=c.path;d.setCache(e)}c=a.plugins.sidebar;
!q.isFile(a.fileSystem.options.allowed)&&c&&c.editTreeLink(q,r,b,r)})}return!1})}})})(jQuery);
(function(e){Ss_input.database.editRecord=Ss_input.Plugin.extend({permissions:"edit",template:{form:'<form id="ssi-formData"><table><#=formItem#></table></form>',formItem:'<tr><th><label for="<#=inputId#>" class="<#=labelClass#>"><#=label#></label></th><td><#=input#></td></tr>'},defaults:{sendId:"inUrl",ajaxOptions:{stringifyData:!0,contentType:"application/json"},data:{}},init:function(){this.database=this.ssi.database;this.setButtons()},setEvents:function(){},setButtons:function(){var b=this;this.ssi.addButton({label:'<span class="icon ssi-editDocumentIcon"></span> '+
this.translate("editDocument"),id:"",className:"ssi-editFile",method:function(a){b.edit(b.ssi.getSelectedData()[0])},selectionRequired:!0},"listButton",["contextMenu"])},edit:function(b){var a=this.ssi,d=this,c=e(this.database.getForm(b));"inForm"==this.options.sendId&&c.append('<input type="hidden" class="ssi-inputField" name="'+this.database.id+'" value="'+b[this.database.currentCollection.id]+'">');if(a.checkPermissions("write","saveAsNew"))var f=[{title:this.translate("saveAsNew"),label:'<div class="icon ssi-saveIcon"></div>+',
method:function(){d.save(b[d.database.currentCollection.id],function(b,c,e,f){if(201==e.status||200==e.status)a.plugins.scan.appendItems("object"===typeof b&&b.hasOwnProperty(d.database.currentCollection.id)?b:f),a.notify("success",d.translate("successSave"))},{url:d.database.currentCollection.baseUrl.replace("/:id",""),type:"POST"})}}];c={content:c[0].outerHTML,buttons:[{label:'<div class="icon ssi-saveIcon"></div>&nbsp;'+this.translate("save"),closeAfter:!1,className:"ssi-mBtn",method:function(c,
e){var f=b[d.database.currentCollection.id];d.save(f,function(b,c,g,p){200==g.status&&(e&&e.close(),a.plugins.scan.resetItem(f,"object"===typeof b&&b.hasOwnProperty(d.database.currentCollection.id)?b:p),a.notify("success",d.translate("successSave")))})}}]};this.database.createWindow(c,f)},save:function(b,a,d){var c=this.database.getFormData();if(c){var f=this.ssi,g=e.extend({},this.options.data,c);b="inUrl"==this.options.sendId?-1==this.database.currentCollection.baseUrl.indexOf("/:id")?this.database.currentCollection.baseUrl+
"/"+b:this.database.currentCollection.baseUrl.replace(":id",b):this.database.currentCollection.baseurl;d=e.extend({},{data:g,type:"PUT",url:b},d,this.options.ajaxOptions);f.ajaxCall(d,function(b,d,e){"function"===typeof a&&a(b,d,e,c)});return this}}})})(jQuery);
(function(e){Ss_input.plugins.sidebar=Ss_input.Plugin.extend({template:{sideBar:'<div id="ssi-sidebar" class="ssi-sidebar"><div id="ssi-sidebarContent"></div></div>',treeItem:'<li id="<#=id#>" class="<#=className#>"><a class="ssi-listAnchor" href="<#=href#>" ><#=name#></a><#=children#></li>',hideButton:'<a href="#" id="ssi-hideSideBar"><div class="icon ssi-sideBarIcon"></div></a>',dragBar:'<div id="dragbar"></div>'},defaults:{state:"open",data:[],fieldDefinition:{name:"name",id:"id",url:"url",children:"children",
className:"className"},className:"",resizable:!0,mode:"treeView"},init:function(){this.ssi.$content.find(".ssi-mainContent").prepend(this.template.sideBar);this.options.fieldDefinition=e.extend({},this.defaults.fieldDefinition,this.options.fieldDefinition);this.options.data.length&&this.setSidebar(this.options.data);this.setButtons()},setSidebar:function(d){var c=this.ssi.$content.find("#ssi-sidebarContent");"close"==this.options.state&&c.parent().addClass("ssi-verticalSlide");c.addClass(this.options.className).html(this.setList(d));
"treeView"==this.options.mode?a(c):"accordion"==this.options.mode?b(c):"dropDown"==this.options.mode&&(c.addClass("ssi-dropDownWrapper"),c.parent().addClass("ssi-dropDownMode"));return this},setButtons:function(){var a=this.ssi;e(this.template.hideButton).on("click.ssi",function(){a.$content.find("#ssi-sidebar").toggleClass("ssi-verticalSlide");return!1}).prependTo(a.$content.find(".ssi-topBarButtonArea"));this.options.resizable&&this.setDragBar()},deleteTree:function(a){a=this.ssi.$content.find("#ssi-sidebar").find(document.getElementById(a));
var b=a.parent();a.remove();0===b.children().length&&b.parent().removeClass("parent").find("a.ssi-treeTrigger").remove()},addTree:function(a,b,e){b=this.ssi.$content.find(document.getElementById(b||"ssi-sidebarContent"));"treeView"!=this.options.mode&&(b=this.ssi.$content.find("#ssi-sidebarContent").children("ul"));e=e||this.setList(a,!0);b.children("ul").append(e);b.hasClass("parent")||(b.addClass("parent"),"treeView"==this.options.mode&&b.prepend('<a class="ssi-treeTrigger" href="#">'))},editTreeLink:function(a,
b,e,g){this.ssi.$content.find("#ssi-sidebar").find(document.getElementById(a)).children("a.ssi-listAnchor").attr({href:b,id:g}).html(e)},setList:function(a,b){a=Ss_input.tools.toArray(a);for(var e=Ss_input.tools.template,g="",h,k,l=this.options.fieldDefinition,m=0,n=a.length;m<n;m++)try{h=k="";var p=a[m][l.children];p&&0<p.length&&(h=this.setList(p),k="parent "+(a[m].active?"active ":""));g+=e(this.template.treeItem,{id:a[m][l.id]||"",href:a[m][l.url]||"",name:a[m][l.name]||"",children:h||"<ul></ul>",
className:k+(a[m][l.className]||"")})}catch(q){console.log(q)}return b?g:"<ul>"+g+"</ul>"},setDragBar:function(){var a=this.ssi;a.$content.find("#ssi-items").prepend(this.template.dragBar);a.$content.mouseup(function(e){if(b){e=a.$content.find("#ssi-sidebar");var h=e.parent().width(),k=.1*h,l=.4*h;f<k&&(f=k);f>l&&(f=l);e.css("width",100*f/h+"%");a.$content.find("#ghostbar").remove();a.$content.off("mousemove");b=!1}});var b=!1,f;a.$content.find("#dragbar").mousedown(function(g){g.preventDefault();
b=!0;var h=a.$content.find("#ssi-items"),k=e("<div>",{id:"ghostbar",css:{height:"100%",top:0,left:0}}).appendTo(h);e(document).mousemove(function(a){f=a.pageX-h.offset().left;k.css("left",f)})})}});var b=function(a){e(a).addClass("ssi-accordion").on("click","li",function(){var a=e(this);a.siblings(".active").removeClass("active").children("ul").slideUp(300);a.children("ul").slideToggle();a.toggleClass("active");return!1})},a=function(a){a=e(a);a.addClass("ssi-treeView").find("li.parent").prepend('<a class="ssi-treeTrigger" href="#"></a>').filter(".active").children("ul").slideToggle("fast");
a.off(".ssi_treeView");a.on("click.ssi_treeView",".ssi-treeTrigger",function(){var a=e(this),b=a.parent();b.find(".ssi-treeViewRCurrent").length&&b.hasClass("active")?a.next("a").addClass("ssi-treeViewCurrent"):a.next("a").removeClass("ssi-treeViewCurrent");b.toggleClass("active");b.children("ul").slideToggle("fast");return!1})}})(jQuery);
(function(e){Ss_input.plugins.selectAll=Ss_input.Plugin.extend({defaults:{selectableClasses:{},translateFields:""},require:["select"],init:function(){this.setButtons()},setButtons:function(){var b=this.ssi,a=this;this.options.translateFields=this.options.translateFields||b.options.translateFields;var d=[{label:'<span class="icon ssi-selectAllIcon"></span> '+this.translate("all")+' <span class="ssi-keyShort">ctrl + a</span>',method:function(){a.select("ssi-selectable")},keyPress:{keyCode:"65",ctrl:!0}}],
c;for(c in this.options.selectableClasses)d.push({label:'<span class="ssi-letterIcon">'+c[0]+'</span><span class="ssi-title"> '+this.translate(c,this.options.translateFields)+"</span>",attributes:{"data-ssi_title":c},method:function(){a.select(a.options.selectableClasses[e(this).attr("data-ssi_title")])}});b.addButton({label:'<span class="icon ssi-selectionIcon"></span> '+this.translate("select"),id:"",className:"",subMenu:d},"listButton",["options"])},select:function(b){var a=this.ssi,d=a.$content.find("."+
b);b=d.find(".ssi-selectable");b.length||(b=d);var d=b.length,c=a.plugins.select;c.removeSelectedList();b.addClass("ssi-mActive");0<d&&(a.$content.find(".ssi-selectionRequired").removeClass("ssi-hidden"),a.$content.find(".ssi-mustSelect").removeClass("disabled"));for(a=0;a<d;a++)c.selectionList.push(e(b[a]).attr("data-ID"))}})})(jQuery);
(function(e){Ss_input.plugins.cache=Ss_input.Plugin.extend({defaults:{cacheLimit:5,cacheTo:"localStorage"},init:function(){var b=this;this.ssi.addButton({label:'<span class="icon ssi-cacheIcon"></span> '+this.translate("cleanCache"),id:"",className:"",method:function(){b.cleanHistory()}},"listButton",["options"]);this.cachedPages=[];1>this.options.cacheLimit&&(this.options.cacheLimit=1);this.setEvents()},setEvents:function(){var b=this.ssi,a=this;b.$element.on("closeAction.ssi",function(){sessionStorage.removeItem("historyCache"+
b.uniqueId);a.cachedPages=[]}).on("scanAction.ssi",function(b,c){a.cachePage(c)}).on("emptyPageAction.ssi",function(){var b=this.getCache();a.getCachedPage(a.ssi.currentCollection.id,b).data=[];a.setCache(b)}).on("appendItemSetAction.ssi",function(b,c){var e=a.getCache(),g=a.getCachedPage("",e);g.data=g.data.concat(c);a.setCache(e)}).on("removeItemAction.ssi",function(b,c){a.removeCachedItem(a.ssi.plugins.scan.options.idField,c)}).on("removeCollectionAction.ssi",function(b,c){a.removeCachedPage(c)})},
getCache:function(){try{return"localStorage"==this.options.cacheTo?JSON.parse(sessionStorage.getItem("historyCache"+this.ssi.uniqueId))||[]:this.cachedPages}catch(b){return[]}},setCache:function(b){if("localStorage"!=this.options.cacheTo)return this;try{return sessionStorage.setItem("historyCache"+this.ssi.uniqueId,JSON.stringify(b)),this}catch(a){return!1}},removeCachedPage:function(b,a){a=a||this.getCache();Ss_input.tools.removeObjFromArray(a,"id",b);this.setCache(a);return this},removeCachedItem:function(b,
a,d,c){b=b||"name";c=c||this.getCache();if(d="string"===typeof d&&""!==d?this.getCachedPage(d,c):d||this.getCachedPage(this.ssi.currentCollection.id,c))Ss_input.tools.removeObjFromArray(d.data,b,a),this.setCache(c);return this},cachePage:function(b,a){a=a||this.getCache();a.length>=this.options.cacheLimit&&a.shift();a.push(b);this.setCache(a);return this.ssi},cacheItem:function(b,a,d){d=d||this.getCache();(a="string"===typeof a&&""!==a?this.getCachedPage(a,d):a||this.getCachedPage(this.ssi.currentCollection.id,
d))&&a.data.push(b);this.setCache(d);return this.ssi},getCachedPage:function(b,a){a=a||this.getCache();b=b||this.ssi.currentCollection.id||"/";return Ss_input.tools.findByKey(a,"id",b)},getCachedItem:function(b,a,d,c){c=c||this.getCache();return(d="string"===typeof d&&""!==d?this.getCachedPage(d,c):d||this.getCachedPage(this.ssi.currentCollection.id,c))?Ss_input.tools.findByKey(d.data,"name",a):!1},cleanHistory:function(){var b=this.getCachedPage();sessionStorage.removeItem("historyCache");this.cachedPages=
[];this.setCache([b])}})})(jQuery);
(function(e){Ss_input.plugins.infoBubble=Ss_input.Plugin.extend({template:"<#var index=0;for(var dataName in data){if(eval(thisS.condition))continue;#><#=thisS.translate(dataName,thisS.translateFields)#>: <#=data[dataName]#><br><#index++;if (index == thisS.options.limit)break;}#>",defaults:{limit:4,excludeFields:[],excludeItems:"",translateFields:""},init:function(){this.options.translateFields=this.options.translateFields||this.ssi.options.translateFields;this.setEvent().setCondition();return this},
setCondition:function(){this.condition=0<this.options.excludeFields.length?"$.inArray(dataName,thisS.options.excludeFields)>-1":"false";return this},setEvent:function(){var b,a=this.ssi,d=this;a.$element.on("resetAction.ssi changeCollectionAction.ssi",function(){b&&clearTimeout(b)}).on("changeSchemaAction.ssi",function(a,b){d.options.includeFields=b.details;d.setCondition()});a.$content.on({"mouseenter.ssi":function(a){a.preventDefault();b||(b=setTimeout(function(){d.getInfoBubble(a)},2E3))},"mouseleave.ssi":function(){b&&
(clearTimeout(b),b=null)}},".ssi-displayDiv");return this},getInfoBubble:function(b){b=e(b.currentTarget);var a=this.ssi.getSelectedData(b)[0];if("true"!=eval(Ss_input.tools.dataReplace(this.options.excludeItems))){var a=Ss_input.tools.template(this.template,{thisS:this,data:a}),d=Ss_input.tools.tooltip(b,a,!0).appendTo(b.parents("#ssi-items")),a=b.position().left,c=b.position().top+b.height()+6;b.parents("#ssi-contentFiles").one("scroll",function(){d.remove()});d.css({top:c+"px",left:a+"px"}).removeClass("ssi-fadeOut");
return this}}})})(jQuery);
(function(e){Ss_input.plugins.nameBubble=Ss_input.Plugin.extend({init:function(){this.setEvents()},setEvents:function(){var b;this.ssi.$element.on("resetAction.ssi changeCollectionAction.ssi",function(){b&&clearTimeout(b)});this.ssi.$content.on({"mouseenter.ssi":function(a){var d=e(a.target);d.outerWidth()<d[0].scrollWidth&&(b||(b=setTimeout(function(){Ss_input.tools.tooltip(d,d.html()).css("max-width","350px")},2E3)))},"mouseleave.ssi":function(a){b&&(clearTimeout(b),b=null)}},".ssi-itemName")}})})(jQuery);
(function(e){var b=!1;Ss_input.plugins.contextMenu=Ss_input.Plugin.extend({rightClickItem:"",template:'<div class="ssi-dropDownWrapper"><ul id="ssi-contextMenuUl" class="custom-menu ssi-actionBtns"></ul></div>',init:function(){this.ssi.$content.append(this.template);this.setEvents()},setEvents:function(){var a=this.ssi,d=this,c;a.$element.on("resetAction.ssi",function(a){d.rightClickItem=""});a.$content.on("contextmenu",function(f){if(!e(f.target).is("input")){f.preventDefault();d.setRightClick(f);
var g=a.$content.find("#ssi-contextMenuUl"),h=e(this).offset(),k=f.pageX-h.left;f=f.pageY-h.top;g.addClass("ssi-appear");c||setTimeout(function(){c=g.height()},150);f>a.$content.height()-c+75&&(f-=c);g.css({top:f+"px",left:k+"px"});b=!0}}).on("mouseup.ssi",function(c){b&&0< !e(c.target).parents("#ssi-contextMenuUl").length&&(a.$content.find("#ssi-contextMenuUl").removeClass("ssi-appear"),d.rightClickItem="",a.$content.find(".ssi-mustSelect").addClass("disabled").prop("disabled",!0),b=!1)}).find("#ssi-contextMenuUl").on("mouseup.ssi",
function(){e(this).removeClass("ssi-appear");b=!1})},setRightClick:function(a){var b=this.ssi;a=b.get$mainElement(e(a.target));if(a.hasClass("ssi-selectable")){var c=this.ssi.$content.find("#ssi-contextMenuUl");c.find(".ssi-mustSelect").removeClass("disabled");c.find(".ssi-hidden").removeClass("ssi-hidden");this.rightClickItem=a;b.checkExcludedButtons(function(a){a=b.$content.find("#ssi-contextMenuUl").find(a);var c=a.closest("ul");0==c.children().length-a.length&&c.parent("li").addClass("ssi-hidden")})}else b.$content.find(".ssi-mustSelect").addClass("disabled")}})})(jQuery);
(function(e){Ss_input.plugins.select=Ss_input.Plugin.extend({init:function(){var b=this.ssi,a=this;b.addButton({label:'<span class="icon ssi-selectIcon"></span> '+this.translate("select"),id:"",className:"",method:function(){a.mSelect(b.get$mainElement(b.plugins.contextMenu.rightClickItem))},selectionRequired:!0},"listButton",["contextMenu"]);this.selectionList=[];this.removeSelectedList();this.setEvents()},setEvents:function(){var b=this.ssi,a=this,d=b.addButton({label:'<div class="icon ssi-selectImgIcon"></div>',
id:"",className:"ssi-selectItem",method:function(c){a.mSelect(b.get$mainElement(e(c.currentTarget)))},selectionRequired:!0},"itemButton");this.ssi.$element.on("appendItemAction.ssi",function(a,b){b.$element.find("div.ssi-optionsDiv").append(d.clone(!0))});b.$element.on("resetAction.ssi changeCollectionAction.ssi",function(){a.removeSelectedList()});b.$content.on("click.ssi",".ssi-selectable",function(c){var d=e(c.currentTarget);"details"===a.options.defaultPreviewType&&d.hasClass("ssi-displayDiv")||
(c.preventDefault(),c.ctrlKey?a.mSelect(b.get$mainElement(d)):(d=e(c.target),"details"!==a.options.defaultPreviewType||d.is("a")||d.parent().is("a")||a.removeSelectedList()))}).on("mousedown.ssi",function(c){var d;if(0<a.selectionList.length){d=e(c.target);var g=b.$content.find(".ssi-itemWrapper"),h=g.is(c.target),g=0===g.has(c.target).length,k=d.hasClass("ssi-selectionRequired");0<a.selectionList.length&&(c.ctrlKey||h||!g||d.parents("ul").hasClass("ssi-dropdown")||k||d.is("a")||d.parents("ul").hasClass("custom-menu")||
a.removeSelectedList())}})},mSelect:function(b){b=e(b);var a=this.ssi;0==this.selectionList.length&&(this.ssi.$content.find(".ssi-mustSelect").removeClass("disabled"),a.$content.find(".ssi-selectionRequired").removeClass("ssi-hidden"));b.hasClass("ssi-mActive")?(b.removeClass("ssi-mActive"),Ss_input.tools.removeFromArray(this.selectionList,b.attr("data-ID")),1>this.selectionList.length&&a.$content.find(".ssi-selectionRequired").addClass("ssi-hidden")):(b.addClass("ssi-mActive"),b.data("info"),this.selectionList.push(b.attr("data-ID")));
a.checkExcludedButtons()},removeSelectedList:function(){var b=this.ssi;this.selectionList=[];b.$content.find(".ssi-mActive").removeClass("ssi-mActive");b.$content.find(".ssi-selectionRequired").addClass("ssi-hidden");b.$content.find(".ssi-mustSelect").addClass("disabled");return this}})})(jQuery);
(function(e){Ss_input.fileSystemHandlers["delete"]=Ss_input.Handler.extend({init:function(){this.defaults={stringifyData:!0,sendId:"inForm",ajaxOptions:{url:this.storage.options.scriptsPath+"/deletedirAction.php"}};this.setEvents()},setEvents:function(){var b=this.ssi,a=this;this.ssi.$element.on("removeItemAction.ssi",function(d,c){if(!c.isFile(b.fileSystem.options.allowed)){a.ssi.$element.trigger("removeCollectionAction.ssi",[c.replace(b.fileSystem.options.rootPath,"")]);var e=b.plugins.sidebar;
e&&e.deleteTree(c)}})}})})(jQuery);(function(e){Ss_input.fileSystemHandlers.imgBox=Ss_input.Handler.extend({defaults:{excludeItems:'condition:(field:(mimeType).split("/")[0]!="image")',imageField:"path"}})})(jQuery);(function(e){Ss_input.fileSystemHandlers.infoBubble=Ss_input.Handler.extend({defaults:{excludeFields:["ext","name","path"],includeFields:[],excludeItems:'condition:(field:(mimeType)=="directory")',translateFields:!0}})})(jQuery);
(function(e){Ss_input.fileSystemHandlers.scan=Ss_input.Handler.extend({group:"fileSystem",defaults:{titleField:"name",idField:"path",displayImage:'condition:(field:(mimeType).split("/")[0]=="image"? field:(path):"")',itemClass:'condition:(field:(mimeType).split("/")[0]=="image"||field:(mimeType).split("/")[0]=="directory"?field:(mimeType).split("/")[0]:"ssi-empty")'}})})(jQuery);
(function(e){Ss_input.fileSystemHandlers.search=Ss_input.Handler.extend({group:["fileSystem"],init:function(){this.defaults={searchFields:["name","ext","mimeType"],deepSearch:{multiple:!1,data:{rootPath:this.ssi.fileSystem.options.rootPath+"/"},ajaxOptions:{url:this.ssi.fileSystem.options.scriptsPath+"/deepSearchAction.php"}}}}})})(jQuery);
(function(e){Ss_input.fileSystemHandlers.selectAll=Ss_input.Handler.extend({group:["fileSystem"],defaults:{selectableClasses:{folders:"directory",images:"image",textFiles:"text"},translateFields:!0}})})(jQuery);
(function(e){Ss_input.fileSystemHandlers.selection=Ss_input.Handler.extend({group:"fileSystem",defaults:{pathType:"relative",excludeItems:'condition:(field:(mimeType)=="directory")',modeOptions:{selectionField:"path"}},init:function(){var b=this.plugin;this.ssi.$element.on("selectionAction.ssi",function(a,d){"absolute"==b.options.pathType&&(d.selection=document.location.protocol+"//"+window.location.hostname+d.selection)})}})})(jQuery);
(function(e){Ss_input.fileSystemHandlers.sidebar=Ss_input.Handler.extend({group:"fileSystem",defaults:{},extend:{copyTree:function(b,a,d,c){d=d||!0;b=this.ssi.$content.find("#ssi-sidebar").find(document.getElementById(b));c||(b=b.clone());a=b.attr({id:a}).children("a.ssi-listAnchor").attr({href:a}).html(Ss_input.tools.basename(a)).find("ul");a.css("display","none");a.parent("li").find(".active").removeClass("active");a=b.parent();if(!d)return b;d&&this.addTree("",this.ssi.fileSystem.options.rootPath+
this.ssi.currentCollection.id,b);c&&0===a.children().length&&a.parent().removeClass("parent").find("a.ssi-treeTrigger").remove()}},init:function(){this.getData();this.setEvent();this.defaults={className:" ssi-fileSystem",fieldDefinition:{name:"name",id:"url",url:"url",children:"children",className:"className"}}},getData:function(){var b=this;this.ssi.ajaxCall({data:{rootPath:this.storage.options.rootPath+"/"},url:b.storage.options.scriptsPath+"/scanFolderAction.php"},function(a){b.setSidebar(a)})},
setSidebar:function(b){"treeView"==this.plugin.options.mode?b=[{name:"root",url:this.ssi.fileSystem.getPath("/"),children:b,active:!0}]:b.unshift({name:'<div class="icon ssi-rootIcon"></div> root',url:this.ssi.fileSystem.getPath("/"),id:"/",children:[]});this.plugin.setSidebar(b)},setEvent:function(){var b=this.ssi;b.$content.on("click.ssi","#ssi-sidebarContent .ssi-listAnchor",function(a){b.fileSystem.scanDir(e(a.currentTarget).attr("href"));e(this).parents().find(".ssi-treeViewCurrent").removeClass("ssi-treeViewCurrent");
e(this).parents().find(".ssi-treeViewRCurrent").removeClass("ssi-treeViewRCurrent");e(this).addClass("ssi-treeViewRCurrent");return!1});b.$element.on("changeCollectionAction.ssi",function(){b.$content.find(".ssi-treeViewCurrent").removeClass("ssi-treeViewCurrent");b.$content.find(".ssi-treeViewRCurrent").removeClass("ssi-treeViewRCurrent")})}})})(jQuery);(function(e){Ss_input.fileSystemHandlers.sort=Ss_input.Handler.extend({defaults:{sortType:"asc",sortBy:"ext",sortableFields:["ext","name","date"]}})})(jQuery);
(function(e){var b=[];Ss_input.fileSystemHandlers.upload=Ss_input.Handler.extend({group:["fileSystem"],extend:{onEachUpload:function(a){if("success"===a.uploadStatus){var d=a.name.replace(" ","-");a={name:d,mimeType:a.type,date:Ss_input.tools.getDate(),path:this.ssi.fileSystem.getPath(d),size:a.size,ext:Ss_input.tools.getExtension(a.name),dimensions:"unknown"};b.push(a)}}},init:function(){this.setEvents()},setEvents:function(){var a=this;this.ssi.$element.on("uploadCloseAction.ssi",function(){a.appendItems()})},
appendItems:function(){b.length&&this.ssi.plugins.scan.appendItems(b);b=[];this.ssi.$element.trigger("resetAction")}})})(jQuery);
//# sourceMappingURL=ss-input.min.js.map

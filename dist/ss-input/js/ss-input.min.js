(function(e,a){function b(b){var c;e(window).bind("beforeunload",function(){b.$element.trigger("resetAction.ssi").trigger("closeAction.ssi").off(".ssi")});e(window).on("resize."+b.uniqueId,Ss_input.tools.debounce(function(){d("",b);console.log(11)},500));b.$content.on({"mouseenter.ssi":function(b){b.preventDefault();c=e(this).find(".ssi-optionsDiv");c.fadeIn(200)},"mouseleave.ssi":function(){!1===c.hasClass("selected")&&c.fadeOut(200)}},".ssi-displayDiv");b.$element.on("closeAction.ssi",function(){a.removeAll();
b.currentCollection={};b.initializedButtons=[];b.readOnlyMode="";e(this).off(".ssi");e(window).off("."+b.uniqueId);e("body").off(".ssi")});b.$content.on("click",function(b){e(b.target).is("input")||e(this).focus()})}function c(a){var c=Ss_input.tools.keyExists(a.requireAfter,Ss_input.plugins),d=Ss_input.tools.arrayValuesInArray(a.requireAfter,a.pluginNames);a.pluginNames=a.pluginNames.concat(d);if(0!=c.length)return console.log("Some requirements are missing: "+c.toString()),!1;a.$content=e(Ss_input.templates.mainContent);
"modalWindow"!==a.options.showTo&&a.$content.append(Ss_input.templates.bottomButtons);e.isEmptyObject(a.plugins)?a.pluginInit(a.pluginNames):a.resetPlugins(a.plugins);a.$element.trigger("showAction");c=a.buttonSelectors;a.$content.find(c.menu).append(f[c.menu]);delete f[c.menu];for(var k in f)try{var g=k.split(","),h;if(0!=(h=Ss_input.tools.keyExists(g,a.initializedButtons)).length)for(var c=0,r=h.length;c<r;c++)switch(a.initializedButtons[h[c]]=!0,d=a,Ss_input.tools.findKey(h[c],d.buttonSelectors)){case "actions":d.$content.find(d.buttonSelectors.menu).append(d.addButton({id:"ssi-actionsBtn",
title:d.language.actions,label:'<div class="icon ssi-actionsIcon"></div>',dropDown:!0,selectionRequired:!0},"menuButton",!1));break;case "options":d.$content.find(d.buttonSelectors.menu).append(d.addButton({id:"ssi-TasksBtn",title:d.language.options,label:'<div class="icon ssi-optionsIcon"></div>',dropDown:!0},"menuButton",!1));break;case "openWith":d.$content.find(d.buttonSelectors.contextMenu).append(d.addButton({id:"ssi-openWithBtn",title:d.language.openWith,label:'<span class="icon ssi-openWithIcon"></span>'+
d.language.openWith,selectionRequired:!0,subMenu:!0},"listButton",!1));break;case "editWith":d.$content.find(d.buttonSelectors.contextMenu).append(d.addButton({id:"ssi-editWithBtn",title:"editWith",label:'<span class="icon ssi-editWithIcon"></span>editWith',subMenu:!0,selectionRequired:!0},"listButton",!1))}a.$content.find(k).append(f[k])}catch(A){}f={};b(a);return a.$content}function d(b,a){b=a.$content.find("#ssi-menuButtons").height()-44+(b||(a.$content.hasClass("ssi-multiPickMode")&&"modalWindow"!=
a.options.showTo?115:70));var c=parseInt(a.$content.parent().height())-b;a.$content.find("#ssi-mainContent").css("height",c)}var f={},g=0;this.Ss_input=function(b,a){this.ssi_excludeList={};this.options=e.extend(!0,{plugins:[],modalOptions:{sizeClass:"large",fixedHeight:!0,fitScreen:!0,buttons:[]},permissions:["all"],excludePlugin:[],language:"en",mode:"selection",storageType:"fileSystem",showTo:"modalWindow",responseValidation:!1},a);this.requireAfter=["scan"];this.uniqueId=g;this.readOnlyMode=!1;
this.plugins=[];this.pluginNames=[];this.handlersGroup="handlers";this.corePlugins=[];this.initializedButtons={};this.readyState=!1;this.language=Ss_input.locale[this.options.language];this.$element=e(b);g++;this.init()};Ss_input.prototype.buttonSelectors={menu:"#ssi-menuButtons",contextMenu:"#ssi-contextMenuUl",options:"#ssi-TasksBtn+ul",actions:"#ssi-actionsBtn+ul",items:".ssi-optionsDiv",bottom:"#ssi-rightButtons",openWith:"#ssi-openWithBtn ul",editWith:"#ssi-editWithBtn ul"};Ss_input.prototype.init=
function(){var b=Ss_input.tools.keyExists(this.options.storageType,Ss_input.storageTypes),b=b.concat("manager"!=this.options.mode?Ss_input.tools.keyExists(this.options.mode,Ss_input.modePlugins):[],Ss_input.tools.keyExists(this.require,Ss_input.plugins));if(0!=b.length)console.log("Some requirements are missing: "+b.toString());else{if(0<this.options.plugins.length){if(this.pluginNames=this.options.plugins,b=Ss_input.tools.arrayValuesInArray(this.require,this.pluginNames))this.pluginNames=this.pluginNames.concat(b)}else for(var a in Ss_input.plugins)this.pluginNames.push(a);
this.pluginInit(this.options.storageType,Ss_input.storageTypes);this[this.options.storageType]=this.corePlugins[this.options.storageType];"manager"!=this.options.mode?(this.pluginInit(this.options.mode,Ss_input.modePlugins),this[this.options.mode]=this.corePlugins[this.options.mode]):("modalWindow"!=this.options.showTo&&(this.options.showTo=this.$element),this.$element.addClass("ss-input"));if("modalWindow"===this.options.showTo)h(this);else if(b=e(this.options.showTo),b.is("div")){if(this.$element.trigger("earlyShowAction"),
a=c(this))b.first().addClass("ssi-mainModal").html(a),d(null,this)}else console.log("Use a div.")}};var h=function(b){e.extend(b.options.modalOptions,{className:"ssi-mainModal",onClose:function(){b.$element.trigger("resetAction.ssi").trigger("closeAction.ssi")}});b.$element.on("click",function(a){a.preventDefault();b.$element.trigger("earlyShowAction");if(e(a.target).hasClass("ss-input")){a=b.createWindow(b.options.modalOptions);var f=c(b);f?(a.setContent(f),d(null,b)):a.close()}})};Ss_input.prototype.destroy=
function(){this.$element.trigger("closeAction.ssi");this.$content.remove()};Ss_input.prototype.checkPermissions=function(b,a){return("read"===b||"all"===this.options.permissions[0]||0===Ss_input.tools.arrayValuesInArray(b,this.options.permissions).length||-1!==e.inArray(a,this.options.permissions))&&(-1===e.inArray(a,this.options.excludePlugin)||-1!==e.inArray(a,this.require)||-1!==e.inArray(a,this.requireAfter))};Ss_input.prototype.pluginInit=function(b,a){b=Ss_input.tools.toArray(b);for(var c=0,
d=b.length;c<d;c++)try{a=a||Ss_input.plugins;if(0!=Ss_input.tools.keyExists(b[c],a).length)throw"did not load";if(b[c]){var f=new a[b[c]](this,this.options[b[c]]);if(this.checkPermissions(f.permissions,b[c])&&!e.isEmptyObject(f)&&0!==Ss_input.tools.keyExists(b[c],this[f.type]).length){var g=Ss_input.tools.keyExists(f.require,a);if(0===g.length){var k=Ss_input.tools.keyExists(f.require,this[f.type]);this.pluginInit(k);if(0===Ss_input.tools.keyExists(k,this.plugins).length||0===Ss_input.tools.keyExists(k,
this.corePlugins).length){this[f.type][b[c]]=f;if(Ss_input[this.handlersGroup].hasOwnProperty(b[c])){var h=b[c];new Ss_input[this.handlersGroup][h](this,f,h)}else if(Ss_input.handlers.hasOwnProperty(b[c])){var l=b[c];new Ss_input.handlers[l](this,f,l)}f.init()}else throw"requires "+k.toString()+".";}else throw"requires "+g.toString()+".";}}}catch(v){console.log(b[c]+" "+v)}};Ss_input.prototype.resetPlugins=function(b){for(var a in b){var c=b[a];Ss_input[this.handlersGroup].hasOwnProperty(a)?new Ss_input[this.handlersGroup][a](this,
c,a):Ss_input.handlers.hasOwnProperty(a)&&new Ss_input.handlers[a](this,c,a);c.init()}};Ss_input.prototype.addButton=function(b,a,c,d){var g={menuButton:["menu","bottom"],listButton:["options","actions","contextMenu","openWith","editWith"],itemButton:[]};a=a||"menuButton";if("bottom"==c&&"modalWindow"===this.options.showTo)this.options.modalOptions.buttons.push(b);else{var k=new Ss_input.Button(b,a,this.$content);if(c)if(c instanceof e)c.append(k);else if("itemButton"!=a){for(var h=[],l=0,m=c.length;l<
m;l++)-1!==e.inArray(c[l],g[a])&&h.push(this.buttonSelectors[c[l]]);f.hasOwnProperty(h.toString())?f[h.toString()].push(k):f[h.toString()]=[k];d&&b.selectionRequired&&(this.ssi_excludeList[b.className]=d)}return k}};Ss_input.prototype.notify=function(b,c){a.notify(b,{overrideOther:!0,content:c})};Ss_input.prototype.checkExcludedButtons=function(b){var a=this.ssi_excludeList,c=this.get$selectedItems(),d=this.$content.find(".ssi-mustSelect").removeClass("ssi-hidden disabled"),f;for(f in a)c.each(function(){e(this).data("info");
if("false"==eval(Ss_input.tools.dataReplace(a[f],"info"))){var c=d.filter("."+f).addClass("ssi-hidden");"function"===typeof b&&b(c);return!1}})};Ss_input.prototype.createWindow=function(b,c){return a.show(b,c)};Ss_input.prototype.get$mainElementById=function(b,a){a=a||this.$content;return a.find(".ssi-mainElement[data-ID='"+b+"']")};Ss_input.prototype.get$mainElement=function(b){return b.hasClass("ssi-mainElement")?b:b.parents(".ssi-itemWrapper").find(".ssi-mainElement")};Ss_input.prototype.getId=
function(b){if(b)return"string"===typeof b?this.get$mainElementById(b).attr("data-ID"):this.get$mainElement(b).attr("data-ID");var a=[];this.get$selectedItems().each(function(){a.push(e(this).attr("data-ID"))});return a};Ss_input.prototype.get$itemWrapper=function(b){return b.parents(".ssi-itemWrapper")};Ss_input.prototype.get$selectedItems=function(b){try{var a=this.plugins.select;return b?this.get$mainElement(b):0<a.selectionList.length?e(".ssi-mActive"):this.plugins.contextMenu.rightClickItem||
e()}catch(m){return e()}};Ss_input.prototype.getSelectedData=function(b){try{var a=[];this.get$selectedItems(b).each(function(){a.push(e(this).data("info"))});return a}catch(m){return[]}};Ss_input.prototype.getSelectedField=function(b,a){for(var c=this.getSelectedData(a),d=[],f=0,e=c.length;f<e;f++)try{d.push(c[f][b])}catch(r){}return d};Ss_input.prototype.getPageData=function(b){var a=this.plugins.cache,c=[];if(a)c=a.getCachedPage(b).data;else{if(b&&b!=this.currentCollection.id)return[];this.$content.find(".ssi-selectable").each(function(){c.push(e(this).data("info"))})}return c||
[]};Ss_input.prototype.getItemData=function(b,a,c){return Ss_input.tools.findByKey(this.getPageData(c),b,a)};Ss_input.prototype.getUrlList=function(){try{var b=this.plugins.select;return 0<b.selectionList.length?b.selectionList:[this.plugins.contextMenu.rightClickItem.attr("data-ID")]}catch(l){return[]}};Ss_input.prototype.ajaxCall=function(b,a,c){b=b||{};var d=this.$content.find("#ssi-progressBar"),f=this;b=e.extend({},{xhr:function(){var b=new window.XMLHttpRequest;b.addEventListener("progress",
function(b){b.lengthComputable?d.css({width:b.loaded/b.total*100+"%"}):d.css("width","100%")},!1);return b},type:"POST",beforeSend:function(){f.$content.find("#ssi-loader").removeClass("ssi-hidden");d.removeClass("ssi-hidden")}},b);b.stringifyData&&(b.data=JSON.stringify(b.data));d.removeClass("hide");this.$element.trigger("sendRequestAction.ssi");e.ajax(b).done(function(b,c,d){f.$element.trigger("responseAction.ssi");if(a){var g;try{g=e.parseJSON(b)}catch(v){g=b}b=g;if(f.options.responseValidation)if(g=
f.options.responseValidation,"object"===typeof g.validationKey&&"validationKey"==g.resultKey)if(b.hasOwnProperty(g.validationKey.success))a(b[g.validationKey.success],c,d);else throw{type:"error",msg:b[g.validationKey.error]};else if(b[g.validationKey]==g.success)a(b[g.resultKey],c,d);else throw{type:"error",msg:b[g.resultKey]};else a(b,c,d)}}).fail(function(b,a){c&&c();console.log(arguments);console.log(" Ajax error: "+a)}).complete(function(){f.reloadProgressbar()})};Ss_input.prototype.openCollection=
function(b,a,c){this.$element.trigger("changeCollectionAction.ssi");this.plugins.scan.scanCollection(b,a,c)};Ss_input.prototype.reloadProgressbar=function(){this.$content.find("#ssi-loading").html("");var b=this;setTimeout(function(){b.$content.find("#ssi-loader").addClass("ssi-hidden");b.$content.find("#ssi-progressBar").addClass("ssi-hidden").css("width","0%")},500)};e.fn.ss_input=function(b){return this.each(function(){new Ss_input(this,b)})};return Ss_input})(jQuery,ssi_modal);
var Button=function(e,a,b,c){this.options=$.extend({},{label:"",title:"",dropDown:!1,id:"",attributes:"",selectionRequired:!1,stopPropagation:!0,keyPress:"",subMenu:!1,method:function(){},className:"",$element:b,$input:c},e);var d=this;e=Ss_input.tools.template(Ss_input.templates.buttons[a],this.options);this.$element=$(e).click(function(b){b.preventDefault();d.options.stopPropagation&&b.stopPropagation();$(this).hasClass("disabled")||"function"!==typeof d.options.method||(b=[b],d.options.$input&&
b.push(Ss_input.tools.sanitizeInput(c.val())),d.options.method.apply(this,b))});this.options.attributes&&this.$element.attr(this.options.attributes);this.options.keyPress&&this.setKeyEvents();this.options.input?this.getInput():this.options.dropDown?this.setDropDown():this.options.subMenu&&this.setSubMenu();return this.$element};Ss_input.Button=Button;
Button.prototype={setSubMenu:function(){for(var e=[],a=0,b=this.options.subMenu.length;a<b;a++)e.push(new Button(this.options.subMenu[a],"listButton",this.options.$element));this.$element.addClass("parent").append($("<ul>").html(e))},setDropDown:function(){for(var e=$('<div class="ssi-dropDownWrapper">'),a=[],b=0,c=this.options.dropDown.length;b<c;b++)a.push(new Button(this.options.dropDown[b],"listButton",this.options.$element));this.$element=e.append(this.$element.addClass("ssi-dropDown"),$('<ul class="ssi-dropdown">').html(a))},
setKeyEvents:function(){var e=this,a="e.which == thisS.options.keyPress.keyCode &&!$(e.target).is('input')";this.options.keyPress.ctrl&&(a+="&&e.ctrlKey");this.options.keyPress.shift&&(a+="&&e.shiftKey");$(this.options.$element||"body").on("keydown.ssi",function(b){e.$element.hasClass("disabled")||1!=eval(a)||(b.stopPropagation(),b.preventDefault(),e.$element.eq(0).trigger("click"))})},getInput:function(){var e=new Ss_input.Input(this.options.input),a=this,b=$('<div class="ssi-btnContainer '+this.options.input.containerClass+
'">').append(e),c=$("<div>").append(this.$element,b);this.options.input.enterKey&&e.keyup(function(b){13==b.keyCode&&$(this).next().trigger("click")});this.$element.click(function(c){c.preventDefault();c.stopPropagation();var d=$(this).addClass("disabled");$(".ssi-btnContainer").not("."+a.options.input.containerClass).hide(500);b.toggle(500,function(){d.removeClass("disabled");e.focus()})});if(this.options.input.buttons)for(var d=0,f=this.options.input.buttons.length;d<f;d++)b.append(new Button(this.options.input.buttons[d],
"menuButton",this.options.$element,e));return this.$element=c}};
(function(e){Ss_input.handlers=[];var a=function(b,a,d){this.ssi=b;this.plugin=a;this.pluginName=d;this.storage=b.corePlugins[b.options.storageType];this.init();this.setDefaults(this.defaults);this.extendPlugin(this.extend)};Ss_input.Handler=a;a.prototype={locale:{},group:"fileSystem",template:{},extend:{},defaults:{},require:[],init:function(){},extendPlugin:function(b){e.extend(Object.getPrototypeOf(this.plugin),b)},setDefaults:function(b){e.extend(this.plugin.options,b,this.ssi.options[this.pluginName]||
{})},unload:function(b){this.ssi.pluginNames[this.ssi.pluginNames.indexOf(b)]=null;Ss_input.tools.removeByKey(this.ssi[this.type],b)}};a.extend=function(b,a){var c=a?Ss_input.handlers[a]:this,f;if(c)return f=b.hasOwnProperty("constructor")?b.constructor:function(){return c.apply(this,arguments)},e.extend(f.prototype,c.prototype,b),f;console.log("The handler "+a+" hasn't initialize!")}})(jQuery);
var Input=function(e,a){this.options=$.extend({},{checked:!0,className:"",id:"",name:"",type:"text",value:""},e);this.defaultValue=a||this.options.value;if(this[this.options.type])this[this.options.type]();else this.setInput();return $(this.$element)};Ss_input.Input=Input;
Input.prototype={select:function(){this.options.select=this.options.select||[];this.options.multiple=this.options.multiple||"";var e={value:"",label:"",selected:!1},a="";this.options.multiple=this.options.multiple?"multiple":"";for(var b=0,c=this.options.options.length;b<c;b++){var d=$.extend({},e,this.options.options[b]);"undefined"!==typeof this.defaultValue&&(this.defaultValue=Ss_input.tools.toArray(this.defaultValue),d.selected=-1!==$.inArray(d.value,this.defaultValue));d.selected=d.selected?
"selected":"";a+=Ss_input.tools.template(Ss_input.templates.input.selectItem,{options:d})}this.$element=Ss_input.tools.template(Ss_input.templates.input.select,{options:this.options,selectItems:a})},radio:function(){for(var e="",a={value:"",label:"",name:this.options.name,checked:!1,type:"radio"},b=0;b<this.options.radio.length;b++){var c=$.extend({},a,this.options.radio[b]);c.checked="undefined"!==typeof this.defaultValue?c.value==this.defaultValue:c.checked;e+=Ss_input.tools.template(Ss_input.templates.input.radio,
{options:c})}this.$element=Ss_input.tools.template(Ss_input.templates.input.radioGroup,{options:this.options,radioGroupItems:e})},checkbox:function(){this.options.checked="undefined"!==typeof this.defaultValue?this.defaultValue:this.options.checked;this.$element=Ss_input.tools.template(Ss_input.templates.input.checkbox,{options:this.options})},setInput:function(){this.options.value=this.defaultValue;var e=Ss_input.templates.input;this.$element=Ss_input.tools.template(e[this.options.type]||e.text,
{options:this.options})}};
(function(e){Ss_input.plugins=[];Ss_input.storageTypes=[];Ss_input.modePlugins=[];var a=function(b,a){for(var c=0,f=this.externalResources.length;c<f;c++)try{var g=this.externalResources[c];eval(g)}catch(h){return console.log("A required external resource not found:"+g),{}}this.ssi=b;this.options=e.extend({},this.defaults,a)};Ss_input.Plugin=a;a.prototype={permissions:"read",locale:{},defaults:{},template:{},externalResources:[],type:"plugins",defaultLanguage:"en",require:[],translate:function(b,
a){var c;if(0==a)return b;try{c=this.locale[this.ssi.options.language][b];if(!c)throw"error";return c}catch(f){try{c=Ss_input.locale[this.ssi.options.language][b];if(!c)throw"error";return c}catch(g){try{c=Ss_input.locale[this.defaultLanguage][b];if(!c)throw"error";return c}catch(h){return b}}}},init:function(){},unload:function(b){this.ssi.pluginNames[this.ssi.pluginNames.indexOf(b)]=null;Ss_input.tools.removeByKey(this.ssi[this.type],b)}};a.extend=function(b,a,d){d=d||Ss_input.plugins;var c=a?d[a]:
this;if(!c)return console.log("The plugin "+a+" hasn't initialize!"),function(){};a=b.hasOwnProperty("constructor")?b.constructor:function(){return c.apply(this,arguments)};e.extend(!0,a.prototype,c.prototype,b);return a}})(jQuery);
(function(e){Ss_input.templates={buttons:{menuButton:'<# if(selectionRequired) className+=" ssi-selectionRequired ssi-hidden";  #><button id="<#= id #>" data-title="<#= title #>" class="ssi-tooltip <#= className #> ssi-mBtn"> <#= label #> </button>',listButton:'<# var LiClassName; if(selectionRequired){className+=" ssi-mustSelect disabled";} #><li id="<#= id #>" class="<#= className #> "><a href="#" > <#= label #> </a></li>',itemButton:'<a href="#" id="<#= id #>" class="<#= className #> ssi-optionBtn"><#= label #></a>'},
input:{select:'<select <#= options.multiple#> id = "<#=options.id#>" name ="<#=options.name#>" class="<#=options.className#>" ><#= selectItems#></select >',selectItem:'<option <#=options.selected#> value="<#=options.value#>"><#=options.label#></option>',textarea:'<textarea  id = "<#=options.id#>"  name = "<#=options.name#>" class= "<#=options.className#>"  <#=options.readOnly#> ><#=options.value#></textarea>',text:'<input type = "<#=options.type#>" placeholder="<#= options.placeholder#>" id = "<#=options.id#>"  name = "<#=options.name#>" class= "<#=options.className#>" value = "<#=options.value#>"/ >',
radioGroup:'<div class="ssi-radioGroup <#=options.className#>" id="<#=options.id#>" ><#=radioGroupItems#></div>',radio:'<div class="ssi-radioItem"><label><#=options.label#></label><input type="<#=options.type#>"<#=options.checked?"checked":""#>  name="<#=options.name#>"  value="<#=options.value#>"/></div>',checkbox:'<div class="ssi-radioItem"><input type="<#=options.type#>"<#=options.checked?"checked":""#>  name="<#=options.name#>"  value="<#=options.value#>"/></div>'},mainContent:'<div id="ssi-content" tabindex="1"><div id="ssi-menuButtons" class="ssi-menuButtons"></div><div id="ssi-topBarWrapper" class="ssi-topBarWrapper"> <div class="ssi-topBarButtonArea"></div><div id="ssi-topBar" class="ssi-topBar"> <div id="ssi-loader" class="ssi-hidden ssi-loadingIcon ssi-pathLoader"></div><div id="ssi-progressBar" class="ssi-progress"></div></div></div><div id="ssi-mainContent" class="ssi-mainContent"><div id="ssi-items" class="ssi-items"><div id="ssi-contentFiles"></div></div></div></div>',
bottomButtons:'<div id="ssi-bottomButtons" class="ssi-bottomButtons"><div id="ssi-leftButtons" class="ssi-leftButtons"></div><div id="ssi-rightButtons" class="ssi-rightButtons"></div></div>'}})(jQuery);
Ss_input.locale={en:{extError:"$1 files are not supported",existError:"This file already exists!",existInListError:"This file is already in the list.",uploadImg:"Upload image",replaceMsg:'"File with name $1 already exists in this folder.Do you want to replace it?',"continue":"Continue",replace:"Replace",uploadSuccess:"The file uploaded successfully!",pickSuccess:"The remote file was selected successfully!",successCreated:"The folder created successfully!",fileSuccessCreated:"The file created successfully!",
mkdirSuccess:"The folder created successfully!",icons:"Icons",insert:"Insert",home:"Home",options:"Options",defaultValues:"Default values",date:"Date",size:"Size",type:"Type",dimensions:"Dimensions",name:"Name",ok:"Ok",cleanCache:"Clean cache",cut:"Cut",copy:"Copy",paste:"Paste",createCopy:"Create copy",skip:"Skip","delete":"Delete",deleteMsg:"Are you sure that you want to permanently delete the selected files?",delSuccess:"The file deleted successfully!",cancel:"Cancel",loadTime:"Load time",location:"Location",
info:"Info",details:"Details",preview:"Preview",small:"Small",medium:"Medium",large:"large",iconSize:"Icon size",createFolder:"Create folder",newFile:"New file",fileSaved:"The file saved!",folderExistError:"The folder with name $1 already exists!",previewType:"Preview",refresh:"Refresh",rename:"Rename",search:"Search",newDocument:"New document",editDocument:"Edit document",saveAsNew:"Save as new",saveAndNew:"Save and new",save:"Save",select:"Select",folders:"Folders",files:"Files",all:"All",sort:"Sort by",
uploadFiles:"Upload files",url:"Url",addSuccess:"The file added to your list!",successSave:"The record saved!",invalidUrlError:"The url you entered is not valid!",upload:"Upload",limitError:"You have reached the limit of $1 files.",selectedTooltip:"Selected files",selectedBtn:"Clear selected files",checkedTooltip:"Checked files",checkedBtn:"Clear checked files",addUrl:"Add a url",noItems:"Nothing in the list...",images:"Images",textFiles:"Text files",path:"Path",ext:"Extension",mimeType:"Media type",
download:"Download",openWith:"Open with..."},gr:{extError:"\u03a4\u03b1 $1 \u03b1\u03c1\u03c7\u03b5\u03af\u03b1 \u03b4\u03b5\u03bd \u03c5\u03c0\u03bf\u03c3\u03c4\u03b7\u03c1\u03af\u03b6\u03bf\u03bd\u03c4\u03b1\u03b9",existError:"\u0391\u03c5\u03c4\u03cc \u03c4\u03bf \u03b1\u03c1\u03c7\u03b5\u03af\u03bf \u03c5\u03c0\u03ac\u03c1\u03c7\u03b5\u03b9 \u03ae\u03b4\u03b7!",existInListError:"\u0391\u03c5\u03c4\u03cc \u03c4\u03bf \u03b1\u03c1\u03c7\u03b5\u03af\u03bf \u03c5\u03c0\u03ac\u03c1\u03c7\u03b5\u03b9 \u03ae\u03b4\u03b7 \u03c3\u03c4\u03b7 \u03bb\u03af\u03c3\u03c4\u03b1!",
uploadImg:"\u039c\u03b5\u03c4\u03b1\u03c6\u03cc\u03c1\u03c4\u03c9\u03c3\u03b7 \u03b5\u03b9\u03ba\u03cc\u03bd\u03b1\u03c2",upload:"\u039c\u03b5\u03c4\u03b1\u03c6\u03cc\u03c1\u03c4\u03c9\u03c3\u03b7",replaceMsg:"T\u03bf \u03b1\u03c1\u03c7\u03b5\u03af\u03bf \u03bc\u03b5 \u03cc\u03bd\u03bf\u03bc\u03b1 $1 \u03c5\u03c0\u03ac\u03c1\u03c7\u03b5\u03b9 \u03ae\u03b4\u03b7 \u03c3\u03b5 \u03b1\u03c5\u03c4\u03cc\u03bd \u03c4\u03bf\u03bd \u03c0\u03c1\u03bf\u03bf\u03c1\u03b9\u03c3\u03bc\u03cc. \u0398\u03ad\u03bb\u03b5\u03c4\u03b5 \u03bd\u03b1 \u03c4\u03bf \u03b1\u03bd\u03c4\u03b9\u03ba\u03b1\u03c4\u03b1\u03c3\u03c4\u03ae\u03c3\u03b5\u03c4\u03b5;",
"continue":"\u03a3\u03c5\u03bd\u03ad\u03c7\u03b5\u03b9\u03b1",successCreated:"\u039f \u03c6\u03ac\u03ba\u03b5\u03bb\u03bf\u03c2 \u03b4\u03b7\u03bc\u03b9\u03bf\u03c5\u03c1\u03b3\u03ae\u03b8\u03b7\u03ba\u03b5 \u03bc\u03b5 \u03b5\u03c0\u03b9\u03c4\u03c5\u03c7\u03af\u03b1!",fileSuccessCreated:"\u03a4\u03bf \u03b1\u03c1\u03c7\u03b5\u03af\u03bf \u03b4\u03b7\u03bc\u03b9\u03bf\u03c5\u03c1\u03b3\u03ae\u03b8\u03b7\u03ba\u03b5 \u03bc\u03b5 \u03b5\u03c0\u03b9\u03c4\u03c5\u03c7\u03af\u03b1!",replace:"\u0391\u03bd\u03c4\u03b9\u03ba\u03b1\u03c4\u03ac\u03c3\u03c4\u03b1\u03c3\u03b7",
uploadSuccess:"\u03bf \u03b1\u03c1\u03c7\u03b5\u03af\u03bf \u03c6\u03bf\u03c1\u03c4\u03ce\u03b8\u03b7\u03ba\u03b5 \u03b5\u03c0\u03b9\u03c4\u03c5\u03c7\u03ce\u03c2!",pickSuccess:"\u03a4\u03bf \u03b1\u03c0\u03bf\u03bc\u03b1\u03ba\u03c1\u03c5\u03c3\u03bc\u03ad\u03bd\u03bf \u03b1\u03c1\u03c7\u03b5\u03af\u03bf \u03b5\u03c0\u03b9\u03bb\u03ad\u03c7\u03b8\u03b7\u03ba\u03b5 \u03bc\u03b5 \u03b5\u03c0\u03b9\u03c4\u03c5\u03c7\u03af\u03b1!",mkdirSuccess:"\u039f \u03c6\u03ac\u03ba\u03b5\u03bb\u03bf\u03c2 \u03b4\u03b7\u03bc\u03b9\u03bf\u03c5\u03c1\u03b3\u03ae\u03b8\u03b7\u03ba\u03b5 \u03bc\u03b5 \u03b5\u03c0\u03b9\u03c4\u03c5\u03c7\u03af\u03b1!",
icons:"\u0395\u03b9\u03ba\u03bf\u03bd\u03af\u03b4\u03b9\u03b1",insert:"\u03a0\u03c1\u03bf\u03c3\u03b8\u03ae\u03ba\u03b7",home:"\u0391\u03c1\u03c7\u03b9\u03ba\u03ae",options:"\u0395\u03c0\u03b9\u03bb\u03bf\u03b3\u03ad\u03c2",defaultValues:"\u03a0\u03c1\u03bf\u03b5\u03c0\u03b9\u03bb\u03b5\u03b3\u03bc\u03ad\u03bd\u03b1",date:"\u0397\u03bc/\u03bd\u03b9\u03b1",size:"\u039c\u03ad\u03b3\u03b5\u03b8\u03bf\u03c2",type:"\u03a4\u03cd\u03c0\u03bf\u03c2",name:"\u038c\u03bd\u03bf\u03bc\u03b1",path:"\u0394\u03b9\u03b1\u03b4\u03c1\u03bf\u03bc\u03ae",
dimensions:"\u0394\u03b9\u03b1\u03c3\u03c4\u03ac\u03c3\u03b5\u03b9\u03c2",ok:"Ok",cleanCache:"\u0395\u03ba\u03ba\u03b1\u03b8\u03ac\u03c1\u03b9\u03c3\u03b7 cache",cut:"\u0391\u03c0\u03bf\u03ba\u03bf\u03c0\u03ae",copy:"\u0391\u03bd\u03c4\u03b9\u03b3\u03c1\u03b1\u03c6\u03ae",paste:"\u0395\u03c0\u03b9\u03ba\u03cc\u03bb\u03bb\u03b7\u03c3\u03b7",preview:"\u03a0\u03c1\u03bf\u03b5\u03c0\u03b9\u03c3\u03ba\u03cc\u03c0\u03b7\u03c3\u03b7",images:"\u0395\u03b9\u03ba\u03cc\u03bd\u03b5\u03c2",textFiles:"\u0391\u03c1\u03c7\u03b5\u03af\u03b1 \u03ba\u03b5\u03b9\u03bc\u03ad\u03bd\u03bf\u03c5",
createCopy:"\u0394\u03b7\u03bc\u03b9\u03bf\u03c5\u03c1\u03b3\u03af\u03b1 \u03b1\u03bd\u03c4\u03b9\u03b3\u03c1\u03ac\u03c6\u03bf\u03c5",skip:"\u03a0\u03b1\u03c1\u03ac\u03b2\u03bb\u03b5\u03c8\u03b7",deleteMsg:"\u0395\u03af\u03c3\u03c4\u03b5 \u03c3\u03af\u03b3\u03bf\u03c5\u03c1\u03bf\u03c2 \u03cc\u03c4\u03b9 \u03b8\u03ad\u03bb\u03b5\u03c4\u03b5 \u03bd\u03b1 \u03b4\u03b9\u03b1\u03b3\u03c1\u03ac\u03c8\u03b5\u03c4\u03b5 \u03bf\u03c1\u03b9\u03c3\u03c4\u03b9\u03ba\u03ac \u03c4\u03b1 \u03b5\u03c0\u03b9\u03bb\u03b5\u03b3\u03bc\u03ad\u03bd\u03b1 \u03b1\u03c1\u03c7\u03b5\u03af\u03b1;",
"delete":"\u0394\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae",delSuccess:"\u03a4\u03bf \u03b1\u03c1\u03c7\u03b5\u03af\u03bf \u03b4\u03b9\u03b1\u03b3\u03c1\u03ac\u03c6\u03b7\u03ba\u03b5 \u03bc\u03b5 \u03b5\u03c0\u03b9\u03c4\u03c5\u03c7\u03af\u03b1!",cancel:"\u0391\u03ba\u03cd\u03c1\u03c9\u03c3\u03b7",loadTime:"\u03a7\u03c1\u03cc\u03bd\u03bf\u03c2 \u03c6\u03cc\u03c1\u03c4\u03c9\u03c3\u03b7\u03c2",location:"\u03a4\u03bf\u03c0\u03bf\u03b8\u03b5\u03c3\u03af\u03b1",previewType:"\u03a0\u03c1\u03bf\u03b2\u03bf\u03bb\u03ae",
info:"\u03a0\u03bb\u03b7\u03c1\u03bf\u03c6\u03bf\u03c1\u03af\u03b5\u03c2",details:"\u039b\u03b5\u03c0\u03c4\u03bf\u03bc\u03ad\u03c1\u03b5\u03b9\u03b5\u03c2",ext:"\u0395\u03c0\u03ad\u03ba\u03c4\u03b1\u03c3\u03b7",small:"\u039c\u03b9\u03ba\u03c1\u03cc",medium:"\u039c\u03b5\u03c3\u03b1\u03af\u03bf",large:"\u039c\u03b5\u03b3\u03ac\u03bb\u03bf",iconSize:"\u039c\u03ad\u03b3\u03b5\u03b8\u03bf\u03c2 \u03b5\u03b9\u03ba\u03bf\u03bd\u03b9\u03b4\u03af\u03c9\u03bd",createFolder:"\u0394\u03b7\u03bc\u03b9\u03bf\u03c5\u03c1\u03b3\u03af\u03b1 \u03c6\u03b1\u03ba\u03ad\u03bb\u03bf\u03c5",
newFile:"\u039d\u03ad\u03bf \u03b1\u03c1\u03c7\u03b5\u03af\u03bf",fileSaved:"\u03a4\u03bf \u03b1\u03c1\u03c7\u03b5\u03af\u03bf \u03b1\u03c0\u03bf\u03b8\u03b7\u03ba\u03b5\u03cd\u03c4\u03b7\u03ba\u03b5!",folderExistError:"\u039f \u03c6\u03ac\u03ba\u03b5\u03bb\u03bf\u03c2 \u03bc\u03b5 \u03cc\u03bd\u03bf\u03bc\u03b1 $1 \u03c5\u03c0\u03ac\u03c1\u03c7\u03b5\u03b9 \u03ae\u03b4\u03b7",refresh:"\u0391\u03bd\u03b1\u03bd\u03ad\u03c9\u03c3\u03b7",rename:"\u039c\u03b5\u03c4\u03bf\u03bd\u03bf\u03bc\u03b1\u03c3\u03af\u03b1",
search:"\u0391\u03bd\u03b1\u03b6\u03ae\u03c4\u03b7\u03c3\u03b7",select:"\u0395\u03c0\u03b9\u03bb\u03bf\u03b3\u03ae",folders:"\u03a6\u03b1\u03ba\u03ad\u03bb\u03c9\u03bd",files:"\u0391\u03c1\u03c7\u03b5\u03af\u03c9\u03bd",all:"\u038c\u03bb\u03c9\u03bd",newDocument:"\u039d\u03ad\u03b1 \u03ba\u03b1\u03c4\u03bf\u03c7\u03cd\u03c1\u03c9\u03c3\u03b7",editDocument:"\u0394\u03b9\u03b1\u03bc\u03cc\u03c1\u03c6\u03c9\u03c3\u03b7",saveAsNew:"\u0391\u03c0\u03bf\u03b8\u03ae\u03ba\u03b5\u03c5\u03c3\u03b7 \u03c9\u03c2 \u03ba\u03b1\u03b9\u03bd\u03bf\u03cd\u03c1\u03b9\u03bf",
saveAndNew:"\u0391\u03c0\u03bf\u03b8\u03ae\u03ba\u03b5\u03c5\u03c3\u03b7 \u03ba\u03b1\u03b9 \u03ba\u03b1\u03b9\u03bd\u03bf\u03cd\u03c1\u03b9\u03bf",save:"\u0391\u03c0\u03bf\u03b8\u03ae\u03ba\u03b5\u03c5\u03c3\u03b7",sort:"\u03a4\u03b1\u03be\u03b9\u03bd\u03cc\u03bc\u03b7\u03c3\u03b7",url:"\u0394\u03b9\u03b5\u03cd\u03b8\u03c5\u03bd\u03c3\u03b7 url",addSuccess:"\u03a4\u03bf \u03b1\u03c1\u03c7\u03b5\u03af\u03bf \u03c0\u03c1\u03bf\u03c3\u03c4\u03ad\u03b8\u03b7\u03ba\u03b5 \u03c3\u03c4\u03b7 \u03bb\u03af\u03c3\u03c4\u03b1 !",
successSave:"\u0397 \u03b5\u03b3\u03b3\u03c1\u03b1\u03c6\u03ae \u03b1\u03c0\u03bf\u03b8\u03b7\u03ba\u03b5\u03cd\u03c4\u03b9\u03ba\u03b5!",invalidUrlError:"\u0397 \u03b4\u03b9\u03b5\u03cd\u03b8\u03c5\u03bd\u03c3\u03b7 URL \u03c0\u03bf\u03c5 \u03b5\u03b9\u03c3\u03ac\u03b3\u03b1\u03c4\u03b5 \u03b4\u03b5\u03bd \u03b5\u03af\u03bd\u03b1\u03b9 \u03ad\u03b3\u03ba\u03c5\u03c1\u03b7!",uploadFiles:"\u039c\u03b5\u03c4\u03b1\u03c6\u03cc\u03c1\u03c4\u03c9\u03c3\u03b7 \u03b1\u03c1\u03c7\u03b5\u03af\u03c9\u03bd",
limitError:"\u0388\u03c7\u03b5\u03b9\u03c2 \u03c6\u03c4\u03b1\u03c3\u03b7 \u03c3\u03c4\u03bf \u03cc\u03c1\u03b9\u03bf \u03c4\u03c9\u03bd $1 \u03b1\u03c1\u03c7\u03b5\u03af\u03c9\u03bd.",selectedTooltip:"\u0395\u03c0\u03b9\u03bb\u03b5\u03b3\u03bc\u03ad\u03bd\u03b1 \u03b1\u03c1\u03c7\u03b5\u03af\u03b1",selectedBtn:"\u0395\u03ba\u03ba\u03b1\u03b8\u03ac\u03c1\u03b9\u03c3\u03b7 \u03b5\u03c0\u03b9\u03bb\u03b5\u03b3\u03bc\u03ad\u03bd\u03c9\u03bd \u03b1\u03c1\u03c7\u03b5\u03af\u03c9\u03bd",checkedTooltip:"\u03a3\u03c4\u03b9\u03b3\u03bc\u03b1\u03c4\u03b9\u03c3\u03bc\u03ad\u03bd\u03b1 \u03b1\u03c1\u03c7\u03b5\u03af\u03b1",
checkedBtn:"\u0395\u03ba\u03ba\u03b1\u03b8\u03ac\u03c1\u03b9\u03c3\u03b7 \u03c3\u03c4\u03b9\u03b3\u03bc\u03b1\u03c4\u03b9\u03c3\u03bc\u03ad\u03bd\u03b1 \u03b1\u03c1\u03c7\u03b5\u03af\u03c9\u03bd",addUrl:"\u03a0\u03c1\u03bf\u03c3\u03b8\u03ae\u03ba\u03b7 \u03c3\u03c5\u03bd\u03b4\u03ad\u03c3\u03bc\u03bf\u03c5",noItems:"\u0394\u03b5\u03bd \u03c5\u03c0\u03b1\u03c1\u03c7\u03b5\u03b9 \u03ba\u03ac\u03c4\u03b9...",mimeType:"\u03a4\u03cd\u03c0\u03bf\u03c2",download:"\u039a\u03b1\u03c4\u03ad\u03b2\u03b1\u03c3\u03bc\u03b1",
openWith:"\u0386\u03bd\u03bf\u03b9\u03b3\u03bc\u03b1 \u03bc\u03b5..."},pl:{extError:"$1 pliki nie s\u0105 wspierane",existError:"Ten plik ju\u017c istnieje!",existInListError:"Ten plik jest ju\u017c na li\u015bcie.",uploadImg:"Wgraj obrazek",replaceMsg:'"Plik o nazwie $1 ju\u017c jest w tym folderze. Czy chcesz go zamieni\u0107?',"continue":"Kontynuuj",replace:"Zamie\u0144",uploadSuccess:"Plik zosta\u0142 wgrany pomy\u015blnie!",pickSuccess:"Zdalny plik zosta\u0142 wybrany pomy\u015blnie!",successCreated:"Folder zosta\u0142 utworzony pomy\u015blnie!",
fileSuccessCreated:"Plik zosta\u0142 utworzony pomy\u015blnie!",mkdirSuccess:"Folder utworzony pomy\u015blnie!",icons:"Ikony",insert:"Wstaw",home:"Start",options:"Opcje",defaultValues:"Domy\u015blne warto\u015bci",date:"Data",size:"Rozmiar",type:"Typ",dimensions:"Rozszerzenie",name:"Nazwa",ok:"Ok",cleanCache:"Wyczy\u015b\u0107 schowek",cut:"Wytnij",copy:"Kopiuj",paste:"Wklej",createCopy:"Stw\u00f3rz kopi\u0119",skip:"Przeskocz","delete":"Skasuj",deleteMsg:"Jeste\u015b pewien, \u017ce chcesz kompletnie skasowa\u0107 wybrane pliki?",
delSuccess:"Plik zosta\u0142 skasowany pomy\u015blnie",cancel:"Anuluj",loadTime:"Czas wgrywania",location:"Lokalizacja",info:"Informacja",details:"Detale",preview:"Podgl\u0105d",small:"Ma\u0142y",medium:"\u015aredni",large:"du\u017cy",iconSize:"Rozmiar ikony",createFolder:"Utw\u00f3rz folder",newFile:"Nowy plik",fileSaved:"Plik zosta\u0142 zapisany!",folderExistError:"Folder o nazwie $1 ju\u017c istnieje!",previewType:"Podgl\u0105d",refresh:"Od\u015bwie\u017c",rename:"Zmie\u0144 nazw\u0119",search:"Szukaj",
newDocument:"Nowy dokument",editDocument:"Edytuj dokument",saveAsNew:"Zapisz jako nowy",saveAndNew:"Zapisz i utw\u00f3rz nowy",save:"Zapisz",select:"Wybierz",folders:"Foldery",files:"Pliki",all:"Wszystkie",sort:"Sortuj wed\u0142ug",uploadFiles:"Wgraj pliki",url:"Adres URL",addSuccess:"Plik zosta\u0142 dodany do listy!",successSave:"Rekord zapisany!",invalidUrlError:"Adres, kt\u00f3ry poda\u0142e\u015b nie jest w\u0142a\u015bciwy!",upload:"Wgraj",limitError:"Osi\u0105gn\u0105\u0142e\u015b limit of $1 plik\u00f3w.",
selectedTooltip:"Wybrane pliki",selectedBtn:"Wyczy\u015b\u0107 wybrane pliki",checkedTooltip:"Zaznaczone pliki",checkedBtn:"Wyczy\u015b\u0107 wybrane pliki",addUrl:"Dodaj adres URL",noItems:"Niczego nie ma na li\u015bcie...",images:"Obrazki",textFiles:"Pliki tekstowe",path:"\u015acie\u017cka",ext:"Rozszerzenie",mimeType:"Typ multimedi\u00f3w",download:"Pobierz",openWith:"Otw\u00f3rz za pomoc\u0105..."}};
(function(e){var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};Ss_input.tools={dirname:function(b){return b.replace(/\\/g,"/").replace(/\/[^\/]*\/?$/,"")},getExtension:function(b){return b.split(".").pop().toLowerCase()},basename:function(b){return b.replace(/\\/g,"/").replace(/.*\//,"")},parseDate:function(b){b=b.match(/(\d+)/g);return new Date(b[0],b[1]-1,b[2],b[3],b[4])},template:function(b,a){var c;try{return c="var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+
b.replace(/[\r\t\n]/g," ").replace(/'(?=[^#]*#>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<#=(.+?)#>/g,"',$1,'").split("<#").join("');").split("#>").join("p.push('")+"');}return p.join('');",(new Function("obj",c))(a)}catch(f){c=f.message,console.log("< # ERROR: "+c+" # >"),console.log(f)}},dataReplace:function(b,a){a=a||"data";return'"'+b.replace(/field:\((\w+)\)/g,-1<b.indexOf("condition:(")?""+a+'["$1"]':'"+'+a+'["$1"]+"').replace(/condition:(\(.*\))/g,'"+$1+"')+'"'},fieldReplace:function(b,
a){return b.replace(/field:\((\w+)\)/g,(a||"data")+'["$1"]')},debounce:function(b,a,d){var c;return function(){var f=this,e=arguments,k=d&&!c;clearTimeout(c);c=setTimeout(function(){c=null;d||b.apply(f,e)},a);k&&b.apply(f,e)}},arrayValuesInArray:function(b,a){b=this.toArray(b);for(var c=[],f=0,g=b.length;f<g;f++)b[f]&&-1===e.inArray(b[f],a)&&c.push(b[f]);return c},keyExists:function(b,a){b=this.toArray(b);for(var c=[],f=0,e=b.length;f<e;f++)b[f]&&!a.hasOwnProperty(b[f])&&c.push(b[f]);return c},getDate:function(){var b=
new Date,a=b.getMonth()+1,d=b.getDate();return b.getFullYear()+"-"+(2>(""+a).length?"0":"")+a+"-"+(2>(""+d).length?"0":"")+d},urlUnion:function(b,a){var c=b.length-1;"/"!=b[c]&&"/"!=a[0]?b+="/":"/"===b[c]&&"/"===a[0]&&(a=a.substr(1));return b+a},cachedImage:function(b){var a=document.createElement("img");a.src=b;return a.complete||0<a.width+a.height},cutFileName:function(b,a,d){"undefined"===typeof a&&(a="");"undefined"===typeof d&&(d=10);if(!(4>d)){var c=a.length;return b.length-2>d?(b=b.substring(0,
d),b=b.substring(0,b.length-c),b+"..."+a):b}},toArray:function(b){b instanceof Array||(b=[b]);return b},findKey:function(b,a){for(var c in a)try{if(a[c]===b)return c}catch(f){}},findByKey:function(b,a,d){for(var c=0,e=b.length;c<e;c++)if(b[c][a]==d)return b[c];return!1},removeMirrorValues:function(b){var a;do{a=!1;for(var d=0;d<b.length;d++)b[d]===b[d+1]&&(b.splice(d,1),a=!0)}while(1==a)},arraySum:function(b){for(var a=0,d=0;d<b.length;d++)a+=b[d];return a},loadImage:function(b,a,d){b=b||e();if(a&&
"undefined"!=a)if(Ss_input.tools.cachedImage(a))b.css("background-image",'url("'+a+'")');else{var c=e('<div class="ssi-loadingIcon ssi-itemLoader"></div>');b.append(c);e("<img/>").attr("src",a).load(function(){e(this).remove();c.remove();"function"===typeof d?d(!0):b.css("background-image",'url("'+a+'")')}).error(function(){e(this).remove();c.remove();"function"===typeof d?d(!1):b.css("background-image",'url("'+a+'")');b.parents(".ssi-itemWrapper").addClass("ssi-empty")})}else b.parents(".ssi-itemWrapper").addClass("ssi-empty")},
escape:function(b){return b.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},escapeHtml:function(b){return String(b).replace(/[&<>"'\/]/g,function(b){return a[b]})},removeObjFromArray:function(b,a,d){for(var c=0;c<b.length;c++)if(b[c][a]===d){b.splice(c,1);break}},getFirstKey:function(b){for(var a in b)return a},sanitizeInput:function(b){b=b.replace(/[^a-z0-9\u00e1\u00e9\u00ed\u00f3\u00fa\u00f1\u00fc \.,_-]/gim,"");return b.trim()},removeFromArray:function(b,a){a=this.toArray(a);for(var c=0,f=a.length;c<
f;c++)for(var e=0,h=b.length;e<h;e++)b[e]===a[c]&&b.splice(e,1)},removeByKey:function(b,a){a=this.toArray(a);for(var c=0;c<a.length;c++)delete b[a[c]]},tooltip:function(b,a,d){b=e(b);(a=a||b.data("title"))||(a=b.attr("title"));if(a){var c=e('<div class="ssi-fadeOut ssi-fade ssi-tooltipText">'+a+"</div>").insertBefore(b);b.one("mouseleave",function(){c.remove()});if(d)return c;c.css({top:b.position().top-c.height()-12,left:b.position().left}).removeClass("ssi-fadeOut");return c}},isFile:function(b,
a){return a?-1<a.indexOf(b.split("/").pop().split(".").pop()):1<b.split("/").pop().split(".").length},replaceText:function(b){for(var a=Array.apply(null,arguments),d=1;d<a.length;d++)b=b.replace("$"+d,a[d]);return b}};e("body").on("mouseenter",".ssi-tooltip",function(b){Ss_input.tools.tooltip(b.currentTarget)}).on("mouseover","div.ssi-dropDownWrapper .parent",function(b){e(b.currentTarget).children("ul").addClass("ssi-show");e(b.currentTarget).closest("ul").css("overflow","visible")}).on("mouseout",
"div.ssi-dropDownWrapper .parent,.ssi-dropOptions li>a",function(b){e(b.currentTarget).children("ul").removeClass("ssi-show");e(b.currentTarget).closest("ul").css("overflow","")})})(jQuery);
(function(e){Ss_input.selectionMode=[];Ss_input.selection=[];Ss_input.modePlugins.selection=Ss_input.Plugin.extend({type:"corePlugins",defaults:{selectionMode:"singleSelection",excludeItems:"",defaultValue:"",inputName:"",template:"",selectionField:"",modeOptions:{}},init:function(){this.selectionMode=new Ss_input.selectionMode[this.options.selectionMode](this.ssi,this.setModeOptions());this.selectionMode.selection=this;this.pluginNames=[];for(var a in Ss_input.selection)this.pluginNames.push(a);
this.selectionMode.init();this.setEvents().setHandlers()},setEvents:function(){var a=this.ssi,b=this;a.$element.on("showAction",function(){a.pluginInit(b.pluginNames,Ss_input.selection);a.$content.on("click.ssi",".ssi-canSelect",function(c){c.preventDefault();if(!c.ctrlKey){var d=e(c.target);d.is("a")||d.parent().is("a")||b.selectItem("",a.get$mainElement(e(c.currentTarget)))}});b.ssi.$element.on("appendItemAction.ssi",function(a,d){b.options.excludeItems&&"false"!=eval(Ss_input.tools.dataReplace(b.options.excludeItems,
"item.data"))||d.$element.find(".ssi-selectable").addClass("ssi-canSelect")}).on("infoShowAction.ssi",function(c,d){d.find(".ssi-selectable").click(function(c){b.selectItem("",a.get$mainElement(e(c.currentTarget)))})})});return this},setModeOptions:function(){var a={};this.options.defaultValue&&(a.defaultValue=this.options.defaultValue);this.options.selectionField&&(a.selectionField=this.options.selectionField);this.options.inputName&&(a.inputName=this.options.inputName);this.options.template&&(a.template=
this.options.template);return e.extend({},this.options.modeOptions,a)},setHandlers:function(){this.infoHandler();return this},selectItem:function(a,b,c){this.selectionMode.pickData(a,b,c);return this},infoHandler:function(){Ss_input.handlers.info=Ss_input.Handler.extend({template:{imagePreview:'<div class="ssi-imagePreview"></div>'},defaults:{excludeItems:'condition:(field:(mimeType)=="directory")'},extend:{handleData:function(a){for(var b=0,c=a.length;b<c;b++){var d=this.ssi.plugins.templateManager.getTemplate(a[b],
" ",eval(Ss_input.tools.dataReplace(this.ssi.plugins.scan.options.displayImage,"dataList[i]")),"icons");a[b]=e.extend({preview:d},a[b])}}}});return this},getSelectedInfo:function(a,b,c){try{var d=this.ssi,f;if(c)return f={displayImage:a,selection:a,displayName:Ss_input.tools.basename(a)},d.$element.trigger("silentSelectionAction.ssi",[f]),f;a=a||b.attr("data-ID");b=b||d.get$mainElementById(a);var e=d.plugins.scan,h,k,l,m=b.data("info");m||(m=d.get$mainElementById(a).data("info"));e&&(h=m[e.options.titleField],
l=eval(Ss_input.tools.dataReplace(e.options.displayImage,"info")));k=this.options.selectionField?m[this.options.selectionField]:a;f={displayName:h?Ss_input.tools.escapeHtml(h):Ss_input.tools.basename(a),selection:k,displayImage:l};d.$element.trigger("selectionAction.ssi",[f]);return f}catch(n){return{displayName:h?Ss_input.tools.escapeHtml(h):Ss_input.tools.basename(a),selection:k||a,displayImage:l||a}}}})})(jQuery);
(function(e){function a(b){var a=e(b.options.content).eq(0).find(".ssi-radioGroup");b=0;for(var d=a.length;b<d;b++)(function(b){a.eq(b).find("input").attr("name",function(a,c){e(this).attr("name",c.replace(/\[[0-9]*]/,"["+b+"]"))})})(b)}Ss_input.selectionMode.multiSelection=Ss_input.Plugin.extend({template:{inputField:"<td><#=input#></td>",table:{wrapper:'<table class="ssi-selectedItemWrapper  <#=className#> ssi-multiTable"><tr><th></th><# for (var i = 0, inputLength = inputs.length; i<inputLength; i++) { var input=inputs[i]; #><th><#= input.label #></th><#  } #><th></th></tr></table>',
item:'<tr data-ID="<#=id#>" <#=(dataCollection?"data-collection="+dataCollection:"")#>  class="ssi-removable  ssi-pickItem ssi-table <#=className#>"><td class="ssi-imgPosition"><div class="ssi-selectionPreview" style="background-image:url(\'<#=displayImage#>\')"></div><div class="ssi-itemName"><#=displayName#></div></td><#=inputs#><td class="ssi-btnPosition">\x3c!--<#if(!className){#><a href="<#= displayImage #>" data-ssi_imgGroup="selectedImages<#=uniqueId#>" class="ssi-imgPreview ssi-imgBox"><div class="icon ssi-imgBoxIcon"></div></a><#}#>--\x3e<a href="#" class="ssi-removeChoice"><div class="icon ssi-removeIcon"></div></a></td><input type="hidden" name="<#=inputName#>" value="<#= selectionField #>"/></tr>'},
boxes:{wrapper:'<div class="ssi-selectedItemWrapper clearfix ssi-boxes"></div>',item:'<table data-ID="<#=id#>" style="float: left;" <#=(dataCollection?"data-collection="+dataCollection:"")#> class="ssi-removable  ssi-pickItem ssi-box  <#=className#>"><tr><td class="ssi-imgPosition"><div class="ssi-selectionPreview" style="background-image:url(\'<#=displayImage#>\')"><div id="ssi-actions"><a href="#" class="ssi-removeChoice"><div class="icon ssi-removeIcon"></div></a></div></div></td></tr><tr><td class="ssinput-mbtnplace"><div class="ssi-itemName"><#=displayName#></div><input type="hidden" name="<#=inputName#>" value="<#= selectionField #>"/></td></tr></table>'},
displayFiles:'<div id="ssi-displayFilesWrapper"><button id="ssi-clearSelected" data-title="<#=selectedBtn#>" class="ssi-clearBtn ssi-mBtn ssi-tooltip"><div class="icon ssi-cleanBtn"></div></button><div data-title="<#=selectedTooltip#>" class="ssi-tooltip ssi-displayFiles"><#=selected#></div><button id="ssi-clearChecked" data-title="<#=checkedBtn#>" class="ssi-mBtn ssi-clearBtn ssi-tooltip"><div class="icon ssi-cleanBtn"></div></button><div id="ssi-displayCheckedFiles" data-title="<#=checkedTooltip#>" class="ssi-displayFiles ssi-tooltip"><#=checked#></div></div>'},
defaults:{template:"table",className:"",duplicate:!0,inputName:"files[]",selectionField:"id",maxItems:0,content:"",input:[],defaultValue:""},init:function(){this.checkedItems=[];this.selected=[];this.silentItems=[];this.checkedFilesCount=this.selectedFilesCount=0;var b=this.ssi;"boxes"==this.options.template&&0<this.options.input.length&&(this.options.template="table");b.$element.addClass("ss-input ssi-multiPickMode");(b=this.template[this.options.template].wrapper)&&e(this.options.content).eq(0).html(Ss_input.tools.template(b,
{className:this.options.className,inputs:this.options.input}));if(this.options.defaultValue){b=this.options.defaultValue.length;0!==this.options.maxItems&&b>this.options.maxItems&&(b-=this.options.maxItems);for(var a=0;a<b;a++)-1==this.options.defaultValue[a].value.indexOf(":")&&(this.options.defaultValue[a].value="/:"+this.options.defaultValue[a].value),this.checkedItems.push(this.options.defaultValue[a].value);this.selectItems(this.options.defaultValue)}this.options.maxItems&&3<(Math.log(this.options.maxItems)*
Math.LOG10E+1|0)&&(this.options.maxItems=9999);this.setButtons();this.setEvents();return this},setButtons:function(){var b=this;this.ssi.addButton({closeAfter:!0,label:this.translate("cancel"),className:"ssi-mBtn ssi-cancel"},"menuButton",["bottom"]);this.ssi.addButton({label:this.translate("insert"),className:"ssi-mBtn ssi-insertBtn disabled",closeAfter:!0,enableAfter:!0,method:function(){b.selectItems();"modalWindow"!=b.ssi.options.showTo&&b.reset()}},"menuButton",["bottom"])},setEvents:function(){var b=
this,a=this.ssi;a.$element.on("showAction",function(){b.options.duplicate||(b.checkItem(b.selected),b.checkedFilesCount=b.selected.length);a.$content.find("#ssi-menuButtons").after(Ss_input.tools.template(b.template.displayFiles,{selected:b.options.maxItems?'<span id="ssi-displaySelectedFiles">'+b.selectedFilesCount+"</span>/"+b.options.maxItems:'<span id="ssi-displaySelectedFiles">'+b.selectedFilesCount+"</span>",checked:b.checkedFilesCount,selectedTooltip:b.translate("selectedTooltip"),checkedTooltip:b.translate("checkedTooltip"),
checkedBtn:b.translate("checkedBtn"),selectedBtn:b.translate("selectedBtn")}));a.$content.on("click","#ssi-clearChecked",function(){b.clearChecked();return!1}).on("click","#ssi-clearSelected",function(){b.clearSelected();return!1});a.$element.on("echoItemsAction.ssi silentEchoItemsAction.ssi",function(){b.setMChecked()}).on("closeAction.ssi",function(){b.checkedFilesCount=0;b.checkedItems=[]}).on("appendItemAction.ssi",function(a,c){-1!==e.inArray(c.data.path,b.checkedItems)&&b.addCheck("",c.$element.find(".ssi-canSelect"))}).on("infoCloseAction.ssi",
function(){b.setMChecked()}).on("infoShowAction.ssi",function(a,c){b.setMChecked(c)}).on("beforeChangeCollectionAction.ssi",function(){b.selectItems();b.reset()}).on("removeItemAction.ssi",function(a,c){var d=e.inArray(c,b.checkedItems);console.log(d);console.log(b.checkedItems)})});e(this.options.content).eq(0).on("click",".ssi-removeChoice",function(a){try{b.removeSelectedImage(a),b.selectedFilesCount--,b.ssi.$content.find("#ssi-displaySelectedFiles").html(b.selectedFilesCount)}catch(f){}return!1}).on({mouseenter:function(){e(this).find("#ssi-actions").fadeIn(200)},
mouseleave:function(){e(this).find("#ssi-actions").fadeOut(200)}},".ssi-selectionPreview")},reset:function(){this.checkedFilesCount=0;this.checkedItems=[];this.options.duplicate?(this.ssi.$content.find("#ssi-displayCheckedFiles").html("0"),this.ssi.$content.find(".ssi-checked").removeClass("ssi-checked").find(".ssi-checkItem").remove()):(this.checkItem(this.selected),this.checkedFilesCount=this.selected.length);this.ssi.$content.find("#ssi-displaySelectedFiles").html(this.selectedFilesCount)},selectItems:function(b){var a=
e(this.options.content).eq(0),d,f=[],g="";this.options.duplicate||this.duplicate();for(var h=this.checkedItems.length,k=0;k<h;k++){b&&(g=b[k].input||[]);var l=this.checkedItems[k];if("undefined"===typeof this.radioButtons||this.radioButtons){d=0;for(var m=this.options.input.length;d<m;d++)"radio"===this.options.input[d].type&&(this.radioButtons=!0,this.options.input[d].name=this.options.input[d].name.replace(/\[[0-9]*]/,"["+this.selectedFilesCount+"]")),this.radioButtons||(this.radioButtons=!1)}if(d=
this.getTemplate(l,g,!!this.silentItems[k]))f.push(d),this.selectedFilesCount++;b||(l=l.split(/:(.+)?/,2),l=l[1]||l[0],this.checkedItems[k]=l)}a.children(".ssi-selectedItemWrapper").append(f);b||this.ssi.$element.trigger("selectAction",[this.checkedItems]);this.checkedItems=[]},getTemplate:function(b,a,d){var c="",e="",h=b.split(/:(.+)?/,2);d=d||!!a;b=h[1]||b;for(var k=0,l=this.options.input.length;k<l;k++)c+=Ss_input.tools.template(this.template.inputField,{input:(new Ss_input.Input(this.options.input[k],
a[k]))[0].outerHTML});a=this.selection.getSelectedInfo(b,"",d);a.displayImage||(e="ssi-empty");return Ss_input.tools.template(this.template[this.options.template].item,{inputName:this.options.inputName,selectionField:a.selection,id:b,className:e,displayImage:a.displayImage,uniqueId:this.ssi.uniqueId,inputs:c,displayName:a.displayName,dataCollection:h[1]?h[0]:""})},pickData:function(b,a,d){if(!this.options.duplicate&&d&&-1<e.inArray("/:"+b,this.checkedItems))return this.ssi.notify("error",this.translate("existInListError")),
this;var c;c=a?e(a):this.ssi.get$mainElementById(b);b=this.ssi.currentCollection.id+":"+(b||a.attr("data-ID"));if(!b)return console.log("Cant't find the id."),this;if(c.hasClass("ssi-checked"))this.checkedFilesCount--,this.removeCheck("",c),this.unCheckItem(b);else{if(0!==this.options.maxItems&&(this.options.duplicate?this.selectedFilesCount+this.checkedFilesCount:this.checkedFilesCount)===this.options.maxItems){this.ssi.notify("error",Ss_input.tools.replaceText(this.translate("limitError"),this.options.maxItems.toString()));
return}this.checkedFilesCount++;this.addCheck("",c);this.checkItem(b,d)}this.ssi.$content.find("#ssi-displayCheckedFiles").html(this.checkedFilesCount);return this},setMChecked:function(b){var a=this.ssi,d,e;b=b||a.$content;var g=this.checkedItems.filter(function(b){e=b.split(/:(.+)?/,2);return e[0]==a.currentCollection.id||!e[1]});b.find(".ssi-checked").removeClass("ssi-checked");b.find("span.ssi-checkItem").remove();for(var h=0,k=g.length;h<k;h++)e=g[h].split(/:(.+)?/,2),d=e[1]||e[0],this.addCheck(d,
"",b)},removeCheck:function(b,a){var c;c=a?e(a):this.ssi.get$mainElementById(b);c.removeClass("ssi-checked");c.find(".ssi-checkItem").remove()},removeSelectedImage:function(b){b=e(b.target).parents(".ssi-pickItem");var c=b.attr("data-ID");if(!this.options.duplicate){var d=b.attr("data-collection");Ss_input.tools.removeFromArray(this.selected,d?d+":"+c:c)}b.remove();this.radioButtons&&a(this);this.ssi.$element.trigger("removeAction",c)},addCheck:function(b,a,d){(a?e(a):this.ssi.get$mainElementById(b,
d)).append('<span class="icon ssi-checkItem"></span>').addClass("ssi-checked")},checkItem:function(b,a){b instanceof Array?this.checkedItems=this.checkedItems.concat(b):(a&&(this.options.duplicate?this.silentItems[this.checkedItems.length]=a:this.silentItems[Ss_input.tools.arrayValuesInArray(this.checkedItems,this.selected).length]=a),this.checkedItems.push(b));this.ssi.$content.parents(".ssi-mainModal").find(".ssi-insertBtn").removeClass("disabled").prop("disabled",!1)},unCheckItem:function(b){Ss_input.tools.removeFromArray(this.checkedItems,
b);0===this.checkedItems.length&&e(".ssi-insertBtn").addClass("disabled").prop("disabled",!0)},duplicate:function(){var b=Ss_input.tools.arrayValuesInArray(this.checkedItems,this.selected),a=Ss_input.tools.arrayValuesInArray(this.selected,this.checkedItems),d,f;this.selected=this.checkedItems.slice();for(var g=e(this.options.content).eq(0).children(".ssi-selectedItemWrapper"),h=0;h<a.length;h++)d=a[h].split(/:(.+)?/,2),f=d[1]||d[0],g.find('.ssi-pickItem[data-ID="'+f+'"]').each(function(){var b=e(this),
a=b.attr("data-collection");a&&a!=d[0]||b.remove()}),this.selectedFilesCount--;this.checkedItems=b},clearChecked:function(){var b=this.ssi.$content;b.find(".ssi-checkItem").remove();b.find(".ssi-checked").removeClass("ssi-checked");b.find("#ssi-displayCheckedFiles").html(0);this.duplicate||b.find("#ssi-displaySelectedFiles").html(this.selectedFilesCount-this.checkedFilesCount);this.checkedFilesCount=0;this.checkedItems=[];b.parents(".ssi-mainModal").find(".ssi-insertBtn").addClass("disabled").prop("disabled",
!0)},clearSelected:function(){e(this.options.content).eq(0).find(".ssi-pickItem").remove();this.ssi.$content.find("#ssi-displaySelectedFiles").html(this.duplicate?0:this.checkedFilesCount);this.selectedFilesCount=0;this.selected=[]}})})(jQuery);
(function(e){Ss_input.selectionMode.singleSelection=Ss_input.Plugin.extend({template:{imgHolder:'<table class="ssi-pickItem ssi-selectedItemWrapper ssi-itemWrapper"><tr><td class="ssi-imgHolder"><div class="ssi-selectionPreview"><div id="ssi-actions">\x3c!--<a href="#" id="ssi-pickedImg" class="ssi-imgBox ssi-imgPreview ssi-hidden"><div class="icon ssi-imgBoxIcon"></div></a>--\x3e<a href="#" class="ssi-removeChoice ssi-hidden"><div class="icon ssi-removeIcon"></div></a></div><div id="ssi-imgChoose" class="ss-input ssi-pick ssi-selectionPreview"></div></div></td></tr><tr><td><div class="ssi-itemName"></div></td></tr><#=input#></table>',textHolder:'<div class="ssi-pickItem ssi-selectedItemWrapper ssi-itemWrapper"><span class="ssi-textPreview"></span><#= input #></div><a href="#" class="ssi-removeChoice"><div class="icon ssi-removeIcon"></div></a>',
input:'<input  id="<#=name#> type="<#=(type||"text")#>" placeholder="<#=placeholder#>" class="ssi-dataUrlName" value="<#=value#>" name="<#=name#>" />',mainInput:'<input id="<#=name#>" type="hidden" class="ssi-mainInput" name="<#=name#>"/>'},defaults:{template:"imgHolder",defaultValue:"",selectionField:"",inputName:"ssInput"},init:function(){var a=this.ssi;if(a.$element.is("div"))return a.$element.addClass("ssi-"+this.options.template),a.$element.append(Ss_input.tools.template(this.template[this.options.template],
{input:'<input id="'+this.options.inputName+'" type="hidden" class="ssi-mainInput" name="'+this.options.inputName+'"/>'})),this.options.defaultValue&&this.pickData(this.options.defaultValue,"",!0),this.setEvents(),this;console.log("The targeted element is not a div.")},setEvents:function(){var a=this;this.ssi.$element.on("click",".ssi-removeChoice",function(b){b.preventDefault();a.removeSelectedImage();return!1}).on({mouseenter:function(){e(this).find("#ssi-actions").fadeIn(200)},mouseleave:function(){e(this).find("#ssi-actions").fadeOut(200)}},
".ssi-selectionPreview");return this},pickData:function(a,b,c){var d=e(b);a=a||d.attr("data-ID");if(!a)return console.log("Cant't find the id."),this;a=this.selection.getSelectedInfo(a,b,c);b=this.ssi.$element;ssi_modal.closeAll();b.find("a").removeClass("ssi-hidden");b.find(".ssi-itemName").html(a.displayName);b.find(".ssi-itemWrapper").removeClass("ssi-empty");Ss_input.tools.loadImage(b.find("#ssi-imgChoose"),a.displayImage);b.find(".ssi-mainInput").val(a.selection);c||b.trigger("selectAction",
a.selection);return this},removeSelectedImage:function(){var a=this.ssi.$element,b=a.find("#"+this.options.inputName);a.find(".ssi-itemWrapper").removeClass("ssi-empty");a.find("#ssi-imgChoose").css("background-image","");a.find("a").addClass("ssi-hidden");a.find(".ssi-itemName").html("");a.trigger("removeAction",b.val());b.val("");return this}})})(jQuery);
(function(e){Ss_input.selectionMode.textEditorSelection=Ss_input.Plugin.extend({defaults:{method:function(){}},init:function(){this.ssi.mode="textEditorSelect";this.ssi.$element.addClass("ss-input");return this},pickData:function(a,b){var c=this.selection.getSelectedInfo(a,b).selection;"function"===typeof this.options.method&&this.options.method(c);ssi_modal.closeAll();return this}})})(jQuery);
(function(e){Ss_input.fileSystem=[];Ss_input.fileSystemHandlers=[];Ss_input.storageTypes.fileSystem=Ss_input.Plugin.extend({type:"corePlugins",defaults:{allowed:["jpg","jpeg","png"],scriptsPath:"",rootPath:"",responseValidation:{validationKey:"type",resultKey:"msg",success:"success",error:"error"}},constructor:function(a,b){this.options=e.extend({},this.defaults,b);this.ssi=a;a.handlersGroup="fileSystemHandlers";this.pluginNames=[];a.options.responseValidation=this.options.responseValidation;for(var c in Ss_input.fileSystem)this.pluginNames.push(c);
this.setEvents()},setEvents:function(){var a=this,b=this.ssi;this.ssi.$element.on("showAction",function(){a.scanDir(a.options.rootPath+"/");a.ssi.pluginInit(a.pluginNames,Ss_input.fileSystem);a.ssi.$content.on("click.ssi",".directory",function(c){var d=e(c.target);if(!(c.ctrlKey||d.is("a")||d.parent().is("a")))return c=b.getId(d),a.scanDir(c),!1})}).on("removeItemAction.ssi",function(b,d){Ss_input.tools.isFile(d,a.options.allowed)||e(this).trigger("removeCollectionAction.ssi",[d.replace(a.options.rootPath,
"")])});return this},getPath:function(a,b){b=b||"relative";var c=Ss_input.tools.urlUnion(this.options.rootPath+(this.ssi.currentCollection.id||"/"),a||"");return"relative"===b?c:Ss_input.tools.urlUnion(c=document.location.protocol+"//"+window.location.hostname,c)},scanDir:function(a){a=a.replace(this.options.rootPath,"");this.ssi.openCollection(a,this.options.scriptsPath+"/scanAction.php",{currentDir:this.options.rootPath+a})}})})(jQuery);
(function(e){var a=!1;Ss_input.fileSystem.history=Ss_input.Plugin.extend({template:{back:'<a href="#" id="ssi-backHistory" class="disabled ssi-historyBack"><div class="icon ssi-backIcon"></div></a>',fw:'<a href="#" id="ssi-fwHistory" class="ssi-historyFw disabled"><div class="icon ssi-fwIcon"></div></a>',up:'<a href="#" id="ssi-historyUp" class="ssi-historyUp disabled"><div class="icon ssi-upIcon"></div></a>'},init:function(){this.backHistory=[];this.fwHistory=[];this.setButtons();this.setEvents()},
setButtons:function(){var b=this,a=e(this.template.back),d=e(this.template.fw),f=e(this.template.up),g=this.ssi;a.on("click",function(a){b.historyBack(e(this));return!1});d.on("click",function(a){0<b.fwHistory.length&&b.historyFw(e(this));return!1});f.on("click.ssi",function(a){g.readOnlyMode?b.historyBack():b.ssi.fileSystem.scanDir(Ss_input.tools.dirname(g.currentCollection.id));return!1});g.$content.find(".ssi-topBarButtonArea").append(a,d,f)},setEvents:function(){var b=this,c=this.ssi;c.$element.on("echoItemsAction.ssi",
function(){"/"!==c.currentCollection.id?b.ssi.$content.find("#ssi-historyUp").removeClass("disabled"):b.ssi.$content.find("#ssi-historyUp").addClass("disabled");if(a)a=!1;else{var d=b.backHistory.length;0<d&&"/"!==c.currentCollection.id&&b.ssi.$content.find("#ssi-backHistory").removeClass("disabled");b.backHistory[d-1]===c.currentCollection.id||c.readOnlyMode||(20<=d&&b.backHistory.shift(),b.backHistory.push(c.currentCollection.id),b.fwHistory=[],c.$content.find("#ssi-fwHistory").addClass("disabled"))}}).on("closeAction.ssi",
function(){b.backHistory=["/"];b.fwHistory=[];a=!1}).on("removeCollectionAction.ssi",function(a,c){b.removeFromHistory(c)})},historyFw:function(b){a=!0;b=b||this.ssi.$content.find("#ssi-fwHistory");var c=this.fwHistory.length;this.ssi.$content.find("#ssi-backHistory").removeClass("disabled");1===c&&b.addClass("disabled");b=this.fwHistory[c-1];this.ssi.fileSystem.scanDir(b);this.backHistory.push(b);this.fwHistory.splice(c-1,1)},historyBack:function(b){b=b||this.ssi.$content.find("#ssi-backHistory");
a=!0;var c=this.ssi,d=this.backHistory.length;1>d||(2==d&&b.addClass("disabled"),c.readOnlyMode?(c.fileSystem.scanDir(this.backHistory[d-1]),1===d&&b.addClass("disabled")):2>d?b.addClass("disabled"):(c.fileSystem.scanDir(this.backHistory[d-2]),this.fwHistory.push(this.backHistory[d-1]),this.backHistory.splice(d-1,1),c.$content.find("#ssi-fwHistory").removeClass("disabled")))},removeFromHistory:function(b){0<this.backHistory.length&&(Ss_input.tools.removeFromArray(this.backHistory,b),Ss_input.tools.removeMirrorValues(this.backHistory),
2>this.backHistory.length&&this.ssi.$content.find("#ssi-backHistory").addClass("disabled"));0<this.fwHistory.length&&(Ss_input.tools.removeFromArray(this.fwHistory,b),Ss_input.tools.removeMirrorValues(this.fwHistory),1>this.fwHistory.length?this.ssi.$content.find("#ssi-fwHistory").addClass("disabled"):1==this.fwHistory.length&&this.fwHistory[0]==this.ssi.currentCollection.id&&(this.fwHistory=[],this.ssi.$content.find("#ssi-fwHistory").addClass("disabled")))},cleanHistory:function(){this.fwHistory=
[];this.backHistory=[]}})})(jQuery);
(function(e){Ss_input.fileSystem.path=Ss_input.Plugin.extend({template:{pathBar:'<div style="float:left" id="ssi-loading"></div><div class="ssi-homePath" style="float:left"><a href="#" data-ID="/" class="<#=className#> ssi-path"><div class="icon ssi-rootIcon"></div><#=rootName#></a></div><div class="ssi-currentPath"></div>',pathItem:'<div class="ssi-pathItemWrapper"><div class="icon ssi-breadcrumbsIcon"></div><a href="#" data-ID="<#=dataHref#>" class="<#=className#> ssi-path"><#=pathName#></a></div>'},defaults:{className:"",
rootName:"root"},init:function(){this.ssi.$content.find("#ssi-topBar").append(Ss_input.tools.template(this.template.pathBar,{className:this.options.className,rootName:this.options.rootName}));this.setEvents()},setEvents:function(){var a=this;this.ssi.$content.on("click.ssi",".ssi-path",function(){var b=e(this);if(b.hasClass("ssi-alias"))return!1;a.ssi.fileSystem.scanDir(b.attr("data-ID"));return!1});this.ssi.$element.on("beforeEchoItemsAction.ssi",function(b){b=a.ssi.currentCollection;b.id&&a.setPath(b.alias||
a.ssi.currentCollection.id,b.href)})},setPath:function(a,b){var c=this.ssi.$content.find(".ssi-currentPath");if(b)c.html(Ss_input.tools.template(this.template.pathItem,{dataHref:b,className:"ssi-alias",pathName:a}));else{var d=a.split("/"),f="",g=[],h=d.length,k=c.outerWidth()-100,l=0;c.html("");for(var m=0;m<h;m++)if(f!=a&&(f=Ss_input.tools.urlUnion(f,d[m])),"/"!=d[m]&&""!=d[m]){var n=Ss_input.tools.template(this.template.pathItem,{dataHref:f,className:this.options.className,pathName:d[m]});g.push(n);
n=e(n);l+=n.hide().appendTo(c).outerWidth();n.remove()}for(m=0;l>k&&0<k&&m<d.length;)g.shift(),n=e(Ss_input.tools.template(this.template.pathItem,{dataHref:f,className:this.options.className,pathName:d[m+1]})),l-=n.hide().appendTo(c).outerWidth(),n.remove(),m++;g.length&&c.html(g)}}})})(jQuery);
(function(e){Ss_input.database=[];Ss_input.databaseHandlers=[];Ss_input.storageTypes.database=Ss_input.Plugin.extend({type:"corePlugins",template:{title:'<h4 id="ssi-collectionTitle"></h4>',topBar:'<div class="ssi-topButtonsWrapper"><div id="ssi-topButtons" class="ssi-topButtons"></div></div>',form:'<form id="ssi-formData"><table><#=formItem#></table></form>',formItem:'<tr><th><label for="<#=inputId#>" class="<#=labelClass#>"><#=label#></label></th><td><#=input#></td></tr>'},defaults:{translateFields:!1,
sendNullValues:!1,responseValidation:!1,baseCollection:"",collections:{}},init:function(){this.ssi.options.translateFields=this.options.translateFields;this.ssi.options.responseValidation=this.options.responseValidation;this.ssi.handlersGroup="databaseHandlers";this.currentCollection="";this.pluginNames=[];for(var a in Ss_input.database)this.pluginNames.push(a);this.setCurrentCollection();this.setEvent()},setEvent:function(){var a=this,b=this.ssi;b.$element.on("earlyShowAction",function(){a.setStaticHandlers().setSchema()}).on("showAction",
function(){b.$content.find("#ssi-topBar").append(a.template.title);b.pluginInit(a.pluginNames,Ss_input.database);!1!==a.options.baseCollection&&a.scanCollection(a.currentCollection.title);b.$content.on("click.ssi",".ssi-collectionScan .ssi-listAnchor",function(c){if(0==b.readyState)return!1;c=e(c.currentTarget).text();if(a.currentCollection.title==c)return!1;a.scanCollection(c);return!1});b.$element.on("beforeScanAction.ssi",function(b,d){e.isEmptyObject(a.currentCollection.schema)&&(a.schemaAutoGenerator(d.data).currentCollection.schema=
a.options.collections[a.currentCollection.title].schema,a.setSchema().changeSchema())})}).on("silentSelectionAction.ssi",function(b,a){Ss_input.tools.isFile(a.displayImage,["jpg","png","jpeg"])||(a.displayImage="")});return this},setCurrentCollection:function(){try{this.options.baseCollection&&(this.currentCollection=this.options.collections[this.options.baseCollection]);if(!this.currentCollection){var a=Ss_input.tools.getFirstKey(this.options.collections);this.currentCollection=this.options.collections[a]||
{}}this.currentCollection.title=this.options.baseCollection||a}catch(b){}},scanCollection:function(a){this.currentCollection=this.options.collections[a];this.currentCollection.title=a;this.ssi.$element.trigger("beforeChangeCollectionAction.ssi");this.setTitle(this.currentCollection.title);this.currentCollection.schema&&(this.currentCollection.isSet||this.setSchema(),this.changeSchema());this.ssi.plugins.scan.scanCollection(a,this.currentCollection.baseUrl.replace("/:id",""))},setTitle:function(a){try{this.ssi.$content.find("#ssi-collectionTitle").html(a)}catch(b){}},
setSchema:function(){var a=this.currentCollection,b=a.schema;a.search||(a.search=[]);a.sort||(a.sort=[]);a.details||(a.details=[]);var c=a.search.length,d=a.sort.length,f=a.details.length;if(b&&!e.isEmptyObject(b)){for(var g in b){var h=b[g];!a.displayName&&h.displayName&&(a.displayName=g);!a.displayImage&&h.displayImage&&(a.displayImage="field:("+g+")");!a.selectionField&&h.selectionField&&(a.selectionField=g);!a.id&&h.id&&(a.id=g);f||0!=h.details||a.details.push(g);!c&&h.search&&a.search.push(g);
!d&&h.sort&&a.sort.push(g)}a.sort.length||(a.sort=[Ss_input.tools.getFirstKey(b)]);a.isSet=!0}this.setHandlers();return this},changeSchema:function(){var a=this.currentCollection;this.ssi.$element.trigger("changeSchemaAction.ssi",{displayName:a.displayName,id:a.id,displayImage:a.displayImage||"",url:a.baseUrl,sort:a.sort,search:a.search,details:a.details});return this},schemaAutoGenerator:function(a){a=a[0];if(!a)return console.log("Cannot create schema from empty collection"),this;var b=-1,c,d=this.currentCollection,
e=this.options.collections[d.title].schema={},g;for(g in a)if(a.hasOwnProperty(g)){b++;c=typeof a[g];e[g]={type:c};"object"==c&&a[g]instanceof Array&&(e[g].type="array");"string"==c&&10<a[g].split(" ").length&&(e[g].inputType="textarea");3>b&&(e[g].search=!0,e[g].sort=!0);if(!d.id&&(c=/(?:[a-z]*(?:_id|id_|Id|-id|id-)[a-z]*)|^(?:id|ID)(?:$|[A-Z]+.*)/,c.test(g))){e[g].id=!0;continue}if(!d.displayName&&(c=/(?:[a-z]*(?:_title|title_|Title|-title|title-|_name|name_|Name|-name|name-)[a-z]*)|^(?:title|name|username|login)(?:$|[A-Z]+.*)/,
c.test(g))){e[g].displayName=!0;continue}d.displayImage||(c=/(?:[a-z]*(?:_image|image_|Image|-image|image-|_img|img_|Img|-img|img-|_avatar|avatar_|Avatar|-avatar|avatar-)[a-z]*)|^(?:image|img|avatar)(?:$|[A-Z]+.*)/,c.test(g)&&(e[g].displayImage=!0))}return this},setHandlers:function(){this.scanHandler().imgBoxHandler().searchHandler().sortHandler().infoBubbleHandler().deleteHandler().selectionHandler().templateManagerHandler();return this},setStaticHandlers:function(){this.sidebarHandler();return this},
templateManagerHandler:function(){Ss_input.databaseHandlers.templateManager=Ss_input.Handler.extend({defaults:{template:"details",excludeFields:this.currentCollection.details}});return this},scanHandler:function(){Ss_input.databaseHandlers.scan=Ss_input.Handler.extend({defaults:{titleField:this.currentCollection.displayName,idField:this.currentCollection.id,displayImage:this.currentCollection.displayImage||""}});return this},selectionHandler:function(){var a=this.ssi.corePlugins.selection;a&&(a.options.selectionField=
this.currentCollection.selectionField);return this},imgBoxHandler:function(){Ss_input.databaseHandlers.imgBox=Ss_input.Handler.extend({defaults:{imageField:this.currentCollection.displayImage}});return this},deleteHandler:function(){Ss_input.databaseHandlers["delete"]=Ss_input.Handler.extend({defaults:{sendId:"inUrl",ajaxOptions:{url:this.currentCollection.baseUrl}}});return this},searchHandler:function(){Ss_input.databaseHandlers.search=Ss_input.Handler.extend({defaults:{deepSearch:!1,searchFields:this.currentCollection.search}});
return this},sidebarHandler:function(){var a=[],b=this.options.collections;if(2>Object.keys(b).length)this.ssi.options.excludePlugin.push("sidebar");else{for(var c in b)b[c].baseUrl&&a.push({name:c,url:b[c].baseUrl,className:"ssi-collectionScan"});Ss_input.databaseHandlers.sidebar=Ss_input.Handler.extend({defaults:{data:a,className:"",resizable:!1,mode:"dropDown"}});return this}},sortHandler:function(){Ss_input.databaseHandlers.sort=Ss_input.Handler.extend({defaults:{sortableFields:this.currentCollection.sort}});
return this},infoBubbleHandler:function(){Ss_input.databaseHandlers.infoBubble=Ss_input.Handler.extend({defaults:{excludeFields:this.currentCollection.details,translateFields:this.options.translateFields}});return this},getForm:function(a){a=a||{};var b={number:"text",string:"text",date:"text","enum":"select","boolean":"select",object:"textarea"},c=this.currentCollection.schema,d,e="",g;for(g in c){var h=c[g];if(0!=h.edit){"undefined"!==typeof a[g]&&(a[g]=a[g].toString());var k=a[g]||h["default"]||
"";d=h.required?" ssi-required":"";"array"==h.type?d+=" ssi-arrayInput":"object"==h.type&&(d+=" ssi-objectInput","object"===typeof k&&(k=JSON.stringify(k)));var l={name:g,id:g,value:k,className:"ssi-inputField"+d,type:h.inputType||b[h.type]},m=l.type;if("date"==h.type&&"now"==h["default"])l.value=Ss_input.tools.getDate();else if("select"==m&&"boolean"==h.type)l.options=[{label:"true",value:"true"},{label:"false",value:"false"}];else if("select"==m)if(h.options){for(var n=[],q=0,p=h.options.length;q<
p;q++){var r=h.options[q];n.push({label:r,value:r})}h.multiple&&(l.multiple=h.multiple);l.options=n}else l.type="text";"text"==m&&100<k.length&&(l.type="textarea");e+=Ss_input.tools.template(this.template.formItem,{label:this.translate(g,this.options.translateFields),labelClass:d,inputId:g,input:(new Ss_input.Input(l))[0].outerHTML})}}return Ss_input.tools.template(this.template.form,{formItem:e})},resetForm:function(){e("#ssi-formData").replaceWith(this.getForm())},getFormData:function(){var a={},
b=this,c=0;e(".ssi-formWindow"+this.ssi.uniqueId).find("#ssi-formData").find(".ssi-inputField").each(function(){var d=e(this);b.checkRequiredFields(d)&&c++;var f=d.val();if(!f&&!b.options.sendNullValues)return!0;d.hasClass("ssi-arrayInput")?f=f.split(","):d.hasClass("ssi-objectInput")&&(f=JSON.parse(f));a[d.attr("name")]=f});return c?!1:a},checkRequiredFields:function(a){var b;try{b=a.val().replace(/ /g,"")}catch(c){b=a.val()}return a.hasClass("ssi-required")&&!b?(a.addClass("ssi-requiredError"),
a.off("focus.ssi"),a.one("focus.ssi",function(){a.removeClass("ssi-requiredError")}),!0):!1},createWindow:function(a,b){var c=this.ssi.addButton(b,"menuButton");a=e.extend({},{content:"",onShow:function(b){b.get$content().find("#ssi-topButtons").append(c)},buttons:[],className:"ssi-formWindow ssi-formWindow"+this.ssi.uniqueId,sizeClass:"auto"},a);a.content=this.template.topBar+a.content;a.buttons.push({label:this.translate("cancel"),className:"ssi-mBtn ssi-cancel",closeAfter:!0});this.ssi.createWindow(a)}})})(jQuery);
(function(e){Ss_input.plugins.search=Ss_input.Plugin.extend({defaults:{deepSearch:{multiple:!1,data:{},ajaxOptions:{}},searchFields:[]},init:function(){this.options.deepSearch&&(this.options.deepSearch=e.extend({},this.defaults,this.options.deepSearch));this.searchKeywords={};this.currentItems="";this.setButtons().setEvents()},resetUi:function(){this.searchKeywords={};this.currentItems="";this.setButtons(this.ssi.$content.find("#ssi-searchButton").parent().empty())},setButtons:function(a){var b=this,
c=this.ssi,d=[],f;0!=this.options.deepSearch&&d.push({label:'<div class="icon ssi-searchMiniIcon"></div>',className:"ssi-inBtn ssi-inSearchBtn",method:function(){b.deepSearch(c.$content.find("#ssi-searchInput").val(),e(this).parent().find("input").hasClass("disabled"))}});var g=[],h=this.options.searchFields.length;1<h&&d.unshift({label:"\u25bc",className:"ssi-inBtn ssi-inSearchBtn ssi-moreInputs",method:function(){var b=e(this),a=b.siblings(".ssi-extraWrapper"),b=b.prev("#ssi-searchInput");b.trigger("input.ssi");
a.hasClass("ssi-slide")?(b.removeClass("disabled"),a.removeClass("ssi-slide")):(b.addClass("disabled").val(""),a.addClass("ssi-slide"));a.children().val("").trigger("change.ssi")}});for(var k=0;k<h;k++)this.searchKeywords[this.options.searchFields[k]]="",g.push(new Ss_input.Input({className:"ssi-searchInput ssi-menuInput ssi-extraInput",placeholder:this.translate(this.options.searchFields[k]),type:"search"})),g[k].data("field",this.options.searchFields[k]).on("input.ssi",function(a){clearTimeout(f);
var c=e(this);13==a.which&&e(this).next().next().trigger("click");b.searchKeywords[c.data("field")]=c.val();f=setTimeout(function(){b.searchDir(Object.keys(b.searchKeywords).map(function(a){return b.searchKeywords[a]}))},300)});c.addButton({label:'<div class="icon ssi-searchIcon"></div>',title:this.translate("search"),id:"ssi-searchButton",keyCode:"",input:{containerClass:"ssi-searchcont",className:"ssi-searchInput ssi-menuInput",placeholder:this.translate("search"),id:"ssi-searchInput",type:"search",
buttons:d},className:"ssi-searchSwitch"},"menuButton",a||["menu"]).find(".ssi-btnContainer").append(e('<div class="ssi-extraWrapper">').append(g));return this},setEvents:function(){var a=this.ssi,b=this,c;a.$content.on("input.ssi","#ssi-searchInput",function(a){clearTimeout(c);13==a.which&&e(this).next().next().trigger("click");var d=e(this);c=setTimeout(function(){b.searchDir(d.val())},300)});a.$element.on("resetAction.ssi changeCollectionAction.ssi",function(){b.searchInProgress&&(b.currentItems=
"",b.searchInProgress=!1,a.$element.find("#ssi-searchButton").next().hide(500),a.$element.find("#ssi-searchInput").val(""))}).on("echoItemsAction.ssi",function(){b.searchInProgress&&b.searchDir(a.$content.find("#ssi-searchInput").val())}).on("beforeEchoItemsAction.ssi",function(a,c){if(!b.options.searchFields.length)for(var d in c.data[0])b.options.searchFields.push(d)}).on("changeSchemaAction.ssi",function(a,c){b.options.searchFields=c.search;b.options.deepSearch&&(b.options.deepSearch.ajaxOptions.url=
c.url.replace("/id"));b.resetUi()});return this},deepSearch:function(a,b){if(b&&0!=this.options.deepSearch.multiple){a={};for(var c in this.searchKeywords)this.searchKeywords[c]&&(a[c]=this.searchKeywords[c])}if(a){var d=this.ssi,f=this;this.prev=d.currentCollection.id;c=e.extend({},this.options.deepSearch.data,"object"===typeof a?a:{keyword:a});c=e.extend({},{data:c,type:"GET"},this.options.deepSearch.ajaxOptions);d.ajaxCall(c,function(b){f.currentItems=[];d.$element.trigger("removeCollectionAction.ssi",
"search540123x");b={alias:f.translate("search"),href:"#",readOnly:!0,id:"search540123x",data:b};d.currentCollection=b;d.$element.trigger("scanAction.ssi",b);d.plugins.scan.echoFiles(b,!0)});return this}},getSearchCondition:function(a,b){b=b||"||";a=Ss_input.tools.toArray(a);for(var c=a.length,d="new RegExp('.*"+a[0]+".*','i')",e=d+".test(field:("+this.options.searchFields[0]+"))",g=1,h=this.options.searchFields.length;g<h;g++)1<c&&(d="new RegExp('.*"+a[g]+".*','i')"),e+=b+d+".test(field:("+this.options.searchFields[g]+
"))";return Ss_input.tools.fieldReplace(e)},searchDir:function(a){var b=this.ssi,c=[],d="||";this.searchInProgress=!!a;if(!a)return this.currentItems.length&&b.plugins.scan.echoFiles({id:b.currentCollection.id,data:this.currentItems}),this.currentItems=[],this;this.currentItems.length||(this.currentItems=b.getPageData());a instanceof Array?d="&&":a=a.toLowerCase();a=this.getSearchCondition(a,d);for(var d=0,e,g=this.currentItems.length;d<g;d++)e=this.currentItems[d],eval(a)&&c.push(e);b.plugins.scan.echoFiles({id:b.currentCollection.id,
data:c},"",!0);return this}})})(jQuery);
(function(e){Ss_input.fileSystem.mkdir=Ss_input.Plugin.extend({permissions:"write",defaults:{data:{},ajaxOptions:{}},init:function(){this.setButtons()},setButtons:function(){var a=this.ssi,b=this;a.addButton({label:'<div class="icon ssi-mkdirIcon"></div>',title:this.translate("createFolder"),id:"",keyPress:{keyCode:"76",ctrl:!0,shift:!0},input:{enterKey:!0,containerClass:"ssi-foldercont",className:"ssi-folderInput ssi-menuInput",placeholder:this.translate("name"),id:"ssi-nameFolder",buttons:[{label:'<div class="icon ssi-checkIcon"></div>',
className:"ssi-inBtn ssi-inFolderBtn",method:function(){b.mkdir(a.$content.find("#ssi-nameFolder").val())}}]},className:"ssi-folderSwitch"},"menuButton",["menu"])},mkdir:function(a){var b=this.ssi,c=this,d=b.fileSystem;if((a=(a||b.$content.find("#ssi-nameFolder").val()).replace(/[\[\]/#<$+%>!`&*'|{?"=}\/:\\@\{]/g,""))&&!b.readOnlyMode){var f=b.fileSystem.getPath(a);if(b.getItemData("name",a))b.notify("error",Ss_input.tools.replaceText(this.translate("folderExistError"),a));else{var g=e.extend({},
this.options.data,{dirname:a,currentDir:d.options.rootPath+b.currentCollection.id}),g=e.extend({},{data:g,url:d.options.scriptsPath+"/mkdirAction.php"},this.options.ajaxOptions);b.ajaxCall(g,function(){b.notify("success",c.translate("successCreated"));var e={name:a,mimeType:"directory",date:Ss_input.tools.getDate(),path:d.getPath(a),size:0,type:"zzzzfolder"};b.plugins.scan.appendItems(e);(e=b.plugins.sidebar)&&e.addTree({name:a,url:f},d.options.rootPath+b.currentCollection.id);b.$content.find("#ssi-nameFolder").val("");
b.$content.find(".ssi-foldercont").hide(500);b.$element.trigger("resetAction.ssi")})}}}})})(jQuery);
(function(e){Ss_input.fileSystem.newFile=Ss_input.Plugin.extend({permissions:"write",defaults:{ajaxOptions:{},data:{},theme:"monokai",language:"javascript",onShow:function(){}},init:function(){this.setButtons()},setButtons:function(){var a=this;this.ssi.addButton({label:'<div class="icon ssi-newFileIcon"></div>',title:this.translate("newFile"),id:"",input:{enterKey:!0,containerClass:"ssi-newFileContainer",className:"ssi-FileInput ssi-menuInput",placeholder:this.translate("name"),id:"ssi-fileName",
buttons:[{label:'<div class="icon ssi-checkIcon"></div>',className:"ssi-inBtn ssi-inFolderBtn",method:function(b,c){a.newFile(c)}}]},className:"ssi-folderSwitch"},"menuButton",["menu"]);return this},newFile:function(a){var b=this.ssi,c=this;if(a&&!b.readOnlyMode){var d=b.fileSystem,f=b.getItemData("name",a);if(f&&"directory"!=f.mimeType)b.notify("error",this.translate("existError"));else if(f=Ss_input.tools.getExtension(a),-1==e.inArray(f,b.fileSystem.options.allowed))b.notify("error",Ss_input.tools.replaceText(this.translate("extError"),
f));else return this.sendRequest(d.getPath(a),function(){b.notify("success",c.translate("fileSuccessCreated"));b.$content.find("#ssi-fileName").val("");b.$content.find(".ssi-newFileContainer").hide(500);var e={name:a,mimeType:"text/plain",date:Ss_input.tools.getDate(),path:d.getPath(a),size:"1 B",type:Ss_input.tools.getExtension(a)};b.plugins.scan.appendItems(e)}),this}},sendRequest:function(a,b){var c=this.ssi,d=e.extend({},this.options.data,{filePath:a,fileContent:" "}),d=e.extend({},{data:d,url:c.fileSystem.options.scriptsPath+
"newFileAction.php"},this.options.ajaxOptions);c.ajaxCall(d,b);return this},da:function(){}})})(jQuery);
(function(e){Ss_input.fileSystem.upload=Ss_input.Plugin.extend({permissions:"write",externalResources:["$().ssi_uploader()"],defaults:{data:{},uploadOptions:{},modalOptions:{}},init:function(){this.setModal();this.setUploader();this.setButtons()},setButtons:function(){var a=this;this.ssi.addButton({label:'<div class="icon ssi-uploadIcon"></div>',title:this.translate("upload"),id:"ssi-uploadBtn",keyCode:"",className:"ssi-folderSwitch",method:function(){a.uploadFiles()}},"menuButton",["menu"])},setModal:function(){var a=
this.ssi,b=this;this.modalOptions=e.extend({},{sizeClass:"mediumToLarge",content:'<input type="file" multiple id="ssi-upload" name="ssi-files"/>',title:this.translate("uploadFiles"),className:"ssi-uploadModal",keepContent:!0},this.options.modalOptions);this.modalOptions.onShow=function(c){b.ssi.$element.trigger("uploadShowAction.ssi");var d=c.get$content().find("#ssi-upload").data("ssi_upload");d&&(d.options.data.currentDir=a.fileSystem.options.rootPath+a.currentCollection.id);if("function"===typeof b.options.modalOptions.onShow)b.options.modalOptions.onShow(c)};
this.modalOptions.onClose=function(a){if("function"===typeof b.options.modalOptions.onClose)b.options.modalOptions.onClose(a);b.ssi.$element.trigger("uploadCloseAction.ssi")}},setUploader:function(){var a=this.ssi,b=this;this.uploaderOptions=e.extend({},{url:a.fileSystem.options.scriptsPath+"/uploadAction.php",locale:a.options.language,responseValidation:a.fileSystem.options.responseValidation,dropZone:!0,multiple:!0,preview:!0,errorHandler:{method:function(b,d){a.notify(d,b)},success:"success",error:"error"},
beforeEachUpload:function(c,d){if(a.getItemData("name",c.name))return d.abort(),b.translate("existError")},onEachUpload:function(a){b.onEachUpload(a)},maxFileSize:3,allowed:a.fileSystem.options.allowed},this.options.uploadOptions)},onEachUpload:function(a){},uploadFiles:function(){var a=this.ssi;if(!a.readOnlyMode){var b=a.createWindow(this.modalOptions,"#ssi-uploadBtn");this.uploaderOptions.data=e.extend({},{currentDir:a.fileSystem.options.rootPath+a.currentCollection.id},this.options.data);b.get$content().find("#ssi-upload").ssi_uploader(this.uploaderOptions)}}})})(jQuery);
(function(e){function a(b){return!!b.match(a.regex)}Ss_input.fileSystem.url=Ss_input.Plugin.extend({defaults:{ajaxOptions:{},data:{}},init:function(){"selection"==this.ssi.options.mode&&this.setButtons()},setButtons:function(){var b=this;this.ssi.addButton({label:'<div class="icon ssi-urlIcon"></div>',title:this.translate("addUrl"),id:"",keyCode:"",input:{enterKey:!0,containerClass:"ssi-urlcont",className:"ssi-urlInput ssi-menuInput",placeholder:this.translate("url"),id:"ssi-url",tooltip:this.translate("uploadImg"),
buttons:[{label:'<div class="icon ssi-checkIcon"></div>',className:"ssi-inBtn ssi-inUrlBtn",method:function(){b.addUrl()}}]},className:"ssi-urlSwitch"},"menuButton",["menu"])},addUrl:function(){var b=this.ssi,a=b.$content.find("#ssi-url").val();if(""!=a){var d=this;this.testUrl(a)&&this.IsValidImageUrl(a,function(){console.log();"multiSelection"===b.corePlugins.selection.options.selectionMode&&b.notify("success",d.translate("addSuccess"));b.corePlugins.selection.selectItem(a,"",!0)})}},testUrl:function(b){var c=
!1,d=!1,f,g=this.ssi;/^(http|https|ftp):\/\/[a-z0-9]+([\-\.][a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)+\.[a-z0-9]+$/i.test(b)&&(f=Ss_input.tools.getExtension(b),d=!0);!d&&a(b)&&(c=!0,f=(new RegExp(/^(data:)([\w\/\+]+);(charset=[\w-]+|base64).*,(.*)/gi)).exec(b)[2].split("/")[1]);return d||c?0>e.inArray(f,g.fileSystem.options.allowed)&&!c?(g.notify("error",Ss_input.tools.replaceText(this.translate("extError"),f)),!1):c?"dataUrl":!0:(g.notify("error",this.translate("invalidUrlError")),!1)},IsValidImageUrl:function(b,
a){var c=this,f=this.ssi;e("<img>",{src:b,error:function(){f.notify("error",c.translate("invalidUrlError"))},load:function(){a()}})}});a.regex=/^\s*data:([a-z]+\/[a-z0-9\-\+]+(;[a-z\-]+\=[a-z0-9\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i})(jQuery);
(function(e){Ss_input.database.newRecord=Ss_input.Plugin.extend({permissions:"write",defaults:{ajaxOptions:{stringifyData:!0,contentType:"application/json"},data:{}},init:function(){this.database=this.ssi.corePlugins.database;this.setButtons()},setButtons:function(){var a=this;this.ssi.addButton({label:'<div class="icon ssi-newDocumentIcon"></div>',title:this.translate("newDocument"),method:function(){a.addNew()}},"menuButton",["menu"])},addNew:function(){var a=this.ssi,b=this,c=this.database.getForm(),
d={title:this.translate("saveAndNew"),label:'<div class="icon ssi-saveIcon"></div>+',method:function(){b.save(function(c,d,e){201==e.status&&(b.database.resetForm(),a.notify("success",b.translate("successSave")))})}},c={content:c,buttons:[{label:'<div class="icon ssi-saveIcon"></div>&nbsp;'+this.translate("save"),closeAfter:!1,className:"ssi-mBtn",method:function(c,d){b.save(function(c,e,f){if(201==f.status||200==f.status)d&&d.close(),a.notify("success",b.translate("successSave"))})}}]};this.database.createWindow(c,
d)},save:function(a){var b=this.database.getFormData();if(b){var c=this.ssi,d=this,f=e.extend({},this.options.data,b),f=e.extend({},{data:f,url:this.database.currentCollection.baseUrl.replace("/:id","")},this.options.ajaxOptions);c.ajaxCall(f,function(e,f,k){201!=k.status&&200!=k.status||c.plugins.scan.appendItems("object"===typeof e&&e.hasOwnProperty(d.database.currentCollection.id)?e:b);"function"===typeof a&&a(e,f,k,b)});return this}}})})(jQuery);
(function(){Ss_input.plugins.refresh=Ss_input.Plugin.extend({init:function(){var e=this.ssi,a=this;e.addButton({label:'<div class="icon ssi-refreshIcon"></div>',title:this.translate("refresh"),id:"ssi-refresh",keyCode:"r",className:"ssi-urlSwitch",method:function(){a.refresh(e.currentCollection.id)}},"menuButton",["menu"])},refresh:function(){if(!this.ssi.readOnlyMode){var e=this.ssi,a=e.plugins.cache;a&&a.removeCachedPage(e.currentCollection.id);e.$element.trigger("resetAction.ssi");e.plugins.scan.scanCollection(e.currentCollection.id,
e.currentCollection.url,e.currentCollection.data)}}})})();
(function(e){Ss_input.plugins.imgBox=Ss_input.Plugin.extend({defaults:{excludeItems:"",imageField:""},init:function(){this.setEvents()},setEvents:function(){var a=this.getButton("","contentImages"+this.ssi.uniqueId),b=this;this.ssi.$element.on("appendItemAction.ssi",function(c,d){!b.options.imageField||!d.data[b.options.imageField]||b.options.excludeItems&&"false"!=eval(Ss_input.tools.dataReplace(b.options.excludeItems,"item.data"))||d.$element.find("div.ssi-optionsDiv").append(a.clone(!0).attr("href",d.data[b.options.imageField]))}).on("changeSchemaAction.ssi",
function(a,d){d.displayImage&&-1<d.displayImage.indexOf("field:(")&&-1==d.displayImage.indexOf("condition:(")&&(b.options.imageField=d.displayImage.replace(/field:\((.*)\)/,"$1"))})},getButton:function(a,b){return this.ssi.addButton({label:'<div class="icon ssi-imgBoxIcon"></div>',id:"",stopPropagation:!1,className:"ssi-imgBox",attributes:{"data-ssi_imgGroup":b,href:a}},"itemButton",!1)}})})(jQuery);
(function(e){Ss_input.plugins.scan=Ss_input.Plugin.extend({require:["templateManager"],defaults:{titleField:"title",idField:"id",displayImage:"",itemClass:"",data:{},ajaxOptions:{}},init:function(){this.ssi.plugins.templateManager.scan=this;this.selectedTemplate={};this.setEvents()},scanCollection:function(a,b,c){if(b){a=a||"/";var d=this.ssi,f=this;d.currentCollection={id:a,url:b,data:c};var g=d.plugins.cache;if(g)var h=g.getCachedPage(a);h?this.echoFiles(h):(d.readyState=!1,c=e.extend({},f.options.data,
c),c=e.extend({},{data:c,type:"GET"},this.options.ajaxOptions),c.url=b||c.url,d.ajaxCall(c,function(b){b={id:a,data:b};d.$element.trigger("beforeScanAction.ssi",b);d.abort||f.echoFiles(b);d.$element.trigger("scanAction.ssi",b);d.abort=!1;d.readyState=!0},function(){d.readyState=!0}));return this}},echoFiles:function(a,b,c){if(a){var d=this.ssi;d.readOnlyMode=!!b||!!d.currentCollection.readOnly;if(b=a.data){d.$element.trigger("beforeEchoItemsAction.ssi",a);a=0;for(var f=[],g=b.length;a<g;++a)f.push(this.filesToDOM(b[a]));
b=e(this.selectedTemplate.wrapper).append(f);d.$content.find("#ssi-contentFiles").html(b);c?d.$element.trigger("silentEchoItemsAction.ssi"):d.$element.trigger("echoItemsAction.ssi")}}},reEchoItems:function(){var a=this.ssi;this.echoFiles({id:a.currentCollection.id,data:a.getPageData()})},setEvents:function(){var a=this;this.ssi.$element.on("changeSchemaAction.ssi",function(b,c){a.options.titleField=c.displayName;a.options.idField=c.id;a.options.displayImage=c.displayImage})},filesToDOM:function(a,
b){var c=this.ssi,d={},f=eval(Ss_input.tools.dataReplace(this.options.displayImage));d.$element=e(c.plugins.templateManager.getTemplate(a,b));var g=d.$element.find("div.ssi-displayDiv");Ss_input.tools.loadImage(g,f);d.$element.find(".ssi-mainElement").data("info",a);d.data=a;c.$element.trigger("appendItemAction.ssi",d);return d.$element},appendItems:function(a,b,c){c=c||this.ssi.$content.find("#ssi-itemsWrapper");b=b||"append";a=Ss_input.tools.toArray(a);for(var d=0,e=[],g=a.length;d<g;++d)e.push(this.filesToDOM(a[d]));
"html"==b&&this.emptyPage(c);c[b](e);this.ssi.$element.trigger("appendItemSetAction.ssi",[a])},emptyPage:function(a){a=a||this.ssi.$content.find("#ssi-contentFiles");a.empty();this.ssi.$element.trigger("emptyPageAction.ssi")},resetItem:function(a,b){b=e.extend({},this.ssi.get$mainElementById(a).data("info"),b);this.removeItems(a);this.appendItems(b)},removeItems:function(a){var b=this.ssi;a=Ss_input.tools.toArray(a);for(var c=0,d=a.length;c<d;c++){var e=a[c];b.get$itemWrapper(b.get$mainElementById(e)).remove();
b.$element.trigger("removeItemAction",[e])}}})})(jQuery);
(function(e){Ss_input.plugins.templateManager=Ss_input.Plugin.extend({template:{details:{wrapper:'<table id="ssi-itemsWrapper" class="ssi-details"><thead><tr class="header"><th></th><#=header#><th></th></tr></thead></table>',item:'<tbody class="ssi-itemWrapper <#= previewClass #>"><tr class="ssi-selectable ssi-mainElement" data-ID="<#= id #>"><td><div style=\'background-image:url("<#=displayImage#>");\'" class="ssi-displayDiv"></td><#=items#><td><div class="ssi-optionsDiv"></div></td></tr></tbody>',header:"<th><#=name#></th>"},
icons:{wrapper:'<div id="ssi-itemsWrapper" class="ssi-icons"></div>',item:'<table class="ssi-itemWrapper <#= previewClass #>"><tr><td><div style=\'background-image:url("<#=displayImage#>");\' data-ID="<#= id #>" class="ssi-mainElement ssi-selectable ssi-displayDiv"><div class="ssi-optionsDiv"></div></div></td></tr><tr><td><div class="ssi-itemName"><#= displayName||"" #></div></td></tr></table>'}},defaults:{template:"icons",excludeFields:[],limit:3,translateFields:""},init:function(){this.options.translateFields=
this.options.translateFields||this.ssi.options.translateFields;this.headerArray=[];this.header="";this.setEvents().setButtons()},setButtons:function(){var a=this;this.ssi.addButton({label:'<span class="icon ssi-previewIcon"></span> '+this.translate("previewType"),id:"",className:"",subMenu:[{label:'<span class="icon ssi-detailsPreviewIcon"></span> '+this.translate("details"),method:function(){"details"!=a.options.template&&(a.options.template="details",a.scan.reEchoItems())}},{label:'<span class="icon ssi-iconsPreviewIcon"></span> '+
this.translate("icons"),method:function(){"icons"!=a.options.template&&(a.options.template="icons",a.scan.reEchoItems())}}]},"listButton",["options"])},setEvents:function(){var a=this;this.ssi.$element.on("beforeEchoItemsAction.ssi",function(b,c){a.scan.selectedTemplate=e.extend({},a.template[a.options.template]);a.setTemplate(c.data)}).on("appendItemSetAction.ssi",function(){a.header||"details"!=a.options.template||a.scan.reEchoItems()}).on("changeSchemaAction.ssi",function(b,c){a.header="";a.headerArray=
[];a.options.excludeFields=c.details});return this},setTemplate:function(a){"details"==this.options.template&&this.setHeader(a[0])},setHeader:function(a){var b=0;if(!this.header)for(var c in a)if(!(-1<e.inArray(c,this.options.excludeFields))&&(this.headerArray.push(c),this.header+=Ss_input.tools.template(this.template.details.header,{name:this.translate(c,this.options.translateFields)}),b++,b==this.options.limit))break;this.scan.selectedTemplate.wrapper=Ss_input.tools.template(this.template.details.wrapper,
{header:this.header})},getTemplate:function(a,b,c,d){var e=this.scan.options,g,h=eval(Ss_input.tools.dataReplace(e.itemClass)),k="",l=a[e.idField];"object"===typeof l&&(l=a[e.idField]=l[Ss_input.tools.getFirstKey(l)]);d=d||this.options.template;b=b||a[e.titleField]||l;c=c||"";if("details"==d)for(var m=0,n=this.headerArray.length;m<n;m++){g="object"!==typeof a[this.headerArray[m]]||a[this.headerArray[m]]instanceof Array?Ss_input.tools.escapeHtml(a[this.headerArray[m]]):a[this.headerArray[m]]=JSON.stringify(a[this.headerArray[m]]);
if(200<g.length||30<g.split(" ").length)g='<div class="ssi-longText">'+g+"</div>";k+="<td"+(this.headerArray[m]==e.titleField?' class="ssi-itemName"':"")+">"+g+"</td>"}a={id:l,displayName:Ss_input.tools.escapeHtml(b),previewClass:h,displayImage:c,items:k};return Ss_input.tools.template(this.template[d].item,a)}})})(jQuery);
(function(e){Ss_input.plugins.iconSize=Ss_input.Plugin.extend({defaults:{defaultSize:"small"},init:function(){this.sizeClass={large:"ssi-mImgL",medium:"",small:"ssi-mImgS"};this.setButtons().setEvents()},setButtons:function(){var a=this;this.ssi.addButton({label:'<span class="icon ssi-sizeIcon"></span> '+this.translate("iconSize"),id:"",className:"",subMenu:[{label:'<span class="ssi-letterIcon">S</span> '+this.translate("small"),method:function(){a.options.defaultSize="small";a.setIcons()}},{label:'<span class="ssi-letterIcon">M</span> '+
this.translate("medium"),method:function(){a.options.defaultSize="medium";a.setIcons()}},{label:'<span class="ssi-letterIcon">L</span> '+this.translate("large"),method:function(){a.options.defaultSize="large";a.setIcons()}}]},"listButton",["options"]);return this},setEvents:function(){var a=this;this.ssi.$element.on("appendItemAction.ssi",function(b,c){c.$element.addClass(a.sizeClass[a.options.defaultSize])});return this},setIcons:function(a){a=a||this.options.defaultSize;this.ssi.$content.find(".ssi-itemWrapper").removeClass("ssi-mImgL ssi-mImgS").addClass(this.sizeClass[a]);
return this}})})(jQuery);
(function(e){Ss_input.plugins.sort=Ss_input.Plugin.extend({defaults:{sortType:"asc",sortBy:"",sortableFields:[],translateFields:""},template:{reverse:'<a id="ssi-reverse" href="#" class="ssi-reverse"><span class="icon ssi-reverseIcon"></span></a>'},init:function(){var a=this.ssi,b=this;this.options.translateFields=this.options.translateFields||a.options.translateFields;a.$element.on("changeSchemaAction.ssi",function(a,d){b.options.sortableFields=d.sort;b.options.sortBy=d.sort[0];b.resetUi()});0!=
this.options.sortableFields.length&&(this.options.sortBy=this.options.sortBy||this.options.sortableFields[0],this.setButtons().setEvents())},setEvents:function(){var a=this;this.ssi.$element.on("beforeEchoItemsAction.ssi",function(b,c){a.sort(c.data)})},setButtons:function(a){var b=this.ssi,c=this,d=[];e(this.template.reverse).appendTo(b.$content.find("#ssi-topBarWrapper")).on("click.ssi",function(){c.options.sortType="asc"===c.options.sortType?"desc":"asc";b.plugins.scan.reEchoItems();return!1});
for(var f=0,g=this.options.sortableFields.length;f<g;f++){var h=this.options.sortableFields[f];d.push({label:'<span class="ssi-letterIcon">'+h[0].toUpperCase()+"</span> "+this.translate(h,this.options.translateFields),attributes:{"data-ssi_title":h},method:function(){c.options.sortBy=e(this).attr("data-ssi_title");b.plugins.scan.echoFiles({id:b.currentCollection.id,data:b.getPageData()})}})}if(2>d.length)return this;this.ssi.addButton({label:'<span class="icon ssi-sortIcon"></span> '+this.translate("sort"),
id:"ssi-sortButton",className:"",subMenu:d},"listButton",a||["options"]);return this},resetUi:function(){var a=this.ssi.$content.find("#ssi-sortButton").remove();this.ssi.$content.find("#ssi-reverse").remove();this.options.sortableFields.length&&(this.options.sortBy=this.options.sortBy||this.options.sortableFields[0],this.setButtons(this.ssi.$content.find("#ssi-TasksBtn").next()),a.length||this.setEvents())},sort:function(a){try{var b=this,c=this.options.sortBy,d=this.options.sortType;d&&a.sort(function(a,
e){var f,g;/(?:[a-z]*(?:_date|date_|Date|-date|date-)[a-z]*)|^(?:date)(?:$|[A-Z]+.*)/.test(c)?(f=Ss_input.tools.parseDate(a[c]),g=Ss_input.tools.parseDate(e[c])):(f=a[c],g=e[c]);if("desc"===d){var l=f;f=g;g=l}if(c!==b.options.sortableFields[0])var m=a[b.options.sortableFields[0]],n=e[b.options.sortableFields[0]];if(f<g)return-1;if(f>g)return 1;if(m<n)return-1;if(m>n)return 1})}catch(f){}}})})(jQuery);
(function(e){Ss_input.plugins.info=Ss_input.Plugin.extend({template:{table:'<table class = "ssi-infoTable ssi-infoCompare"><#=rows#></table>',item:"<td><#=fieldData#></td>",row:"<tr><th><#=header#></th><#=items#></tr>"},defaults:{excludeItems:"",excludeFields:[],translateFields:""},init:function(){this.options.translateFields=this.options.translateFields||this.ssi.options.translateFields;this.$content="";this.setButtons()},setButtons:function(){var a=this;this.ssi.addButton({label:'<span class="icon ssi-infoIcon"></span>'+
this.translate("info")+'<span class="ssi-keyShort">ctrl + i</span>',id:"",keyPress:{keyCode:"73",ctrl:!0},className:"ssi-detailsButton",method:function(){a.getFilesInfo()},selectionRequired:!0},"listButton",["contextMenu","actions"])},handleData:function(a){},getTemplate:function(a){var b=0,c=a.length,d,f="",g,h;for(h in a[0])if(!this.options.excludeFields.length||-1!=e.inArray(h,this.options.excludeItems)){var k=c;6<k&&(k=6);d="";for(var l=0;l<k;l++)this.options.excludeItems&&"false"!=eval(Ss_input.tools.dataReplace(this.options.excludeItems,
"data[i]"))?c>k&&k++:("preview"==h?g=a[l][h]:(g=Ss_input.tools.escapeHtml(a[l][h]),5<g.split(" ").length&&(g='<div class="ssi-longText">'+g+"</div>")),d+=Ss_input.tools.template(this.template.item,{fieldData:g}),b++);f+=Ss_input.tools.template(this.template.row,{header:this.translate(h,this.options.translateFields),items:d});if(0==b)return!1}return Ss_input.tools.template(this.template.table,{rows:f})},getFilesInfo:function(){var a=this.ssi,b=a.getSelectedData();if(b.length&&(this.handleData(b),b=
this.getTemplate(b))){var c=e(b);a.createWindow({title:this.translate("details"),sizeClass:"auto",className:"ssi-infoModal",outSideClose:!1,content:c,buttons:{className:"ssi-mBtn",label:this.translate("ok"),closeAfter:!0},onClose:function(){a.$element.trigger("infoCloseAction.ssi")},onShow:function(){a.$element.trigger("infoShowAction.ssi",[c])}})}}})})(jQuery);
(function(e){var a=[],b=[],c=[];Ss_input.fileSystem.copy=Ss_input.Plugin.extend({permissions:"write",defaults:{copy:{data:{},ajaxOptions:{}},cut:{data:{},ajaxOptions:{}}},init:function(){this.setEvents().setButtons()},setEvents:function(){var d=this.ssi,e=this;d.$element.on("resetAction.ssi",function(){a=[];b=[];c=[];d.$content.find(".ssi-pasteButton").addClass("disabled")}).on("echoItemsAction.ssi",function(){e.setCut();0<a.length||0<b.length?d.$content.find(".ssi-pasteButton").removeClass("disabled"):
d.$content.find(".ssi-pasteButton").addClass("disabled")}).on("removeCollectionAction.ssi",function(a,c){b.length&&Ss_input.tools.removeFromArray(b,d.fileSystem.options.rootPath+c)});return this},setButtons:function(){var a=this.ssi,b=this;a.addButton({label:'<span class="icon ssi-copyIcon"></span> '+this.translate("copy")+' <span class="ssi-keyShort">ctrl + c</span>',className:"",method:function(){b.copy()},keyPress:{keyCode:"67",ctrl:!0},selectionRequired:!0},"listButton",["contextMenu","actions"]);
a.checkPermissions(this.permissions,"cut")&&a.addButton({label:'<span class="icon ssi-cutIcon"></span> '+this.translate("cut")+' <span class="ssi-keyShort">ctrl + x</span>',className:"",method:function(){b.cut()},keyPress:{keyCode:"88",ctrl:!0},selectionRequired:!0},"listButton",["contextMenu","actions"]);a.addButton({label:'<span class="icon ssi-pasteIcon"></span> '+this.translate("paste")+' <span class="ssi-keyShort">ctrl + v</span>',className:"ssi-pasteButton",method:function(){b.paste()},keyPress:{keyCode:"86",
ctrl:!0},selectionRequired:!1},"listButton",["contextMenu","options"]);return this},cut:function(c){try{var d=this.ssi;this.cutEffect("remove");a=c?Ss_input.tools.toArray(c):d.getUrlList();this.toPaste=d.getSelectedData();this.cutEffect("add");b=[];d.$content.find(".ssi-pasteButton").removeClass("disabled")}catch(g){}},copy:function(c){var d=this.ssi;c?Ss_input.tools.toArray(c):b=d.getUrlList();this.toPaste=d.getSelectedData();0<a.length&&(this.cutEffect("remove"),a=[]);d.$content.find(".ssi-pasteButton").removeClass("disabled")},
cutEffect:function(a){"add"===a?e(".ssi-mActive").addClass("ssi-cutItem").length||e(this.ssi.plugins.contextMenu.rightClickItem).addClass("ssi-cutItem"):e(".ssi-cutItem").removeClass("ssi-cutItem")},setCut:function(){for(var b=0;b<a.length;b++)this.ssi.$content.find(".ssi-selectable[data-ID='"+a[b]+"']").addClass("ssi-cutItem")},paste:function(){function d(a,b){var d;b=b||"";c.push(0);q.success=function(a){try{try{a=e.parseJSON(a)}catch(z){console.log("Probably data is not json formatted."),console.log(a)}if("success"===
a.type){var c;c=-1<a.msg.indexOf("continue")?a.msg.replace(" continue",""):Ss_input.tools.basename(q.data.newUrl);var f=p[u],g=r,l=b,m=Ss_input.tools.basename(f),n=Ss_input.tools.dirname(f).replace(x.options.rootPath,"")||"/";if("cutAction"!==g||"continue"!==l){var w=e.extend({},Ss_input.tools.findByKey(v.toPaste,"name",m));"replace"===l?(t.$element.trigger("removeItemAction.ssi",w.path),"directory"===w.mimeType&&t.$element.trigger("removeCollectionAction.ssi",w.path.replace(t.fileSystem.rootPath))):
"continue"===l&&"cutAction"!=g&&(w.name=c);w.path=x.getPath(c);var B=t.plugins.sidebar,y=t.plugins.cache;"directory"===w.mimeType&&(m=!1,"cutAction"===g&&(m=!0,y&&1<y.options.cacheLimit&&y.removeCachedPage(Ss_input.tools.urlUnion(n,c))),B&&B.copyTree(f,x.getPath(c),!0,m));"replace"!=l&&t.plugins.scan.appendItems(w);"cutAction"===g&&y&&1<y.options.cacheLimit&&y.removeCachedItem("path",f,n)}k();t.checkedItems&&Ss_input.tools.removeFromArray(t.checkedItems,p[u])}else if("error"===a.type)if(-1<a.msg.indexOf("already_exists"))d=
x.getPath(Ss_input.tools.basename(p[u])),g=a.msg.replace("already_exists",""),30<g.length&&(g=Ss_input.tools.cutFileName(g,"",28)),h(d,p[u],g);else throw{type:a.type,msg:a.msg};else throw{type:a.type,msg:a.msg};}catch(z){k(),"error"===z.type?t.notify("error",z.msg):(console.log(a),console.log(z.msg),console.log(z.message))}};q.data=a;t.ajaxCall(q)}function f(a,b,c){a=g(b,a.type);b=new RegExp(Ss_input.tools.escape(b)+"$");return c.replace(b,a)}function g(a,b,c){var d=[],f;for(f=0;f<C.length;f++)d[f]=
C[f].name;if("inArray"===c)return-1!==e.inArray(a,d);f="";c=a;"zzzzfolder"!==b&&(f="."+Ss_input.tools.getExtension(a),c=a.replace(f,""));if(-1!==e.inArray(c+"-copy"+f,d))if("zzzzfolder"===b)for(f=1;50>f;f++){if(b=a+"-copy("+f+")",-1===e.inArray(b,d)){a=b;break}}else for(f=1;50>f;f++){if(b=a.replace(/(.[a-zA-Z]{1,5})$/,"-copy("+f+")$1"),-1===e.inArray(b,d)){a=b;break}}else a=c+"-copy"+f;return a}function h(a,b,c,g){var h=e.extend({},n,{newUrl:a,oldUrl:b});b=function(){"cutAction"!==r&&(a=f(g,c,a),
h.newUrl=a,h.action="continue",d(h,"continue"))};var l=[{label:v.translate("replace"),closeAfter:!0,className:"ssi-mBtn",method:function(){h.action=!0;d(h,"replace")}},{label:v.translate("skip"),className:"ssi-mBtn",closeAfter:!0,method:function(){u++;k(p[u])}},{label:v.translate("cancel"),className:"ssi-mBtn ssi-cancel",closeAfter:!0}];"copyAction"===r&&l.splice(0,0,{label:v.translate("createCopy"),closeAfter:!0,className:"ssi-mBtn",method:b});t.createWindow({sizeClass:"small",className:"ssi-confirmModal",
fixedHeight:!1,content:Ss_input.tools.replaceText(v.translate("replaceMsg"),c),buttons:l})}function k(){u++;u<p.length?l():(t.reloadProgressbar(),u=0,"cutAction"==r&&(t.$content.find(".ssi-pasteButton").addClass("disabled"),a=[]))}function l(){var a=Ss_input.tools.basename(p[u]),b=x.getPath(a);if("cutAction"!=r||b!==p[u]){var c=e.extend({},n,{newUrl:b,oldUrl:p[u]}),k=Ss_input.tools.findByKey(v.toPaste,"name",a);b==p[u]?(b=f(k,a,b),c.newUrl=b,A="continue",d(c,A)):g(a,k.type,"inArray")?h(b,p[u],a,k):
d(c,A)}}var m,n,q,p,r,A="",t=this.ssi,v=this,x=t.fileSystem;if(0<b.length)r="copyAction",m=x.options.scriptsPath+"/copyAction.php",n=this.options.copy.data||{},p=b,q=this.options.copy.ajaxOptions||{};else if(0<a.length)r="cutAction",m=x.options.scriptsPath+"/cutAction.php",n=this.options.cut.data||{},p=a,q=this.options.cut.ajaxOptions||{},this.cutEffect("remove"),a=[];else return;var C=t.getPageData(),u=0;q=e.extend({},{url:m,xhr:function(){var a=new window.XMLHttpRequest;a.addEventListener("progress",
function(a){if(a.lengthComputable){var b=t.$content.find("#ssi-progressBar");b.removeClass("hide");c[u]=a.loaded/a.total*100;a=Ss_input.tools.arraySum(c)/p.length;b.css({width:a+"%"})}},!1);return a}},q);l()}})})(jQuery);
(function(e){Ss_input.plugins["delete"]=Ss_input.Plugin.extend({permissions:"edit",defaults:{sendId:"inForm",ajaxOptions:{},onDelete:function(){},data:{}},init:function(){this.setEvents();this.setButtons();this.baseurl=this.options.ajaxOptions.url},setEvents:function(){var a=this;this.ssi.$element.on("resetAction.ssi",function(){});this.ssi.$element.on("changeSchemaAction.ssi",function(b,c){a.baseurl=c.url})},setButtons:function(){var a=this;this.ssi.addButton({label:'<span class="icon ssi-deleteIcon"></span> '+
this.translate("delete")+' <span class="ssi-keyShort">del</span>',id:"",keyPress:{keyCode:"46"},className:"",method:function(){a.deleteFiles()},selectionRequired:!0},"listButton",["contextMenu","actions"])},idInUrl:function(a){for(var b=0,c=a.length;b<c;b++)a[b]?(this.options.ajaxOptions.url=-1==this.baseurl.indexOf("/:id")?this.baseurl+"/"+a[b]:this.baseurl.replace(":id",a[b]),this.sendRequest("",this.deleteCallback(a[b]))):console.log("Id is required. Try to refresh the data!")},deleteCallback:function(a){var b=
this;return function(c,d,e){b.ssi.plugins.scan.removeItems(a);b.ssi.$element.trigger("resetAction.ssi");b.ssi.$element.trigger("deleteAction.ssi",a);if("function"===typeof b.options.onDelete)b.options.onDelete(c,d,e,a)}},sendRequest:function(a,b){a=a||{};a=e.extend({},this.options.data,a);var c=e.extend({},{data:a,type:"DELETE",url:""},this.options.ajaxOptions);this.ssi.ajaxCall(c,b)},idInForm:function(a){this.sendRequest({id:a},this.deleteCallback(a))},deleteDir:function(a){a.length&&("inUrl"==this.options.sendId?
this.idInUrl(a):this.idInForm(a))},deleteFiles:function(){var a=this.ssi,b=this,c=a.getUrlList();c&&0!==c.length&&a.createWindow({sizeClass:"dialog",fixedHeight:!1,className:"ssi-confirmModal",content:this.translate("deleteMsg"),buttons:[{label:this.translate("cancel"),className:"ssi-mBtn ssi-cancel",closeAfter:!0},{label:this.translate("ok"),className:"ssi-mBtn",closeAfter:!0,focused:!0,method:function(){b.deleteDir(c)}}]})}})})(jQuery);
(function(e){Ss_input.fileSystem.textEditor=Ss_input.Plugin.extend({defaults:{ajaxOptions:{},data:{},pathField:"path",modalOptions:{preview:{icon:!0,state:"normal",hideIcons:!0}},readOnly:""},init:function(){this.modalOptions={className:"ssi-filePreview",fixedHeight:!0,buttons:[],outSideClose:!1,sizeClass:"large",fitScreen:!0};this.path="";this.setModal();this.setButtons()},setButtons:function(){var a=this;this.ssi.addButton({label:'<span class="icon ssi-editFileIcon"></span> '+this.translate("textEditor"),
id:"",className:"ssi-editFile",method:function(b){a.path=a.ssi.getSelectedField("path")[0];a.openFile(a.path)},selectionRequired:!0},"listButton",["openWith"],'condition:(field:(mimeType)=="text/plain")')},setModal:function(){var a=this;e.extend(this.modalOptions,this.options.modalOptions);this.ssi.checkPermissions("edit","editFiles")?this.modalOptions.buttons.push({label:this.translate("save"),method:function(){a.saveFile(a.getPath(),a.getContent())}},{label:a.translate("cancel"),closeAfter:!0}):
this.options.readOnly=this.options.readOnly||!0},openFile:function(a,b){var c=this;this.sendRequest(a,"",function(d){d=e('<textarea id="ssi-textArea" class="ssi-textArea" '+(c.options.readOnly?"readonly":"")+">"+d+"</textarea>");c.createWindow(d,Ss_input.tools.basename(a));"function"==typeof b&&b(d)},"GET")},saveFile:function(a,b){var c=this;this.sendRequest(a,b,function(a){c.ssi.notify("success",c.translate("fileSaved"))},"UPDATE");return this},createWindow:function(a,b){this.modalOptions.content=
a;this.modalOptions.title=b;this.uniqueId="ssi-normalModal"+this.ssi.createWindow(this.modalOptions).numberId;return this},sendRequest:function(a,b,c,d){var f=this.ssi;a=e.extend({},this.options.data,{filePath:a,fileContent:b});d=e.extend({},{data:a,type:d,url:f.fileSystem.options.scriptsPath+"/editFileAction.php"},this.options.ajaxOptions);f.ajaxCall(d,c);return this},getContent:function(){return e("#"+this.uniqueId).find("#ssi-textArea").val()},getPath:function(){return this.path}})})(jQuery);
(function(e){Ss_input.fileSystem.aceEditor=Ss_input.Plugin.extend({externalResources:["ace",'ace.require("ace/ext/modelist")'],defaults:{theme:"monokai",config:function(){}},setButtons:function(){var a=this;this.ssi.addButton({label:'<span class="icon ssi-aceEditorIcon"></span> '+this.translate("aceEditor"),id:"",className:"ssi-editFile",method:function(){a.path=a.ssi.getSelectedField("path")[0];a.openFile(a.path)},selectionRequired:!0},"listButton",["openWith","actions"],'condition:(field:(mimeType)=="text/plain")');
this.modalOptions.className+=" ssi-aceEditor"},openFile:function(a,b){var c=this;this.sendRequest(a,"",function(d){d='<div class="ssi-textArea" id="ssi-aceEditor">'+d+"</div>";c.createWindow(d,Ss_input.tools.basename(a));c.setEditor(a);"function"==typeof b&&b(d)},"GET")},setEditor:function(a){this.editor=editor=ace.edit("ssi-aceEditor");this.options.readOnly&&editor.setReadOnly(!0);editor.setTheme("ace/theme/"+this.options.theme);editor.$blockScrolling="Infinity";editor.session.setMode(ace.require("ace/ext/modelist").getModeForPath(a).mode);
editor.resize();"function"===typeof this.options.config&&this.options.config(editor)},getContent:function(){return this.editor.getValue()},getPath:function(){return this.path}},"textEditor",Ss_input.fileSystem)})(jQuery);
(function(e){Ss_input.fileSystem.rename=Ss_input.Plugin.extend({permissions:"edit",template:'<div id="ssi-editField" class="ssi-editField"><input type="text" id="ssi-renameInput" value="<#=value#>" /></br><button class="ssi-mBtn" id="ssi-renameConfirm"><#=okLabel#></button><button class="ssi-mBtn ssi-cancel" id="ssi-renameCancel"><#=cancelLabel#></button></div>',defaults:{ajaxOptions:{},data:{}},init:function(){this.setButtons();this.setEvents()},setEvents:function(){var a=this.ssi;a.$element.on("appendItemAction.ssi",
function(a,c){});a.$content.on("mousedown.ssi",function(a){var b=e(".ssi-itemWrapper"),d=b.is(a.target),b=0===b.has(a.target).length;a=e(a.target).hasClass("ssi-selectionRequired");d||!b||a||(e(".ssi-editField").remove(),e(".ssi-itemName").show())})},setButtons:function(){var a=this;this.ssi.addButton({label:'<span class="icon ssi-renameIcon"></span> '+this.translate("rename")+' <span class="ssi-keyShort">F2</span>',id:"",className:"ssi-rename",keyPress:{keyCode:"113",ctrl:!1},method:function(){a.rename()},
selectionRequired:!0},"listButton",["contextMenu","actions"])},rename:function(a){this.ssi.$content.find("#ssi-renameCancel").trigger("click");var b=this.ssi,c=this,d=b.fileSystem;a=a||b.getUrlList()[0];var f=b.get$mainElementById(a),g=f.parents(".ssi-itemWrapper").find(".ssi-itemName"),h=Ss_input.tools.basename(a),k=e(Ss_input.tools.template(this.template,{value:h,okLabel:this.translate("ok"),cancelLabel:this.translate("cancel")}));k.find("#ssi-renameCancel").click(function(){k.remove();g.show();
return!1});a=k.find("#ssi-renameConfirm");var l=k.find("#ssi-renameInput");g.after(k).hide();l.focus().click(function(){return!1});a.click(function(){var a=l.val().replace(/[\[\]/#<$+%>!`&*'|{?"=}\/:\\@\{]/g,""),n="";if(""!=a&&a!==h){if(b.getItemData("name",a)){b.notify("error",Ss_input.tools.replaceText(c.translate("existError"),a));return}var q=b.getItemData("name",h);if("zzzzfolder"!==q.type&&(n=Ss_input.tools.getExtension(a),-1===e.inArray(n.toLowerCase(),b.fileSystem.options.allowed))){b.notify("error",
Ss_input.tools.replaceText(c.translate("extError"),n));return}var p=d.getPath(h),r=d.getPath(a),n=e.extend({},c.options.data,{newUrl:r,oldUrl:p}),n=e.extend({},{data:n,language:b.options.language,url:d.options.scriptsPath+"/renameAction.php"},c.options.ajaxOptions);b.ajaxCall(n,function(c){f.attr("data-ID",r);g.text(a);k.remove();g.show();c=f.data("info");c.name=a;c.path=Ss_input.tools.urlUnion(b.currentCollection.id,r);var d=b.plugins.cache;if(d){var e=d.getCache();if(q=d.getCachedItem("name",h,
"",e))q.name=a,q.path=c.path;d.setCache(e)}c=b.plugins.sidebar;!Ss_input.tools.isFile(p,b.fileSystem.options.allowed)&&c&&c.editTreeLink(p,r,a,r)})}return!1})}})})(jQuery);
(function(e){Ss_input.database.editRecord=Ss_input.Plugin.extend({permissions:"edit",template:{form:'<form id="ssi-formData"><table><#=formItem#></table></form>',formItem:'<tr><th><label for="<#=inputId#>" class="<#=labelClass#>"><#=label#></label></th><td><#=input#></td></tr>'},defaults:{sendId:"inUrl",ajaxOptions:{stringifyData:!0,contentType:"application/json"},data:{}},init:function(){this.database=this.ssi.database;this.setButtons()},setEvents:function(){},setButtons:function(){var a=this;this.ssi.addButton({label:'<span class="icon ssi-editDocumentIcon"></span> '+
this.translate("editDocument"),id:"",className:"ssi-editFile",method:function(b){a.edit(a.ssi.getSelectedData()[0])},selectionRequired:!0},"listButton",["contextMenu"])},edit:function(a){var b=this.ssi,c=this,d=e(this.database.getForm(a));"inForm"==this.options.sendId&&d.append('<input type="hidden" class="ssi-inputField" name="'+this.database.id+'" value="'+a[this.database.currentCollection.id]+'">');if(b.checkPermissions("write","saveAsNew"))var f={title:this.translate("saveAsNew"),label:'<div class="icon ssi-saveIcon"></div>+',
method:function(){c.save(a[c.database.currentCollection.id],function(a,d,e,f){if(201==e.status||200==e.status)b.plugins.scan.appendItems("object"===typeof a&&a.hasOwnProperty(c.database.currentCollection.id)?a:f),b.notify("success",c.translate("successSave"))},{url:c.database.currentCollection.baseUrl.replace("/:id",""),type:"POST"})}};d={content:d[0].outerHTML,buttons:[{label:'<div class="icon ssi-saveIcon"></div>&nbsp;'+this.translate("save"),closeAfter:!1,className:"ssi-mBtn",method:function(d,
e){var f=a[c.database.currentCollection.id];c.save(f,function(a,d,g,h){200==g.status&&(e&&e.close(),b.plugins.scan.resetItem(f,"object"===typeof a&&a.hasOwnProperty(c.database.currentCollection.id)?a:h),b.notify("success",c.translate("successSave")))})}}]};this.database.createWindow(d,f)},save:function(a,b,c){var d=this.database.getFormData();if(d){var f=this.ssi,g=e.extend({},this.options.data,d);a="inUrl"==this.options.sendId?-1==this.database.currentCollection.baseUrl.indexOf("/:id")?this.database.currentCollection.baseUrl+
"/"+a:this.database.currentCollection.baseUrl.replace(":id",a):this.database.currentCollection.baseurl;c=e.extend({},{data:g,type:"PUT",url:a},c,this.options.ajaxOptions);f.ajaxCall(c,function(a,c,e){"function"===typeof b&&b(a,c,e,d)});return this}}})})(jQuery);
(function(e){Ss_input.plugins.sidebar=Ss_input.Plugin.extend({template:{sideBar:'<div id="ssi-sidebar" class="ssi-sidebar"><div id="ssi-sidebarContent"></div></div>',treeItem:'<li id="<#=id#>" class="<#=className#>"><a class="ssi-listAnchor" href="<#=href#>" ><#=name#></a><#=children#></li>',hideButton:'<a href="#" id="ssi-hideSideBar"><div class="icon ssi-sideBarIcon"></div></a>',dragBar:'<div id="dragbar"></div>'},defaults:{state:"open",data:[],fieldDefinition:{name:"name",id:"id",url:"url",children:"children",
className:"className"},className:"",resizable:!0,mode:"treeView"},init:function(){this.ssi.$content.find(".ssi-mainContent").prepend(this.template.sideBar);this.options.fieldDefinition=e.extend({},this.defaults.fieldDefinition,this.options.fieldDefinition);this.options.data.length&&this.setSidebar(this.options.data);this.setButtons()},setSidebar:function(c){var d=this.ssi.$content.find("#ssi-sidebarContent");"close"==this.options.state&&d.parent().addClass("ssi-verticalSlide");d.addClass(this.options.className).html(this.setList(c));
"treeView"==this.options.mode?b(d):"accordion"==this.options.mode?a(d):"dropDown"==this.options.mode&&(d.addClass("ssi-dropDownWrapper"),d.parent().addClass("ssi-dropDownMode"));return this},setButtons:function(){var a=this.ssi;e(this.template.hideButton).on("click.ssi",function(){a.$content.find("#ssi-sidebar").toggleClass("ssi-verticalSlide");return!1}).prependTo(a.$content.find(".ssi-topBarButtonArea"));this.options.resizable&&this.setDragBar()},deleteTree:function(a){a=this.ssi.$content.find("#ssi-sidebar").find(document.getElementById(a));
var b=a.parent();a.remove();0===b.children().length&&b.parent().removeClass("parent").find("a.ssi-treeTrigger").remove()},addTree:function(a,b,e){b=this.ssi.$content.find(document.getElementById(b||"ssi-sidebarContent"));"treeView"!=this.options.mode&&(b=this.ssi.$content.find("#ssi-sidebarContent").children("ul"));e=e||this.setList(a,!0);b.children("ul").append(e);b.hasClass("parent")||(b.addClass("parent"),"treeView"==this.options.mode&&b.prepend('<a class="ssi-treeTrigger" href="#">'))},editTreeLink:function(a,
b,e,g){this.ssi.$content.find("#ssi-sidebar").find(document.getElementById(a)).children("a.ssi-listAnchor").attr({href:b,id:g}).html(e)},setList:function(a,b){a=Ss_input.tools.toArray(a);for(var c=Ss_input.tools.template,d="",e,k,l=this.options.fieldDefinition,m=0,n=a.length;m<n;m++)try{e=k="";var q=a[m][l.children];q&&0<q.length&&(e=this.setList(q),k="parent "+(a[m].active?"active ":""));d+=c(this.template.treeItem,{id:a[m][l.id]||"",href:a[m][l.url]||"",name:a[m][l.name]||"",children:e||"<ul></ul>",
className:k+(a[m][l.className]||"")})}catch(p){console.log(p)}return b?d:"<ul>"+d+"</ul>"},setDragBar:function(){var a=this.ssi;a.$content.find("#ssi-items").prepend(this.template.dragBar);a.$content.mouseup(function(c){if(b){c=a.$content.find("#ssi-sidebar");var d=c.parent().width(),e=.1*d,g=.4*d;f<e&&(f=e);f>g&&(f=g);c.css("width",100*f/d+"%");a.$content.find("#ghostbar").remove();a.$content.off("mousemove");b=!1}});var b=!1,f;a.$content.find("#dragbar").mousedown(function(c){c.preventDefault();
b=!0;var d=a.$content.find("#ssi-items"),g=e("<div>",{id:"ghostbar",css:{height:"100%",top:0,left:0}}).appendTo(d);e(document).mousemove(function(a){f=a.pageX-d.offset().left;g.css("left",f)})})}});var a=function(a){e(a).addClass("ssi-accordion").on("click","li",function(){var a=e(this);a.siblings(".active").removeClass("active").children("ul").slideUp(300);a.children("ul").slideToggle();a.toggleClass("active");return!1})},b=function(a){a=e(a);a.addClass("ssi-treeView").find("li.parent").prepend('<a class="ssi-treeTrigger" href="#"></a>').filter(".active").children("ul").slideToggle("fast");
a.off(".ssi_treeView");a.on("click.ssi_treeView",".ssi-treeTrigger",function(){var a=e(this),b=a.parent();b.find(".ssi-treeViewRCurrent").length&&b.hasClass("active")?a.next("a").addClass("ssi-treeViewCurrent"):a.next("a").removeClass("ssi-treeViewCurrent");b.toggleClass("active");b.children("ul").slideToggle("fast");return!1})}})(jQuery);
(function(e){Ss_input.plugins.selectAll=Ss_input.Plugin.extend({defaults:{selectableClasses:{},translateFields:""},require:["select"],init:function(){this.setButtons()},setButtons:function(){var a=this.ssi,b=this;this.options.translateFields=this.options.translateFields||a.options.translateFields;var c=[{label:'<span class="icon ssi-selectAllIcon"></span> '+this.translate("all")+' <span class="ssi-keyShort">ctrl + a</span>',method:function(){b.select("ssi-selectable")},keyPress:{keyCode:"65",ctrl:!0}}],
d;for(d in this.options.selectableClasses)c.push({label:'<span class="ssi-letterIcon">'+d[0]+'</span><span class="ssi-title"> '+this.translate(d,this.options.translateFields)+"</span>",attributes:{"data-ssi_title":d},method:function(){b.select(b.options.selectableClasses[e(this).attr("data-ssi_title")])}});a.addButton({label:'<span class="icon ssi-selectionIcon"></span> '+this.translate("select"),id:"",className:"",subMenu:c},"listButton",["options"])},select:function(a){var b=this.ssi,c=b.$content.find("."+
a);a=c.find(".ssi-selectable");a.length||(a=c);var c=a.length,d=b.plugins.select;d.removeSelectedList();a.addClass("ssi-mActive");0<c&&(b.$content.find(".ssi-selectionRequired").removeClass("ssi-hidden"),b.$content.find(".ssi-mustSelect").removeClass("disabled"));for(b=0;b<c;b++)d.selectionList.push(e(a[b]).attr("data-ID"))}})})(jQuery);
(function(e){Ss_input.plugins.cache=Ss_input.Plugin.extend({defaults:{cacheLimit:5,cacheTo:"localStorage"},init:function(){var a=this;this.ssi.addButton({label:'<span class="icon ssi-cacheIcon"></span> '+this.translate("cleanCache"),id:"",className:"",method:function(){a.cleanHistory()}},"listButton",["options"]);this.cachedPages=[];1>this.options.cacheLimit&&(this.options.cacheLimit=1);this.setEvents()},setEvents:function(){var a=this.ssi,b=this;a.$element.on("closeAction.ssi",function(){sessionStorage.removeItem("historyCache"+
a.uniqueId);b.cachedPages=[]}).on("scanAction.ssi",function(a,d){b.cachePage(d)}).on("emptyPageAction.ssi",function(){var a=this.getCache();b.getCachedPage(b.ssi.currentCollection.id,a).data=[];b.setCache(a)}).on("appendItemSetAction.ssi",function(a,d){var c=b.getCache(),e=b.getCachedPage("",c);e.data=e.data.concat(d);b.setCache(c)}).on("removeItemAction.ssi",function(a,d){b.removeCachedItem(b.ssi.plugins.scan.options.idField,d)}).on("removeCollectionAction.ssi",function(a,d){b.removeCachedPage(d)})},
getCache:function(){try{return"localStorage"==this.options.cacheTo?JSON.parse(sessionStorage.getItem("historyCache"+this.ssi.uniqueId))||[]:this.cachedPages}catch(a){return[]}},setCache:function(a){if("localStorage"!=this.options.cacheTo)return this;try{return sessionStorage.setItem("historyCache"+this.ssi.uniqueId,JSON.stringify(a)),this}catch(b){return!1}},removeCachedPage:function(a,b){b=b||this.getCache();Ss_input.tools.removeObjFromArray(b,"id",a);this.setCache(b);return this},removeCachedItem:function(a,
b,c,d){a=a||"name";d=d||this.getCache();if(c="string"===typeof c&&""!==c?this.getCachedPage(c,d):c||this.getCachedPage(this.ssi.currentCollection.id,d))Ss_input.tools.removeObjFromArray(c.data,a,b),this.setCache(d);return this},cachePage:function(a,b){b=b||this.getCache();b.length>=this.options.cacheLimit&&b.shift();b.push(a);this.setCache(b);return this.ssi},cacheItem:function(a,b,c){c=c||this.getCache();(b="string"===typeof b&&""!==b?this.getCachedPage(b,c):b||this.getCachedPage(this.ssi.currentCollection.id,
c))&&b.data.push(a);this.setCache(c);return this.ssi},getCachedPage:function(a,b){b=b||this.getCache();a=a||this.ssi.currentCollection.id||"/";return Ss_input.tools.findByKey(b,"id",a)},getCachedItem:function(a,b,c,d){d=d||this.getCache();return(c="string"===typeof c&&""!==c?this.getCachedPage(c,d):c||this.getCachedPage(this.ssi.currentCollection.id,d))?Ss_input.tools.findByKey(c.data,"name",b):!1},cleanHistory:function(){var a=this.getCachedPage();sessionStorage.removeItem("historyCache");this.cachedPages=
[];this.setCache([a])}})})(jQuery);
(function(e){Ss_input.plugins.infoBubble=Ss_input.Plugin.extend({template:"<#var index=0;for(var dataName in data){if(eval(thisS.condition))continue;#><#=thisS.translate(dataName,thisS.translateFields)#>: <#=data[dataName]#><br><#index++;if (index == thisS.options.limit)break;}#>",defaults:{limit:4,excludeFields:[],excludeItems:"",translateFields:""},init:function(){this.options.translateFields=this.options.translateFields||this.ssi.options.translateFields;this.setEvent().setCondition();return this},
setCondition:function(){this.condition=0<this.options.excludeFields.length?"$.inArray(dataName,thisS.options.excludeFields)>-1":"false";return this},setEvent:function(){var a,b=this.ssi,c=this;b.$element.on("resetAction.ssi changeCollectionAction.ssi",function(){a&&clearTimeout(a)}).on("changeSchemaAction.ssi",function(a,b){c.options.includeFields=b.details;c.setCondition()});b.$content.on({"mouseenter.ssi":function(b){b.preventDefault();a||(a=setTimeout(function(){c.getInfoBubble(b)},2E3))},"mouseleave.ssi":function(){a&&
(clearTimeout(a),a=null)}},".ssi-displayDiv");return this},getInfoBubble:function(a){a=e(a.currentTarget);var b=this.ssi.getSelectedData(a)[0];if("true"!=eval(Ss_input.tools.dataReplace(this.options.excludeItems))){var b=Ss_input.tools.template(this.template,{thisS:this,data:b}),c=Ss_input.tools.tooltip(a,b,!0).appendTo(a.parents("#ssi-items")),b=a.position().left,d=a.position().top+a.height()+6;a.parents("#ssi-contentFiles").one("scroll",function(){c.remove()});c.css({top:d+"px",left:b+"px"}).removeClass("ssi-fadeOut");
return this}}})})(jQuery);
(function(e){Ss_input.plugins.nameBubble=Ss_input.Plugin.extend({init:function(){this.setEvents()},setEvents:function(){var a;this.ssi.$element.on("resetAction.ssi changeCollectionAction.ssi",function(){a&&clearTimeout(a)});this.ssi.$content.on({"mouseenter.ssi":function(b){var c=e(b.target);c.outerWidth()<c[0].scrollWidth&&(a||(a=setTimeout(function(){Ss_input.tools.tooltip(c,c.html()).css("max-width","350px")},2E3)))},"mouseleave.ssi":function(b){a&&(clearTimeout(a),a=null)}},".ssi-itemName")}})})(jQuery);
(function(e){var a=!1;Ss_input.plugins.contextMenu=Ss_input.Plugin.extend({rightClickItem:"",template:'<div class="ssi-dropDownWrapper"><ul id="ssi-contextMenuUl" class="custom-menu ssi-actionBtns"></ul></div>',init:function(){this.ssi.$content.append(this.template);this.setEvents()},setEvents:function(){var b=this.ssi,c=this,d;b.$element.on("resetAction.ssi",function(a){c.rightClickItem=""});b.$content.on("contextmenu",function(f){if(!e(f.target).is("input")){f.preventDefault();c.setRightClick(f);
var g=b.$content.find("#ssi-contextMenuUl"),h=e(this).offset(),k=f.pageX-h.left;f=f.pageY-h.top;g.addClass("ssi-appear");d||setTimeout(function(){d=g.height()},150);f>b.$content.height()-d+75&&(f-=d);g.css({top:f+"px",left:k+"px"});a=!0}}).on("mouseup.ssi",function(d){a&&0< !e(d.target).parents("#ssi-contextMenuUl").length&&(b.$content.find("#ssi-contextMenuUl").removeClass("ssi-appear"),c.rightClickItem="",b.$content.find(".ssi-mustSelect").addClass("disabled").prop("disabled",!0),a=!1)}).find("#ssi-contextMenuUl").on("mouseup.ssi",
function(){e(this).removeClass("ssi-appear");a=!1})},setRightClick:function(a){var b=this.ssi;a=b.get$mainElement(e(a.target));if(a.hasClass("ssi-selectable")){var d=this.ssi.$content.find("#ssi-contextMenuUl");d.find(".ssi-mustSelect").removeClass("disabled");d.find(".ssi-hidden").removeClass("ssi-hidden");this.rightClickItem=a;b.checkExcludedButtons(function(a){a=b.$content.find("#ssi-contextMenuUl").find(a);var c=a.closest("ul");0==c.children().length-a.length&&c.parent("li").addClass("ssi-hidden")})}else b.$content.find(".ssi-mustSelect").addClass("disabled")}})})(jQuery);
(function(e){Ss_input.plugins.select=Ss_input.Plugin.extend({init:function(){var a=this.ssi,b=this;a.addButton({label:'<span class="icon ssi-selectIcon"></span> '+this.translate("select"),id:"",className:"",method:function(){b.mSelect(a.get$mainElement(a.plugins.contextMenu.rightClickItem))},selectionRequired:!0},"listButton",["contextMenu"]);this.selectionList=[];this.removeSelectedList();this.setEvents()},setEvents:function(){var a=this.ssi,b=this,c=a.addButton({label:'<div class="icon ssi-selectImgIcon"></div>',
id:"",className:"ssi-selectItem",method:function(c){b.mSelect(a.get$mainElement(e(c.currentTarget)))},selectionRequired:!0},"itemButton");this.ssi.$element.on("appendItemAction.ssi",function(a,b){b.$element.find("div.ssi-optionsDiv").append(c.clone(!0))});a.$element.on("resetAction.ssi changeCollectionAction.ssi",function(){b.removeSelectedList()});a.$content.on("click.ssi",".ssi-selectable",function(c){var d=e(c.currentTarget);"details"===b.options.defaultPreviewType&&d.hasClass("ssi-displayDiv")||
(c.preventDefault(),c.ctrlKey?b.mSelect(a.get$mainElement(d)):(d=e(c.target),"details"!==b.options.defaultPreviewType||d.is("a")||d.parent().is("a")||b.removeSelectedList()))}).on("mousedown.ssi",function(c){var d;if(0<b.selectionList.length){d=e(c.target);var g=a.$content.find(".ssi-itemWrapper"),h=g.is(c.target),g=0===g.has(c.target).length,k=d.hasClass("ssi-selectionRequired");0<b.selectionList.length&&(c.ctrlKey||h||!g||d.parents("ul").hasClass("ssi-dropdown")||k||d.is("a")||d.parents("ul").hasClass("custom-menu")||
b.removeSelectedList())}})},mSelect:function(a){a=e(a);var b=this.ssi;0==this.selectionList.length&&(this.ssi.$content.find(".ssi-mustSelect").removeClass("disabled"),b.$content.find(".ssi-selectionRequired").removeClass("ssi-hidden"));a.hasClass("ssi-mActive")?(a.removeClass("ssi-mActive"),Ss_input.tools.removeFromArray(this.selectionList,a.attr("data-ID")),1>this.selectionList.length&&b.$content.find(".ssi-selectionRequired").addClass("ssi-hidden")):(a.addClass("ssi-mActive"),a.data("info"),this.selectionList.push(a.attr("data-ID")));
b.checkExcludedButtons()},removeSelectedList:function(){var a=this.ssi;this.selectionList=[];a.$content.find(".ssi-mActive").removeClass("ssi-mActive");a.$content.find(".ssi-selectionRequired").addClass("ssi-hidden");a.$content.find(".ssi-mustSelect").addClass("disabled");return this}})})(jQuery);
(function(e){Ss_input.plugins.test=Ss_input.Plugin.extend({init:function(){this.options.translateFields=this.options.translateFields||this.ssi.options.translateFields;this.$content="";this.setButtons()},setButtons:function(){this.ssi.addButton({label:'<div class="icon ssi-imgBoxIcon"></div>',id:"",stopPropagation:!1,className:"ssi-imgBox"},"itemButton",!1)},getFilesInfo:function(){var a=this.ssi.getSelectedData();console.log(a[0]._id)}})})(jQuery);
(function(e){Ss_input.fileSystem.download=Ss_input.Plugin.extend({init:function(){this.setButtons()},setButtons:function(){var a=this;this.ssi.addButton({label:'<span class="icon ssi-downloadIcon"></span>'+this.translate("download"),method:function(){a.download()},className:"ssi-openInBtn",selectionRequired:!0},"listButton",["contextMenu"],'condition:(field:(mimeType)!="directory")')},download:function(){for(var a=this.ssi,b=a.getSelectedField("name").length,c=0;c<b;c++){var d=a.getSelectedField("name")[c],
e=document.createElement("a");e.download=d;e.href=a.fileSystem.getPath(d);document.body.appendChild(e);e.click();document.body.removeChild(e);delete e}}})})(jQuery);(function(e){Ss_input.fileSystemHandlers.imgBox=Ss_input.Handler.extend({defaults:{excludeItems:'condition:(field:(mimeType).split("/")[0]!="image")',imageField:"path"}})})(jQuery);
(function(e){Ss_input.fileSystemHandlers.infoBubble=Ss_input.Handler.extend({defaults:{excludeFields:["ext","name","path"],includeFields:[],excludeItems:'condition:(field:(mimeType)=="directory")',translateFields:!0}})})(jQuery);
(function(e){Ss_input.fileSystemHandlers.search=Ss_input.Handler.extend({group:["fileSystem"],init:function(){this.defaults={searchFields:["name","ext","mimeType"],deepSearch:{multiple:!1,data:{rootPath:this.ssi.fileSystem.options.rootPath+"/"},ajaxOptions:{url:this.ssi.fileSystem.options.scriptsPath+"/deepSearchAction.php"}}}}})})(jQuery);
(function(e){Ss_input.fileSystemHandlers.selectAll=Ss_input.Handler.extend({group:["fileSystem"],defaults:{selectableClasses:{folders:"directory",images:"image",textFiles:"text"},translateFields:!0}})})(jQuery);
(function(e){Ss_input.fileSystemHandlers.selection=Ss_input.Handler.extend({group:"fileSystem",defaults:{pathType:"relative",excludeItems:'condition:(field:(mimeType)=="directory")',modeOptions:{selectionField:"path"}},init:function(){var a=this.plugin;this.ssi.$element.on("selectionAction.ssi",function(b,c){"absolute"==a.options.pathType&&(c.selection=document.location.protocol+"//"+window.location.hostname+c.selection)})}})})(jQuery);
(function(e){Ss_input.fileSystemHandlers.sidebar=Ss_input.Handler.extend({group:"fileSystem",defaults:{},extend:{copyTree:function(a,b,c,d){c=c||!0;a=this.ssi.$content.find("#ssi-sidebar").find(document.getElementById(a));d||(a=a.clone());b=a.attr({id:b}).children("a.ssi-listAnchor").attr({href:b}).html(Ss_input.tools.basename(b)).find("ul");b.css("display","none");b.parent("li").find(".active").removeClass("active");b=a.parent();if(!c)return a;c&&this.addTree("",this.ssi.fileSystem.options.rootPath+
this.ssi.currentCollection.id,a);d&&0===b.children().length&&b.parent().removeClass("parent").find("a.ssi-treeTrigger").remove()}},init:function(){this.getData();this.setEvent();this.defaults={className:" ssi-fileSystem",fieldDefinition:{name:"name",id:"url",url:"url",children:"children",className:"className"}}},getData:function(){var a=this;this.ssi.ajaxCall({data:{rootPath:this.storage.options.rootPath+"/"},url:a.storage.options.scriptsPath+"/scanFolderAction.php"},function(b){a.setSidebar(b)})},
setSidebar:function(a){"treeView"==this.plugin.options.mode?a=[{name:"root",url:this.ssi.fileSystem.getPath("/"),children:a,active:!0}]:a.unshift({name:'<div class="icon ssi-rootIcon"></div> root',url:this.ssi.fileSystem.getPath("/"),id:"/",children:[]});this.plugin.setSidebar(a)},setEvent:function(){var a=this.ssi;a.$content.on("click.ssi","#ssi-sidebarContent .ssi-listAnchor",function(b){a.fileSystem.scanDir(e(b.currentTarget).attr("href"));e(this).parents().find(".ssi-treeViewCurrent").removeClass("ssi-treeViewCurrent");
e(this).parents().find(".ssi-treeViewRCurrent").removeClass("ssi-treeViewRCurrent");e(this).addClass("ssi-treeViewRCurrent");return!1});a.$element.on("changeCollectionAction.ssi",function(){a.$content.find(".ssi-treeViewCurrent").removeClass("ssi-treeViewCurrent");a.$content.find(".ssi-treeViewRCurrent").removeClass("ssi-treeViewRCurrent")})}})})(jQuery);(function(e){Ss_input.fileSystemHandlers.sort=Ss_input.Handler.extend({defaults:{sortType:"asc",sortBy:"ext",sortableFields:["ext","name","date"]}})})(jQuery);
(function(e){var a=[];Ss_input.fileSystemHandlers.upload=Ss_input.Handler.extend({group:["fileSystem"],extend:{onEachUpload:function(b){if("success"===b.uploadStatus){var c=b.name.replace(" ","-");b={name:c,mimeType:b.type,date:Ss_input.tools.getDate(),path:this.ssi.fileSystem.getPath(c),size:b.size,ext:Ss_input.tools.getExtension(b.name),dimensions:"unknown"};a.push(b)}}},init:function(){this.setEvents()},setEvents:function(){var a=this;this.ssi.$element.on("uploadCloseAction.ssi",function(){a.appendItems()})},
appendItems:function(){a.length&&this.ssi.plugins.scan.appendItems(a);a=[];this.ssi.$element.trigger("resetAction")}})})(jQuery);(function(e){Ss_input.fileSystemHandlers.scan=Ss_input.Handler.extend({group:"fileSystem",defaults:{titleField:"name",idField:"path",displayImage:'condition:(field:(mimeType).split("/")[0]=="image"? field:(path):"")',itemClass:'condition:(field:(mimeType).split("/")[0]=="image"||field:(mimeType).split("/")[0]=="directory"?field:(mimeType).split("/")[0]:field:(mimeType).split("/")[0]+" ssi-empty")'}})})(jQuery);
(function(e){Ss_input.fileSystemHandlers["delete"]=Ss_input.Handler.extend({init:function(){this.defaults={stringifyData:!0,sendId:"inForm",ajaxOptions:{url:this.storage.options.scriptsPath+"/deletedirAction.php"}};this.setEvents()},setEvents:function(){var a=this.ssi,b=this;this.ssi.$element.on("removeItemAction.ssi",function(c,d){if(!Ss_input.tools.isFile(d,a.fileSystem.options.allowed)){b.ssi.$element.trigger("removeCollectionAction.ssi",[d.replace(a.fileSystem.options.rootPath,"")]);var e=a.plugins.sidebar;
e&&e.deleteTree(d)}})}})})(jQuery);
//# sourceMappingURL=ss-input.min.js.map
